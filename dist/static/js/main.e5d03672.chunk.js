(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{194:function(e,t){},199:function(e,t,a){e.exports=a(396)},204:function(e,t,a){},205:function(e,t,a){},320:function(e,t,a){},379:function(e,t,a){},380:function(e,t,a){},382:function(e,t,a){},383:function(e,t,a){},384:function(e,t,a){},385:function(e,t,a){},386:function(e,t,a){},387:function(e,t,a){},388:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){},396:function(e,t,a){"use strict";a.r(t);var n,l=a(0),o=a.n(l),r=a(9),i=a.n(r),c=(a(204),a(16)),s=a(14),u=a(19),d=a(17),m=a(18),p=a(7),b=a(195),f=a.n(b),h=a(408),g=a(398),v=a(400),y=a(403),C=a(38),E=(a(205),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.form,n=t.onCloseModal;a.validateFields(function(e,t){e||n(t)})}},{key:"render",value:function(){var e=this.props,t=e.showModal,a=e.form.getFieldDecorator;return t?o.a.createElement("div",{className:"edit-name-box"},o.a.createElement(v.a,{onSubmit:this.handleSubmit,style:{padding:"0 20px"}},o.a.createElement(v.a.Item,null,o.a.createElement("h3",{className:"title"},"\u9875\u9762\u540d\u79f0")),o.a.createElement(v.a.Item,null,a("pageName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9875\u9762\u540d\u79f0!"},{pattern:/^[a-zA-Z]+$/,message:"\u540d\u79f0\u53ea\u80fd\u5305\u542b\u5b57\u6bcd\uff01"}]})(o.a.createElement(y.a,{placeholder:"\u53ea\u80fd\u5305\u542b\u5b57\u6bcd"}))),o.a.createElement(v.a.Item,{style:{marginTop:"15px"}},o.a.createElement(C.a,{type:"primary",htmlType:"submit",style:{width:"100%"}},"\u786e\u5b9a")))):null}}]),t}(l.Component)),O=v.a.create()(E),x=a(41),j=a(44),k=a(64),S=a(36),I=a(399),D=a(20),w=a.n(D),T=a(75),A=a(84),F=a(401),P=a(147),V=a(409),N=a(111),B=a(10),L=T.a.Group,M=A.a.Option,U=F.a.RangePicker,R=P.a.TabPane,z=function(e){var t=e.breadcrumbArr,a=void 0===t?[]:t,n=e.style;return o.a.createElement(V.a,{style:n},a.map(function(e,t){var a=e.label,n=e.value;return o.a.createElement(V.a.Item,{key:"breadcrumb-".concat(t)},n?o.a.createElement("a",{href:n},a):o.a.createElement("span",null,a))}))},_=function(e){var t=e.text,a=e.style;return o.a.createElement("span",{style:a},t)},H=function(e){var t=e.style,a=void 0===t?{}:t,n=e.radioArr,l=void 0===n?[]:n;return o.a.createElement(N.a.Group,{style:Object(j.a)({},a)},Array.isArray(l)?l.map(function(e){var t=e.key,a=e.label,n=e.value;return o.a.createElement(N.a,{key:t||n,value:n},a)}):null)},Y=function(e){var t=e.style,a=void 0===t?{}:t,n=e.tabsArr,l=void 0===n?[]:n;return o.a.createElement(P.a,{style:a},Array.isArray(l)?l.map(function(e){var t=e.key,a=e.label,n=e.value;return o.a.createElement(R,{key:t||n,tab:a})}):null)},q=function(e){var t=e.style,a=void 0===t?{}:t,n=e.checkboxArr,l=void 0===n?[]:n;return o.a.createElement(L,{options:l,style:Object(j.a)({width:"100%"},a)})},W=function(e){var t=e.style,a=void 0===t?{}:t,n=e.selectArr,l=void 0===n?[]:n;return o.a.createElement(A.a,{style:Object(j.a)({width:"100%"},a)},Array.isArray(l)?l.map(function(e){var t=e.key,a=e.label,n=e.value;return o.a.createElement(M,{key:t||n,value:n},a)}):null)},J=function(e){var t=e.showTime,a=e.format;return o.a.createElement(F.a,{style:{width:"100%"},showTime:t,format:a})},K=function(e){var t=e.showTime,a=e.format;return o.a.createElement(U,{showTime:t,format:a,style:{width:"100%"}})},G=function(e){var t=e.btnArr;return o.a.createElement(l.Fragment,null,t.map(function(e){var t=e.btnText,a=void 0===t?"button":t,n=(e.expandFlag,e.expandCount,e.style),l=void 0===n?{}:n,r=e.index,i=Object(x.a)(e,["btnText","expandFlag","expandCount","style","index"]);return o.a.createElement(C.a,Object.assign({key:"btn-".concat(r),style:l},i),a)}))},$=function(e,t,a){var n=e.btnArr;return o.a.createElement(l.Fragment,null,n.map(function(e){var n=e.btnText,l=void 0===n?"button":n,r=e.type,i=e.index,c=e.props,s=e.style,u=void 0===s?{}:s,d=e.expandFlag;if("1"===(void 0===d?"0":d)){var m=t?"\u9690\u85cf":"\u5c55\u5f00";return o.a.createElement("a",{className:"btn-collapse",onClick:a,href:"javascript:void(0);",style:u,key:"btn-".concat(i)},m,o.a.createElement(B.a,{type:t?"up":"down"}))}return o.a.createElement(C.a,Object.assign({key:"btn-".concat(i),type:r,style:u},c),l)}))},Q=function(e){var t=e.placeholder,a=void 0===t?"":t,n=e.type,l=null;switch(void 0===n?"Input":n){case"Text":l=_(e);break;case"Breadcrumb":l=z(e);break;case"Select":l=W(e);break;case"RangePicker":l=K(e);break;case"DatePicker":l=J(e);break;case"Radio":l=H(e);break;case"Checkbox":l=q(e);break;case"Tabs":l=Y(e);break;case"Btn":l=G(e);break;default:l=o.a.createElement(y.a,{placeholder:a})}return l},Z=(a(167),a(320),v.a.Item),X=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={expand:!1},a.onSubmit=a.onSubmit.bind(Object(p.a)(Object(p.a)(a))),a.onCollapse=a.onCollapse.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.layoutConfig;if(Array.isArray(e)){var t=e.find(function(e){return"FormContainer"===e.type});if(t){var a=t.configs.formItemArr,n=a&&a.find(function(e){return"Btn"===e.type});if(n){var l=n.btnArr.find(function(e){return e.expandFlag});l&&(this.state.expand=l.expand,this.state.expandCount=+l.expandCount)}}}}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"getLayoutConfig",value:function(){return null}},{key:"onCollapse",value:function(){var e=this.state.expand,t=void 0!==e&&e;this.setState({expand:!t})}},{key:"_onShowSizeChange",value:function(e,t){this.isFunc("onShowSizeChange")&&this.onShowSizeChange(e,t)}},{key:"_onChange",value:function(e,t){this.isFunc("onChange")&&this.onChange(e,t)}},{key:"getInitialValue",value:function(e){var t=e.type,a=void 0===t?"Input":t,n=e.defaultValue,l=e.dateFormat,o=void 0===l?"YYYY-MM-DD":l;return"DatePicker"===a||"RangePicker"===a?n&&w()(n,o):e.defaultValue||""}},{key:"getTableData",value:function(){return[]}},{key:"isFunc",value:function(e){return"function"===typeof this[e]}},{key:"renderRow",value:function(e){if(!Array.isArray(e))return null;var t=e.slice();return o.a.createElement(k.a,{key:"basic-row",gutter:{md:8,lg:24,xl:48}},this.renderCol(t))}},{key:"renderCol",value:function(e){var t=this,a=this.props.form,n=a.getFieldDecorator;return e.map(function(e,l){var r=e.label,i=e.name,c=e.colSpan,s=void 0===c?8:c,u=e.colIndex,d=e.type,m=e.cellStyles,p=void 0===m?{}:m,b=e.hasLinkage,f=t.state,h=f.expand,g=f.expandCount;if("Btn"===d)return o.a.createElement(S.a,{md:s,sm:24,key:"col-".concat(u)},o.a.createElement(Z,{style:p},$(e,h,t.onCollapse)));if(!i)return null;if("1"===b){var v=e.linkName,y=e.condition;if(a.getFieldValue(v)!==y)return null}return g>0&&!h&&l+1>g&&"Btn"!==d?null:o.a.createElement(S.a,{md:s,sm:24,key:"col-".concat(u)},o.a.createElement(Z,{label:r,style:p},n(i,{rules:[],initialValue:t.getInitialValue(e)})(Q(e))))})}},{key:"renderBoxCell",value:function(e,t){if(!e)return null;for(var a=[],n="".concat(100/e,"%"),l=0;l<e;l++){var r=t[l]||{},i=r.cellStyles,c=void 0===i?{}:i;r.type||(c.minHeight="1.5em"),a.push(o.a.createElement("div",{className:"cell",key:"cell-".concat(l),style:Object(j.a)({width:n},c)},r.type&&Q(t[l])))}return a}},{key:"_renderBox",value:function(e){var t=e.configs,a=t.boxStyles,n=t.layoutColumn,l=t.cellsArr;return o.a.createElement("div",{className:"fulu-cell-box",style:a,key:"cell-box-".concat(n)},this.renderBoxCell(n,l))}},{key:"_renderForm",value:function(e){var t=e.configs;if(this.isFunc("renderForm"))return this.renderForm(t);var a=t.formItemArr;return o.a.createElement("div",{className:"form-box fulu-box",key:"query-form"},o.a.createElement(v.a,{onSubmit:this.onSubmit,layout:"inline"},this.renderRow(a)))}},{key:"_renderTable",value:function(e){var t=e.configs;if(this.isFunc("renderTable"))return this.renderTable(t);var a=t.pagination,n=t.rowSelection,l=Object(x.a)(t,["pagination","rowSelection"]),r=this.isFunc("getTableTotal")?this.getTableTotal():0,i=Object.assign({size:"small",onShowSizeChange:this._onShowSizeChange,onChange:this._onShowSizeChange,showTotal:function(e){return"\u5171".concat(e,"\u6761")},pageSizeOptions:["10","20","30","40"],total:r,defaultPageSize:1,showSizeChanger:!0,showQuickJumper:!0},a),c=this.getTableData();return o.a.createElement("div",{className:"table-box fulu-box",key:"query-table"},o.a.createElement(I.a,Object.assign({dataSource:c,pagination:i,rowSelection:n,columns:t.columns},l)))}},{key:"_renderTab",value:function(e){var t=e.configs;return this.isFunc("renderTab")?this.renderTab(t):null}},{key:"_renderCustom",value:function(e){var t=e.configs;return this.isFunc("renderCustom")?this.renderCustom(t):null}},{key:"renderContent",value:function(e){var t=this;return e.map(function(e){var a=e.type;return"BoxContainer"===a?t._renderBox(e):"FormContainer"===a?t._renderForm(e):"TableContainer"===a?t._renderTable(e):"CustomContainer"===a?t._renderCustom(e):null})}},{key:"render",value:function(){var e=this.getLayoutConfig();return o.a.createElement("div",{className:"wrapper"},Array.isArray(e)?this.renderContent(e):null)}}]),t}(l.PureComponent),ee=a(404),te=v.a.create()(n=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getLayoutConfig",value:function(){return this.props.layoutConfig}}]),t}(X))||n,ae=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showModal,a=e.layoutConfig,n=e.onCloseModal;return o.a.createElement(ee.a,{visible:t,footer:null,width:"100%",closable:!0,centered:!0,onCancel:n,title:"\u9875\u9762\u9884\u89c8",maskClosable:!0},o.a.createElement(te,{layoutConfig:a}))}}]),t}(l.Component),ne=a(397),le=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onDragStart",value:function(e,t){e.dataTransfer.setData("text/plain",JSON.stringify(t))}},{key:"render",value:function(){var e=this,t=this.props,a=t.ch,n=t.data;return o.a.createElement("span",{draggable:"true",className:"drag-item",onDragStart:function(t){e.onDragStart(t,n)}},a)}}]),t}(l.PureComponent),oe={component:{form:[{ch:"Input",data:{type:"Input",label:"",name:""}},{ch:"Button",data:{type:"Button"}},{ch:"Select",data:{type:"Select"}},{ch:"DatePicker",data:{type:"DatePicker"}},{ch:"RangePicker",data:{type:"RangePicker"}},{ch:"Radio",data:{type:"Radio"}},{ch:"Checkbox",data:{type:"Checkbox"}}],others:[{ch:"Breadcrumb",data:{type:"Breadcrumb"}},{ch:"Text",data:{type:"Text"}},{ch:"Tabs",data:{type:"Tabs"}}]},layout:[{ch:"Form",data:{type:"FormContainer"}},{ch:"Table",data:{type:"TableContainer"}},{ch:"Box",data:{type:"BoxContainer"}}]},re=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderContentByType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o.a.createElement(l.Fragment,{key:"".concat(t)},t?o.a.createElement(ne.a,{key:"".concat(t)},t):null,e.map(function(e,t){return o.a.createElement(le,Object.assign({},e,{key:"drag-".concat(e.ch,"-").concat(t)}))}))}},{key:"render",value:function(){var e=this,t=this.props.tabType,a=oe[void 0===t?"component":t];return Array.isArray(a)?this.renderContentByType(a):Object.keys(a).map(function(t){return Array.isArray(a[t])?e.renderContentByType(a[t],t):null})}}]),t}(l.PureComponent),ie=P.a.TabPane,ce=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("dragover",function(e){e.preventDefault()},!1),document.addEventListener("drag",function(e){},!1),document.addEventListener("dragstart",function(e){e.target.style.opacity=.5},!1),document.addEventListener("dragend",function(e){e.target.style.opacity="",document.querySelectorAll(".drop-zone").forEach(function(e){e.style.background="#fff"})},!1),document.addEventListener("dragenter",function(e){"drop-zone"===e.target.className&&(e.target.style.background="#96cdf9")},!1),document.addEventListener("dragleave",function(e){"drop-zone"===e.target.className&&(e.target.style.background="")},!1)}},{key:"render",value:function(){return o.a.createElement(P.a,{defaultActiveKey:"1"},o.a.createElement(ie,{tab:"\u5e03\u5c40",key:"layout"},o.a.createElement(re,{tabType:"layout"})),o.a.createElement(ie,{tab:"\u7ec4\u4ef6",key:"component"},o.a.createElement(re,null)))}}]),t}(l.Component),se=a(406),ue=a(193),de=a.n(ue),me={AppService:function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"generatePage",value:function(e){return de()({method:"POST",url:"/generatePage",data:e})}}]),e}()};var pe,be,fe=a(405),he={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},ge=(a(379),A.a.Option),ve=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){for(var t=this,a={},n=24/e,l=0;l<e;l++)a["colSpan-".concat(l)]=n;setTimeout(function(){t.props.form.setFieldsValue(a)},0)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.form,n=t.onClose;a.validateFields(function(e,t){if(!e){for(var a=t.layoutColumn,l=+a,o=0,r={layoutColumn:a,colSpanArr:[]},i=0;i<l;i++){var c=+t["colSpan-".concat(i)];o+=c,r.colSpanArr.push(c)}if(o>24)return void se.a.error("\u8de8\u5217\u603b\u6570\u4e0d\u80fd\u8d85\u8fc724!");n(r)}})}},{key:"renderColSpanInputs",value:function(){for(var e=this.props.form,t=e.getFieldDecorator,a=+e.getFieldValue("layoutColumn"),n=[],l=0;l<a;l++)n.push(o.a.createElement(v.a.Item,Object.assign({key:"formitem-".concat(l),label:"\u7b2c".concat(l+1,"\u5217")},he),t("colSpan-".concat(l),{initialValue:24/a,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5217\u5bbd!"},{pattern:/^[1-9](\d)?$/,message:"\u53ea\u80fd\u5305\u542b\u6570\u5b57\uff01"}]})(o.a.createElement(y.a,null))));return n}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.form,n=e.onClose,l=e.onDeleteContainer,r=a.getFieldDecorator;return o.a.createElement(fe.a,{visible:t,width:420,title:"\u7f16\u8f91\u5217",onClose:function(){n(0)}},o.a.createElement(v.a,{onSubmit:this.handleSubmit,style:{padding:"0 20px"}},o.a.createElement(v.a.Item,Object.assign({label:"\u8868\u5355\u5217"},he),r("layoutColumn",{initialValue:3,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5217\u6570!"}]})(o.a.createElement(A.a,{onChange:this.handleChange},o.a.createElement(ge,{value:"2"},"2"),o.a.createElement(ge,{value:"3"},"3"),o.a.createElement(ge,{value:"4"},"4")))),o.a.createElement(ne.a,null),this.renderColSpanInputs(),o.a.createElement("div",{className:"btn-box"},o.a.createElement(C.a,{type:"primary",htmlType:"submit",style:{marginRight:"10px"}},"\u786e\u5b9a"),o.a.createElement(C.a,{onClick:l},"\u5220\u9664\u5bb9\u5668"))))}}]),t}(l.Component),ye=v.a.create()(ve),Ce=a(114),Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";return e?e.split(t).reduce(function(e,t){var a=t.split(":"),n=Object(Ce.a)(a,2),l=n[0],o=n[1];return l&&o&&(e[l]=o.replace(/['"\s]/g,"")),e},{}):{}},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";return"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).reduce(function(t,a){return t.push("".concat(a,":").concat(e[a])),t},[]).join(t):Array.isArray(e)?e.join(t):e},xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=0;if(t===n.length)l=24;else{for(var o=0,r=0,i=0;i<a.length;i++)if(a[i].colIndex>=e){if(0===(r%=24))o=0;else for(var c=0;c<n.length;c++)(r-=n[c])<=0&&(o=c+1,c=n.length);i=a.length}else r+=a[i].colSpan;var s,u=0;for(t<=n.length-o&&(u=o),s=u+t-1;u<=s;u++)l+=n[u]}return l},je=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).renderItem=function(e){var t=e.type,n=null;switch(void 0===t?"Input":t){case"Select":case"RangePicker":case"DatePicker":case"Radio":case"Checkbox":case"Input":n=Q(e);break;case"Btn":var l=a.props,o=l.expand,r=l.onCollapse;n=$(e,o,r);break;default:n=Q(e)}return n},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getInitialValue",value:function(e){var t=e.type,a=void 0===t?"Input":t,n=e.defaultValue;return"DatePicker"===a||"RangePicker"===a?n&&w()(n,"YYYY-MM-DD"):e.defaultValue||""}},{key:"render",value:function(){var e=this.props,t=e.formItemConfig,a=void 0===t?{}:t,n=e.form,r=n.getFieldDecorator,i=a.type,c=a.colSpan,s=a.label,u=a.name,d=a.rules,m=a.cellStyles,p=void 0===m?{}:m,b=a.hasLinkage,f=c||8;if(!u&&"Btn"!==i)return null;if("1"===b){var h=a.linkName,g=a.condition;if(n.getFieldValue(h)!==g)return null}return o.a.createElement(l.Fragment,null,o.a.createElement(S.a,{span:c,md:f,sm:24},"Btn"!==i?o.a.createElement(v.a.Item,{label:s,style:p},r(u,{rules:d||[],initialValue:this.getInitialValue(a)})(this.renderItem(a))):o.a.createElement(v.a.Item,{style:p},this.renderItem(a))))}}]),t}(l.Component),ke=a(402),Se=a(407),Ie=a(76),De=A.a.Option,we=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={deleteComponent:!1},a.onDeleteComponent=a.onDeleteComponent.bind(Object(p.a)(Object(p.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a.onAddListItem=a.onAddListItem.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteListItem=a.onDeleteListItem.bind(Object(p.a)(Object(p.a)(a))),a.renderBtnPanelHeader=a.renderBtnPanelHeader.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteButton=a.onDeleteButton.bind(Object(p.a)(Object(p.a)(a))),a.onAddButton=a.onAddButton.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getItemSetType",value:function(){return[]}},{key:"componentWillReceiveProps",value:function(e){var t=e.dropConfig,a=t.type;if(~this.getItemSetType().indexOf(a)&&!this["init".concat(a)]&&e.visible){var n=a.toLowerCase(),l="".concat(n,"Arr"),o=t[l]||[];this.setState(Object(Ie.a)({},l,o)),this["".concat(n,"Index")]=o.length,this["init".concat(a)]=!0}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var a=this.state,n=a.deleteComponent,l=a.btnArr,o=this.props,r=o.form,i=o.onUpdateConfigs,c=o.dropConfig,s=o.colSpanArr,u=o.formItemArr,d=o.inForm,m=void 0===d||d,p=this.getItemSetType();r.validateFields(function(e,a){if(!e){var o=Object.assign({},c,a);n&&(o.deleteFlag=!0),o.cellStyles=Ee(a.cellStyles);var r=o.type;if(~p.indexOf(r)&&"Btn"!==r){var d=r.toLowerCase(),b="".concat(d,"Arr"),f=t.state[b].slice();f.forEach(function(e){var t=e.index,n="".concat(d,"Label-").concat(t),l="".concat(d,"Value-").concat(t);e.label=a[n],e.value=a[l],delete o[n],delete o[l]}),o[b]=f}else if("DatePicker"===r||"RangePicker"===r){var h=a.format;o.showTime="1"===a.showTime,"DatePicker"===r&&(o.defaultValue=a.defaultValue&&a.defaultValue.format(h))}else if("Btn"===r){var g=l.slice();g.forEach(function(e){var t=e.index,n="btnText-".concat(t),l="type-".concat(t),r="htmlType-".concat(t),i="onClick-".concat(t),c="expandFlag-".concat(t),s="btnStyle-".concat(t);e.btnText=a[n],e.type=a[l],e.htmlType=a[r],e.expandFlag=a[c],e.style=Ee(a[s]),"submit"!==e.htmlType&&(e.onClick=a[i]);var u="expandCount-".concat(t);"1"===a[c]&&(e.expandCount=a[u]),delete o[s],delete o[u],delete o[c],delete o[i],delete o[r],delete o[n],delete o[l]}),o.btnArr=g}if(m){var v=a.originSpan,y=void 0===v?1:v;o.originSpan=y,o.colSpan=xe(o.colIndex,y,u,s)}t.onCloseEdit(),i(o)}})}},{key:"onCloseEdit",value:function(){var e=this;this.initBtn=!1,this.getItemSetType().forEach(function(t){e["init".concat(t)]=!1}),this.setState({deleteComponent:!1})}},{key:"onDeleteComponent",value:function(){this.setState({deleteComponent:!0})}},{key:"onAddButton",value:function(){var e=this.state.btnArr.slice();e.push({btnText:"button",type:"primary",index:this.btnIndex}),this.setState({btnArr:e}),this.btnIndex+=1}},{key:"onDeleteButton",value:function(e){var t=this.state.btnArr,a=(void 0===t?[]:t).reduce(function(t,a){return a.index!==e&&t.push(a),t},[]);this.setState({btnArr:a})}},{key:"onDeleteListItem",value:function(e,t){var a="".concat(t,"Arr"),n=this.state[a].reduce(function(t,a){return a.index!==e&&t.push(a),t},[]);this.setState(Object(Ie.a)({},a,n))}},{key:"onAddListItem",value:function(e){var t="".concat(e,"Arr"),a=this.state[t].slice();a.push({label:"",value:"",index:this["".concat(e,"Index")]}),this.setState(Object(Ie.a)({},t,a)),this["".concat(e,"Index")]+=1}},{key:"renderDefaultValueItem",value:function(){var e=this.props,t=e.dropConfig,a=e.form,n=t.type,l=t.defaultValue,r=a.getFieldDecorator;if(~this.getItemSetType().indexOf(n)){var i=n.toLowerCase(),c="".concat(i,"Arr"),s=this.state[c];return o.a.createElement(v.a.Item,Object.assign({},he,{label:"defaultValue"}),r("defaultValue",{initialValue:l})(o.a.createElement(A.a,null,s.map(function(e){var t=e.index,n=a.getFieldValue("".concat(i,"Value-").concat(t)),l=a.getFieldValue("".concat(i,"Label-").concat(t));return o.a.createElement(De,{value:n,key:"op-".concat(t)},"".concat(n,"/").concat(l))}))))}return"DatePicker"===n?o.a.createElement(v.a.Item,Object.assign({},he,{label:"defaultValue"}),r("defaultValue",{initialValue:l})(o.a.createElement(F.a,{style:{width:"100%"}}))):"Input"===n?o.a.createElement(v.a.Item,Object.assign({},he,{label:"defaultValue"}),r("defaultValue",{initialValue:l})(o.a.createElement(y.a,null))):"Text"===n?o.a.createElement(v.a.Item,Object.assign({},he,{label:"text"}),r("text",{initialValue:t.text})(o.a.createElement(y.a,null))):null}},{key:"renderBtnPanelHeader",value:function(e){var t=this,a=e.btnText,n=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},a),o.a.createElement(B.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteButton(n)}}))}},{key:"renderTabs",value:function(){return this.renderItemSettingCard({title:"tab\u8bbe\u7f6e",dataKey:"tabs"})}},{key:"renderBreadcrumb",value:function(){return this.renderItemSettingCard({title:"breadcrumb\u8bbe\u7f6e",dataKey:"breadcrumb"})}},{key:"renderSelect",value:function(){return this.renderItemSettingCard({title:"select\u8bbe\u7f6e",dataKey:"select"})}},{key:"rendeRadio",value:function(){return this.renderItemSettingCard({title:"radio\u8bbe\u7f6e",dataKey:"radio"})}},{key:"rendeCheckbox",value:function(){return this.renderItemSettingCard({title:"checkbox\u8bbe\u7f6e",dataKey:"checkbox"})}},{key:"renderItemSettingCard",value:function(e){var t=this,a=e.title,n=e.dataKey,r=this.props.form,i="".concat(n,"Arr"),c=this.state[i]||[];return o.a.createElement(Se.a,{title:a,extra:o.a.createElement(B.a,{type:"plus-circle",onClick:function(){t.onAddListItem(n)}})},c.map(function(e){var a=e.label,i=e.value,c=e.index;return o.a.createElement(l.Fragment,{key:"".concat(n,"-").concat(c)},o.a.createElement(v.a.Item,{key:"".concat(n,"-label-").concat(c),style:{width:"45%",display:"inline-block"}},r.getFieldDecorator("".concat(n,"Label-").concat(c),{initialValue:a})(o.a.createElement(y.a,{placeholder:"label"}))),o.a.createElement(v.a.Item,{key:"".concat(n,"-value-").concat(c),style:{width:"45%",display:"inline-block",marginLeft:"10px"}},r.getFieldDecorator("".concat(n,"Value-").concat(c),{initialValue:i})(o.a.createElement(y.a,{placeholder:"value"}))),o.a.createElement(B.a,{type:"close-circle",style:{marginLeft:"6px",lineHeight:"39px"},onClick:function(){t.onDeleteListItem(c,n)}}))}))}}]),t}(l.Component),Te=(a(380),ke.a.Panel),Ae=A.a.Option,Fe=y.a.TextArea,Pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={selectArr:[],radioArr:[],checkboxArr:[],btnArr:[]},a.onAddCellStyleItem=a.onAddCellStyleItem.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteCellStyleItem=a.onDeleteCellStyleItem.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getItemSetType",value:function(){return["Select","Btn","Radio","Checkbox"]}}]),Object(s.a)(t,[{key:"onAddCellStyleItem",value:function(){var e=this.state.cellStyles,t=(void 0===e?[]:e).slice();t.push({value:"",name:"",index:this.cellStyleIndex}),this.setState({cellStyles:t}),this.cellStyleIndex+=1}},{key:"onDeleteCellStyleItem",value:function(e){var t=this.state.cellStyles,a=(void 0===t?[]:t).reduce(function(t,a){return a.index!==e&&t.push(a),t},[]);this.setState({cellStyles:a})}},{key:"renderBtnCard",value:function(){var e=this,t=this.props,a=t.dropConfig,n=t.form,l=a.type,r=this.state,i=r.btnArr,c=r.expandFlag,s=void 0===c?"0":c;return"Btn"===l?o.a.createElement(Se.a,{title:"\u6309\u94ae\u533a\u57df",extra:o.a.createElement(B.a,{type:"plus-circle",onClick:this.onAddButton})},o.a.createElement(ke.a,null,i.map(function(t){var a=t.index,l=t.btnText,r=t.type,i=t.htmlType,c=void 0===i?"button":i,u=t.onClick,d=t.expandCount,m=t.btnStyle;return o.a.createElement(Te,{header:e.renderBtnPanelHeader(t),key:"btn-".concat(a)},o.a.createElement(v.a.Item,Object.assign({key:"btnText-".concat(a),label:"\u6309\u94ae\u6587\u5b57"},he),n.getFieldDecorator("btnText-".concat(a),{initialValue:l})(o.a.createElement(y.a,{placeholder:"btnText"}))),o.a.createElement(v.a.Item,Object.assign({key:"type-".concat(a),label:"type"},he),n.getFieldDecorator("type-".concat(a),{initialValue:r})(o.a.createElement(A.a,null,o.a.createElement(Ae,{value:"primary"},"primary"),o.a.createElement(Ae,{value:"dashed"},"dashed"),o.a.createElement(Ae,{value:"danger"},"danger"),o.a.createElement(Ae,{value:""},"none")))),o.a.createElement(v.a.Item,Object.assign({key:"htmlType-".concat(a),label:"htmlType"},he),n.getFieldDecorator("htmlType-".concat(a),{initialValue:c})(o.a.createElement(A.a,null,o.a.createElement(Ae,{value:"submit"},"submit"),o.a.createElement(Ae,{value:"reset"},"reset"),o.a.createElement(Ae,{value:"button"},"button")))),o.a.createElement(v.a.Item,Object.assign({key:"onClick-".concat(a),label:"onClick"},he),n.getFieldDecorator("onClick-".concat(a),{initialValue:u})(o.a.createElement(y.a,{placeholder:"\u70b9\u51fb\u4e8b\u4ef6\u540d\u79f0"}))),o.a.createElement(v.a.Item,Object.assign({key:"btnStyle-".concat(a),label:"\u6309\u94ae\u6837\u5f0f"},he),n.getFieldDecorator("btnStyle-".concat(a),{initialValue:m})(o.a.createElement(Fe,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),o.a.createElement(v.a.Item,Object.assign({key:"expandFlag-".concat(a),label:"\u6298\u53e0"},he),n.getFieldDecorator("expandFlag-".concat(a),{initialValue:s})(o.a.createElement(A.a,null,o.a.createElement(Ae,{value:"0"},"\u5426"),o.a.createElement(Ae,{value:"1"},"\u662f")))),"1"===n.getFieldValue("expandFlag-".concat(a))?o.a.createElement(v.a.Item,Object.assign({key:"expandCount-".concat(a),label:"\u6298\u53e0\u53ef\u89c1\u6570"},he),n.getFieldDecorator("expandCount-".concat(a),{initialValue:d})(o.a.createElement(y.a,{placeholder:"expandCount"}))):null)})),o.a.createElement(v.a.Item,{style:{textAlign:"center"}},o.a.createElement(C.a,{onClick:this.onDeleteComponent},"\u5220\u9664\u7ec4\u4ef6"))):null}},{key:"renderLinkage",value:function(e,t){var a=e.condition,n=e.linkName,r=this.props.form.getFieldDecorator;return o.a.createElement(l.Fragment,null,o.a.createElement(v.a.Item,Object.assign({},he,{label:"\u5173\u8054\u7ec4\u4ef6name"}),r("linkName",{initialValue:n})(o.a.createElement(A.a,null,t.map(function(t){var a=t.name,n=t.colIndex,l=t.label;return a&&n!==e.colIndex?o.a.createElement(Ae,{value:"".concat(a)},"".concat(a,"/").concat(l)):null})))),o.a.createElement(v.a.Item,Object.assign({},he,{label:"condition"}),r("condition",{initialValue:a})(o.a.createElement(y.a,null))))}},{key:"renderDatePickerExtra",value:function(e){var t=e.showTime,a=void 0!==t&&t,n=e.format,r=void 0===n?"YYYY-MM-DD":n,i=this.props.form.getFieldDecorator;return o.a.createElement(l.Fragment,null,o.a.createElement(v.a.Item,Object.assign({},he,{label:"showTime"}),i("showTime",{initialValue:"1"===a?"1":"0"})(o.a.createElement(A.a,null,o.a.createElement(Ae,{value:"1"},"\u662f"),o.a.createElement(Ae,{value:"0"},"\u5426")))),o.a.createElement(v.a.Item,Object.assign({},he,{label:"format"}),i("format",{initialValue:r})(o.a.createElement(y.a,null))))}},{key:"renderContent",value:function(){var e=this.state.deleteComponent,t=this.props,a=t.form,n=t.dropComponent,r=void 0!==n&&n,i=t.dropConfig,c=t.formItemArr,s=i.label,u=i.name,d=i.placeholder,m=i.type,p=i.linkage,b=a.getFieldDecorator;return r&&!e?"Btn"===m?this.renderBtnCard():o.a.createElement(l.Fragment,null,o.a.createElement(ne.a,null,"\u7ec4\u4ef6"),o.a.createElement(v.a.Item,Object.assign({},he,{label:"label"}),b("label",{initialValue:s})(o.a.createElement(y.a,null))),o.a.createElement(v.a.Item,Object.assign({},he,{label:"name"}),b("name",{initialValue:u})(o.a.createElement(y.a,null))),"DatePicker"===m||"RangePicker"===m?this.renderDatePickerExtra(i):null,"Radio"===m?this.rendeRadio():null,"Checkbox"===m?this.rendeCheckbox():null,"Select"===m?this.renderSelect():null,this.renderDefaultValueItem(),o.a.createElement(v.a.Item,Object.assign({},he,{label:"placeholder"}),b("placeholder",{initialValue:d})(o.a.createElement(y.a,null))),o.a.createElement(v.a.Item,Object.assign({},he,{label:"\u8054\u52a8\u5173\u8054"}),b("hasLinkage",{initialValue:p})(o.a.createElement(A.a,null,o.a.createElement(Ae,{value:"0"},"\u5426"),o.a.createElement(Ae,{value:"1"},"\u662f")))),"1"===a.getFieldValue("hasLinkage")?this.renderLinkage(i,c):null,o.a.createElement(v.a.Item,{style:{textAlign:"center"}},o.a.createElement(C.a,{onClick:this.onDeleteComponent},"\u5220\u9664\u7ec4\u4ef6"))):null}},{key:"renderCellStylesSetting",value:function(){var e=this,t=this.props.form,a=this.state.cellStyles;return o.a.createElement(Se.a,{title:"style\u8bbe\u7f6e",extra:o.a.createElement(B.a,{type:"plus-circle",onClick:this.onAddCellStyleItem})},a.map(function(a){var n=a.name,r=a.value,i=a.index;return o.a.createElement(l.Fragment,{key:"cell-styleitem-".concat(i)},o.a.createElement(v.a.Item,{key:"cell-styleitem-name-".concat(i),style:{width:"45%",display:"inline-block"}},t.getFieldDecorator("styleName-".concat(i),{initialValue:n})(o.a.createElement(y.a,{placeholder:"style name"}))),o.a.createElement(v.a.Item,{key:"cell-styleitem-value-".concat(i),style:{width:"45%",display:"inline-block",marginLeft:"10px"}},t.getFieldDecorator("styleValue-".concat(i),{initialValue:r})(o.a.createElement(y.a,{placeholder:"style value"}))),o.a.createElement(B.a,{type:"close-circle",style:{marginLeft:"6px",lineHeight:"39px"},onClick:function(){e.onDeleteCellStyleItem(i)}}))}))}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.visible,n=t.onClose,l=t.form,r=t.onDeleteFormItemContainer,i=t.dropConfig,c=t.colSpanArr,s=1,u=i.colSpan,d=0;d<c.length;d++)(u-=c[d].colSpan)>0?s++:d=c.length;var m=Oe(i.cellStyles);return o.a.createElement(fe.a,{visible:a,title:"\u7f16\u8f91\u8868\u5355\u9879",onClose:function(){e.onCloseEdit(),n()},width:420},o.a.createElement(v.a,{onSubmit:this.handleSubmit},o.a.createElement(ne.a,null,"\u5355\u5143\u683c"),o.a.createElement(v.a.Item,{style:{padding:"0 24px"},label:"style\u8bbe\u7f6e"},l.getFieldDecorator("cellStyles",{initialValue:m})(o.a.createElement(Fe,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),o.a.createElement(v.a.Item,{key:"cell-colSpan",label:"\u8de8\u5217\u8bbe\u7f6e",style:{padding:"0 24px"}},l.getFieldDecorator("originSpan",{initialValue:s})(o.a.createElement(A.a,null,c.map(function(e,t){return o.a.createElement(Ae,{key:"".concat(e,"-").concat(t),value:t+1},"".concat(t+1,"\u5217"))})))),o.a.createElement("div",{className:"btn-box"},o.a.createElement(C.a,{onClick:r},"\u5220\u9664\u5355\u5143\u683c")),this.renderContent(),o.a.createElement("div",{className:"btn-bottom-box"},o.a.createElement(C.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"))))}}]),t}(we),Ve=v.a.create()(Pe),Ne=(a(382),"form-drop-container"),Be=["Breadcrumb","Text","Tabs"],Le=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(u.a)(this,Object(d.a)(t).call(this,e));var n=e.configs.formItemArr.find(function(t){return t.colIndex===e.colIndex});return a.state={dropComponent:!!n,formItemConfig:Object.assign({},{colSpan:e.colSpan,colIndex:e.colIndex,originSpan:e.originSpan,cellStyles:e.cellStyles||{}},n||{}),visible:!1},a.onUpdateConfig=a.onUpdateConfig.bind(Object(p.a)(Object(p.a)(a))),a.onShowEditItem=a.onShowEditItem.bind(Object(p.a)(Object(p.a)(a))),a.onEditDropContainer=a.onEditDropContainer.bind(Object(p.a)(Object(p.a)(a))),a.onDrop=a.onDrop.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteCol=a.onDeleteCol.bind(Object(p.a)(Object(p.a)(a))),a.onClose=a.onClose.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.colSpan!==this.props.colSpan||e.colIndex!==this.props.colIndex){var t=Object.assign({},this.state.formItemConfig,{colSpan:e.colSpan,colIndex:e.colIndex,originSpan:e.originSpan,cellStyles:e.cellStyles});this.setState({formItemConfig:t})}}},{key:"onShowEditItem",value:function(){this.setState({visible:!0})}},{key:"onDrop",value:function(e){if(e.preventDefault(),e.target.className===Ne){this.resetBg();var t=JSON.parse(e.dataTransfer.getData("text/plain")).type;if(~Be.indexOf(t))return void se.a.warn("\u5f53\u524d\u5bb9\u5668\u4e0d\u652f\u6301\u62d6\u62fd\u7684\u7ec4\u4ef6!");var a=this.props,n=a.colIndex,l=a.onUpdateConfigs,o={type:t,colSpan:this.props.colSpan,originSpan:this.props.originSpan,cellStyles:this.props.cellStyles,label:t,name:"name-".concat(n),colIndex:n};"Button"===t&&(delete o.label,delete o.name,o.type="Btn",o.btnArr=[{btnText:"button",type:"primary",index:0}]),this.setState({formItemConfig:o,dropComponent:!0},function(){l(o)})}}},{key:"onDeleteCol",value:function(e){e&&e.stopPropagation();var t=this.props,a=t.onUpdateConfigs,n=t.colIndex,l=this.state.formItemConfig;this.setState({formItemConfig:{colSpan:l.colSpan,originSpan:l.originSpan,colIndex:n},dropComponent:!1}),a({colIndex:n,deleteFlag:!0})}},{key:"resetBg",value:function(){var e=document.querySelectorAll(".".concat(Ne));e&&e.forEach(function(e){e.style.background=""})}},{key:"onDragenter",value:function(e){e.target.className===Ne&&(e.target.style.background="#dde7f1")}},{key:"onDragLeave",value:function(e){e.target.className===Ne&&(e.target.style.background="")}},{key:"componentWillUnmount",value:function(){this.targetDom&&(this.targetDom.removeEventListener("drop",this.onDrop),this.targetDom.removeEventListener("dragleave",this.onDragLeave),this.targetDom.removeEventListener("dragenter",this.onDragenter))}},{key:"componentDidMount",value:function(){this.targetDom&&(this.targetDom.addEventListener("drop",this.onDrop,!1),this.targetDom.addEventListener("dragleave",this.onDragLeave,!1),this.targetDom.addEventListener("dragenter",this.onDragenter,!1))}},{key:"onUpdateConfig",value:function(e){var t=this,a=this.state.formItemConfig,n=null;n=e.deleteFlag?{colIndex:e.colIndex,colSpan:e.colSpan,originSpan:e.originSpan,cellStyles:e.cellStyles}:Object.assign({},a,e),this.setState({formItemConfig:n,dropComponent:!e.deleteFlag},function(){(0,t.props.onUpdateConfigs)(n),t.onClose()})}},{key:"onEditDropContainer",value:function(e){e.target.className===Ne&&(e&&e.stopPropagation(),this.setState({visible:!0}))}},{key:"onClose",value:function(){this.setState({visible:!1})}},{key:"getContainerWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return"".concat(100*e/24,"%")}},{key:"render",value:function(){var e=this,t=this.state,a=t.dropComponent,n=t.formItemConfig,l=void 0===n?{}:n,r=t.visible,i=this.props,c=i.layoutColumn,s=i.onDeleteFormItemContainer,u=i.colIndex,d=i.configs,m=+u,p=Object.hasOwnProperty.call(l,"colSpan")?l.colSpan:24/c;return o.a.createElement("div",{className:Ne,style:{width:this.getContainerWidth(p,c)},ref:function(t){e.targetDom=t}},a?o.a.createElement(je,Object.assign({},this.props,{formItemConfig:l})):null,o.a.createElement(B.a,{type:"bars",className:"icon-operation",onClick:this.onShowEditItem}),o.a.createElement(Ve,{visible:r,onDelete:this.onDeleteCol,onUpdateConfigs:this.onUpdateConfig,colSpanArr:d.colSpanArr,formItemArr:d.formItemArr,dropConfig:l,dropComponent:a,layoutColumn:c,onDeleteFormItemContainer:function(){e.setState({visible:!1},function(){s(m)})},onClose:this.onClose}))}}]),t}(l.PureComponent),Me=(a(383),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1,expand:!1,configs:{layoutColumn:1,formItemArr:[]}},a.onShowEditForm=a.onShowEditForm.bind(Object(p.a)(Object(p.a)(a))),a.onCloseEditForm=a.onCloseEditForm.bind(Object(p.a)(Object(p.a)(a))),a.renderFormItemContainer=a.renderFormItemContainer.bind(Object(p.a)(Object(p.a)(a))),a.onAddRow=a.onAddRow.bind(Object(p.a)(Object(p.a)(a))),a.onAddRowCell=a.onAddRowCell.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteRow=a.onDeleteRow.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteContainer=a.onDeleteContainer.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteFormItemContainer=a.onDeleteFormItemContainer.bind(Object(p.a)(Object(p.a)(a))),a.onUpdateConfigs=a.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(a))),a.onCollapse=a.onCollapse.bind(Object(p.a)(Object(p.a)(a))),a.colIndexStart=0,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onShowEditForm",value:function(){this.setState({visible:!0,expand:!1})}},{key:"onCollapse",value:function(){var e=this.state.expand;this.setState({expand:!e})}},{key:"addNewFormItem",value:function(e,t,a){if(e.length<t)for(var n=e.length;n<t;n++)e.push({colIndex:this.colIndexStart+n,colSpan:a[n],originSpan:1});return e}},{key:"onCloseEditForm",value:function(e){var t={visible:!1},a=e.layoutColumn,n=e.colSpanArr,l=+a;if(l){var o=this.state.configs.formItemArr.slice(),r=this.addNewFormItem(o,l,n);r.forEach(function(e){e.colSpan=xe(e.colIndex,e.originSpan,r,n)}),this.colIndexStart+=l,e.layoutColumn=l,e.formItemArr=r,t.configs=e}this.setState(Object(j.a)({},t))}},{key:"onAddRowCell",value:function(){var e=this,t=this.state.configs,a=t.colSpanArr,n=t.formItemArr.slice();if(0!==n.length){for(var l=n.reduce(function(e,t,a){return e+=t.colSpan,a===n.length-1&&(e%=24),e},0),o=0,r=0,i=0;i<a.length;i++)(r+=+a[i])>l&&(o=i,i=a.length);n.push({colIndex:this.colIndexStart,originSpan:1,colSpan:a[o]}),this.colIndexStart+=1;var c=Object.assign({},t);c.formItemArr=n,this.setState({configs:c},function(){var t=e.props;(0,t.onUpdateLayoutConfig)({layoutIndex:t.layoutIndex,configs:c})})}else se.a.warn("\u8bf7\u8bbe\u7f6e\u5bb9\u5668\u5217\u6570")}},{key:"onAddRow",value:function(){var e=this,t=this.state.configs,a=t.formItemArr.slice();if(0!==a.length){for(var n=t.layoutColumn,l=0;l<n;l++)a.push({colIndex:this.colIndexStart+l});this.colIndexStart+=n;var o=Object.assign({},t);o.formItemArr=a,this.setState({configs:o},function(){var t=e.props;(0,t.onUpdateLayoutConfig)({layoutIndex:t.layoutIndex,configs:o})})}else se.a.warn("\u8bf7\u8bbe\u7f6e\u5bb9\u5668\u5217\u6570")}},{key:"onDeleteRow",value:function(){var e=this,t=this.state.configs,a=t.layoutColumn,n=t.formItemArr,l=Object.assign({},t),o=n.slice();o.length<=a?se.a.warn("\u4e0d\u80fd\u518d\u5220\u9664\u4e86"):(o.length=Math.max(0,o.length-a),l.formItemArr=o,this.setState({configs:l},function(){var t=e.props;(0,t.onUpdateLayoutConfig)({layoutIndex:t.layoutIndex,newConfigs:l})}))}},{key:"onDeleteContainer",value:function(){var e=this.props;(0,e.onUpdateLayoutConfig)({layoutIndex:e.layoutIndex,deleteFlag:!0})}},{key:"onDeleteFormItemContainer",value:function(e){var t=this,a=this.state.configs,n=a.formItemArr,l=Object.assign({},a),o=n.filter(function(t){return t.colIndex!==e});l.formItemArr=o,this.setState({configs:l},function(){var e=t.props;(0,e.onUpdateLayoutConfig)({layoutIndex:e.layoutIndex,configs:l})})}},{key:"onUpdateConfigs",value:function(e){var t=e.deleteFlag,a=void 0!==t&&t,n=Object(x.a)(e,["deleteFlag"]),l=this.state.configs,o=l.formItemArr,r=l.colSpanArr,i=Object.assign({},l),c=this.props,s=c.onUpdateLayoutConfig,u=c.layoutIndex,d=o.reduce(function(e,t){return a?n.colIndex!==t.colIndex?e.push(Object.assign({},t)):e.push({colIndex:n.colIndex,colSpan:n.colSpan,originSpan:n.originSpan}):n.colIndex===t.colIndex?e.push(Object.assign({},t,n)):e.push(Object.assign({},t)),e},[]);d.forEach(function(e){e.colIndex>n.colIndex&&(e.colSpan=xe(e.colIndex,e.originSpan,d,r))});var m={};if("Btn"===n.type){var p=n.btnArr.find(function(e){return"1"===e.expandFlag});m.expandCount=p?+p.expandCount:0}i.formItemArr=d,m.configs=i,this.setState(Object(j.a)({},m),function(){s({layoutIndex:u,configs:i})})}},{key:"renderFormItemContainer",value:function(){var e=this,t=this.state,a=t.configs,n=t.expand,l=t.expandCount,r=a.formItemArr,i=a.layoutColumn;return r.map(function(t,a){var r=t.colIndex,c=t.colSpan,s=t.originSpan,u=t.cellStyles,d=t.type;return l>0&&!n&&a+1>l&&"Btn"!==d?null:o.a.createElement(Le,Object.assign({key:"ed-".concat(r),colIndex:r},e.props,{colSpan:c,expand:n,originSpan:s,layoutColumn:i,cellStyles:u,onCollapse:e.onCollapse,onDeleteFormItemContainer:e.onDeleteFormItemContainer,onUpdateConfigs:e.onUpdateConfigs}))})}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.configs,r=this.props,i=r.layoutIndex,c=r.onUpdateLayoutConfig,s=n.layoutColumn,u=n.formItemArr;return o.a.createElement(l.Fragment,null,o.a.createElement("div",{className:"form-container container"},o.a.createElement("div",{className:"inner-box"},o.a.createElement(v.a,null,o.a.createElement(k.a,{gutter:{md:24/s,lg:24,xl:48}},this.renderFormItemContainer())),u.length>0?o.a.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},o.a.createElement(C.a,{onClick:this.onAddRowCell},"\u65b0\u589e\u5355\u5143\u683c")):null),o.a.createElement(B.a,{type:"form",className:"icon-operation",onClick:this.onShowEditForm})),o.a.createElement(ye,{visible:a,onDeleteContainer:this.onDeleteContainer,onClose:function(t){var a=t.layoutColumn;(e.onCloseEditForm(t),a)&&c({layoutIndex:i,configs:t})}}))}}]),t}(l.PureComponent)),Ue=v.a.create()(Me),Re=a(196),ze=a(109),_e=function(e){var t=e.hasOperation,a=e.operationArr,n=void 0===a?[]:a,r=e.columns.slice();return r.length>0&&"\u64cd\u4f5c"===r[r.length-1].title&&r.pop(),"1"===t&&r.push({title:"\u64cd\u4f5c",render:function(){return Array.isArray(n)?n.length>2?o.a.createElement("span",null,function(e){var t,a=Object(Re.a)(e),n=a[0],r=a.slice(1);return o.a.createElement(l.Fragment,null,o.a.createElement("a",{href:"\xa0"},n.opText),o.a.createElement(ne.a,{type:"vertical"}),o.a.createElement(ze.a,{overlay:(t=r,o.a.createElement("span",{style:{background:"#fff",display:"block"}},t.map(function(e){var t=e.opText,a=e.index;return o.a.createElement("a",{href:"\xa0",key:"op-".concat(a),style:{display:"block"}},t)})))},o.a.createElement("a",{className:"ant-dropdown-link",href:"\xa0"},"\u66f4\u591a",o.a.createElement(B.a,{type:"down"}))))}(n)):o.a.createElement("span",null,function(e){var t=[];return e.forEach(function(a,n){var r=a.opText,i=a.index;t.push(o.a.createElement(l.Fragment,{key:"fr-".concat(i)},o.a.createElement("a",{href:"\xa0",key:"op-".concat(i)},r),n!==e.length-1?o.a.createElement(ne.a,{type:"vertical"}):null))}),t}(n)):null}}),e.columns=r,e},He=(a(384),ke.a.Panel),Ye=A.a.Option,qe={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:14}}},We={0:!1,1:!0},Je=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={configs:e.configs},a.setColumnMaxIndex(e),a.onSubmit=a.onSubmit.bind(Object(p.a)(Object(p.a)(a))),a.onAddOperation=a.onAddOperation.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteOperation=a.onDeleteOperation.bind(Object(p.a)(Object(p.a)(a))),a.onAddColumn=a.onAddColumn.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteColumn=a.onDeleteColumn.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.visible!==this.props.visible&&e.visible&&(this.setState({configs:e.configs}),this.setColumnMaxIndex(e),this.setOperationMaxIndex(e))}},{key:"setColumnMaxIndex",value:function(e){var t=e.configs.columns,a=void 0===t?[]:t;this.columnMaxIndex=a.length||0}},{key:"setOperationMaxIndex",value:function(e){var t=e.configs.operationArr,a=void 0===t?[]:t;this.operationMaxIndex=a.length||0}},{key:"addColumnMaxIndex",value:function(){this.columnMaxIndex+=1}},{key:"addOperationMaxIndex",value:function(){this.operationMaxIndex+=1}},{key:"onAddOperation",value:function(){var e=this.state.configs.operationArr,t=(void 0===e?[]:e).slice(),a=this.operationMaxIndex;t.push({opText:"\u64cd\u4f5c",index:a}),this.setState({configs:this.getNewConfigs("operationArr",t)}),this.addOperationMaxIndex()}},{key:"onAddColumn",value:function(){var e=this.state.configs.columns.slice(),t=this.columnMaxIndex;e.push({title:"column".concat(t),dataIndex:"dataIndex".concat(t),index:t}),this.setState({configs:this.getNewConfigs("columns",e)}),this.addColumnMaxIndex()}},{key:"onDeleteOperation",value:function(e){var t=this.state.configs,a=t.operationArr.reduce(function(t,a){return a.index!==e&&t.push(Object.assign({},a)),t},[]);Object.assign({},t).operationArr=a,this.setState({configs:this.getNewConfigs("operationArr",a)})}},{key:"onDeleteColumn",value:function(e){var t=this.state.configs,a=t.columns.reduce(function(t,a){return a.index!==e&&t.push(Object.assign({},a)),t},[]);Object.assign({},t).columns=a,this.setState({configs:this.getNewConfigs("columns",a)})}},{key:"getNewConfigs",value:function(e,t){var a=this.state.configs,n=Object.assign({},a);return n[e]=t,n}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){if(!e){var n={},l=t.state.configs;if("1"===a.hasOperation){for(var o=l.operationArr,r=[],i=0;i<o.length;i++){var c=o[i].index,s=a["opText-".concat(c)],u=a["opType-".concat(c)];r.push({opText:s,opType:u,index:i}),delete a[s],delete a[u]}n.operationArr=r}var d=l.columns.slice();Object.keys(a).forEach(function(e){var t=a[e];if(e.indexOf("-")>0){var l=e.split("-"),o=Object(Ce.a)(l,2),r=o[0],i=o[1],c=d.find(function(e){return e.index===+i});c&&(c[r]=t,"width"!==r||t||delete c.width,"fixed"===r&&(c[r]=We[t]))}else"pagination"===e?"1"===t?n.pagination={pageSize:a.pageSize,pageSizeOptions:a.pageSizeOptions.split(",")}:n[e]=We[t]:"rowSelection"===e?"1"===t?(n.rowSelection={type:a.type},"radio"===a.type&&(n.rowSelection.columnTitle=a.columnTitle)):n[e]=null:n[e]=t}),delete n.pageSize,delete n.pageSizeOptions,delete n.type,delete n.columnTitle,n.columns=d,_e(n),t.props.onUpdateConfigs(n)}})}},{key:"renderPanelHeader",value:function(e){var t=this,a=e.title,n=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},a),o.a.createElement(B.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteColumn(n)}}))}},{key:"renderOperationHeader",value:function(e){var t=this,a=e.opText,n=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},a),o.a.createElement(B.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteOperation(n)}}))}},{key:"renderCollapse",value:function(){var e=this,t=this.props.form,a=this.state.configs.columns,n=void 0===a?[]:a,l=t.getFieldDecorator;return o.a.createElement(ke.a,null,n.map(function(t,a){var r=t.title,i=t.index,c=t.dataIndex,s=t.width,u=t.align,d=void 0===u?"left":u,m=t.fixed,p=void 0!==m&&m;return"\u64cd\u4f5c"===r&&a===n.length-1?null:o.a.createElement(He,{header:e.renderPanelHeader(t),key:"".concat(r,"-").concat(i)},o.a.createElement(v.a.Item,Object.assign({label:"title"},he),l("title-".concat(i),{rules:[{required:!0,message:"\u8bf7\u8f93\u5165title!"}],initialValue:r})(o.a.createElement(y.a,null))),o.a.createElement(v.a.Item,Object.assign({label:"dataIndex"},he),l("dataIndex-".concat(i),{rules:[{required:!0,message:"dataIndex!"}],initialValue:c})(o.a.createElement(y.a,null))),o.a.createElement(v.a.Item,Object.assign({label:"width"},he),l("width-".concat(i),{initialValue:s||""},{rules:[{pattern:/^\d+(%)?$/,message:"\u8bf7\u8f93\u5165\u6570\u5b57\u6216\u8005\u767e\u5206\u6bd4!"}]})(o.a.createElement(y.a,null))),o.a.createElement(v.a.Item,Object.assign({label:"align"},he),l("align-".concat(i),{initialValue:d})(o.a.createElement(A.a,null,o.a.createElement(Ye,{value:"left"},"left"),o.a.createElement(Ye,{value:"right"},"right"),o.a.createElement(Ye,{value:"center"},"center")))),o.a.createElement(v.a.Item,Object.assign({label:"fixed"},he),l("fixed-".concat(i),{initialValue:p?"1":"0"})(o.a.createElement(A.a,null,o.a.createElement(Ye,{value:"0"},"false"),o.a.createElement(Ye,{value:"1"},"true")))))}))}},{key:"renderTableProps",value:function(){var e=this,t=this.props.form,a=this.state.configs,n=t.getFieldDecorator,r=a.operationArr,i=void 0===r?[]:r,c=a.pagination,s=a.rowSelection,u=a.hasOperation,d=void 0===u?"0":u,m=a.mockData,p=void 0===m?0:m,b=c||{},f=b.pageSize,h=void 0===f?10:f,g=b.pageSizeOptions,E=void 0===g?"10,20,30":g,O=s||{},x=O.type,j=void 0===x?"checkbox":x,k=O.columnTitle,S=void 0===k?"\u9009\u62e9":k,I=Object.keys(c||{}).length>0?"1":"0",D=Object.keys(s||{}).length>0?"1":"0";return o.a.createElement(l.Fragment,null,o.a.createElement(v.a.Item,Object.assign({label:"\u64cd\u4f5c\u5217"},he),n("hasOperation",{initialValue:d})(o.a.createElement(A.a,null,o.a.createElement(Ye,{value:"0"},"\u65e0"),o.a.createElement(Ye,{value:"1"},"\u6709")))),"1"===t.getFieldValue("hasOperation")?[o.a.createElement(ke.a,{key:"op-collapse"},i.map(function(t){var a=t.index,l=t.opText,r=t.opType;return o.a.createElement(He,{header:e.renderOperationHeader(t),key:"op-".concat(a)},o.a.createElement(v.a.Item,Object.assign({label:"\u6587\u5b57"},he),n("opText-".concat(a),{initialValue:l})(o.a.createElement(y.a,null))),o.a.createElement(v.a.Item,Object.assign({label:"\u7c7b\u578b"},he),n("opType-".concat(a),{initialValue:r})(o.a.createElement(A.a,null,o.a.createElement(Ye,{value:"edit"},"\u7f16\u8f91"),o.a.createElement(Ye,{value:"view"},"\u67e5\u770b"),o.a.createElement(Ye,{value:"delete"},"\u5220\u9664"),o.a.createElement(Ye,{value:"other"},"\u5176\u4ed6")))))})),o.a.createElement(l.Fragment,{key:"op-collapse-btns"},"1"===t.getFieldValue("hasOperation")?o.a.createElement("div",{className:"btn-add-box"},o.a.createElement(C.a,{type:"dashed",size:"large",onClick:this.onAddOperation},"\u6dfb\u52a0\u64cd\u4f5c\u9879")):null)]:null,o.a.createElement(v.a.Item,Object.assign({label:"pagination"},he),n("pagination",{initialValue:I})(o.a.createElement(A.a,null,o.a.createElement(Ye,{value:"0"},"false"),o.a.createElement(Ye,{value:"1"},"true")))),"1"===t.getFieldValue("pagination")?o.a.createElement(Se.a,{title:"pagination\u914d\u7f6e"},o.a.createElement(v.a.Item,Object.assign({label:"pageSize"},he),n("pageSize",{initialValue:h})(o.a.createElement(y.a,null))),o.a.createElement(v.a.Item,Object.assign({label:"pageSizeOptions"},qe),n("pageSizeOptions",{initialValue:Array.isArray(E)?E.join(","):E})(o.a.createElement(A.a,null,o.a.createElement(Ye,{value:"10,20,30"},"10,20,30"),o.a.createElement(Ye,{value:"10,20,30,40"},"10,20,30,40"),o.a.createElement(Ye,{value:"20,30,40"},"20,30,40"))))):null,o.a.createElement(v.a.Item,Object.assign({label:"rowSelection"},he),n("rowSelection",{initialValue:D})(o.a.createElement(A.a,null,o.a.createElement(Ye,{value:"0"},"false"),o.a.createElement(Ye,{value:"1"},"true")))),"1"===t.getFieldValue("rowSelection")?o.a.createElement(Se.a,{title:"rowSelection\u914d\u7f6e"},o.a.createElement(v.a.Item,Object.assign({label:"type"},he),n("type",{initialValue:j})(o.a.createElement(A.a,null,o.a.createElement(Ye,{value:"checkbox"},"checkbox"),o.a.createElement(Ye,{value:"radio"},"radio")))),"radio"===t.getFieldValue("type")?o.a.createElement(v.a.Item,Object.assign({label:"columnTitle"},he),n("columnTitle",{initialValue:S})(o.a.createElement(y.a,null))):null):null,o.a.createElement(v.a.Item,Object.assign({label:"\u6a21\u62df\u6570\u636e"},he),n("mockData",{initialValue:p})(o.a.createElement(y.a,{placeholder:"\u8bf7\u8f93\u5165\u6570\u636e\u6761\u6570"}))))}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onClose,n=e.onDeleteContainer;return o.a.createElement(fe.a,{title:"\u8868\u683c\u7f16\u8f91",width:420,onClose:a,visible:t},o.a.createElement(v.a,{onSubmit:this.onSubmit},o.a.createElement(ne.a,null,"\u8868\u5934"),this.renderCollapse(),o.a.createElement("div",{className:"btn-add-box"},o.a.createElement(C.a,{type:"dashed",size:"large",onClick:this.onAddColumn},"\u6dfb\u52a0\u8868\u5934\u5217")),o.a.createElement(ne.a,null,"\u8868\u683c\u5c5e\u6027"),this.renderTableProps(),o.a.createElement(v.a.Item,{style:{marginTop:"20px",textAlign:"center"}},o.a.createElement(C.a,{type:"primary",htmlType:"submit",style:{marginRight:"10px"}},"\u786e\u5b9a"),o.a.createElement(C.a,{onClick:n},"\u5220\u9664\u5bb9\u5668"))))}}]),t}(l.PureComponent),Ke=v.a.create()(Je),Ge=(a(385),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1},a.onShowEditTable=a.onShowEditTable.bind(Object(p.a)(Object(p.a)(a))),a.onClose=a.onClose.bind(Object(p.a)(Object(p.a)(a))),a.onUpdateConfigs=a.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteContainer=a.onDeleteContainer.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onShowEditTable",value:function(){this.setState({visible:!0})}},{key:"onClose",value:function(e){e.stopPropagation(),this.setState({visible:!1})}},{key:"onUpdateConfigs",value:function(e){var t=this.props,a=t.layoutIndex;(0,t.onUpdateLayoutConfig)({layoutIndex:a,configs:e}),this.setState({visible:!1})}},{key:"onDeleteContainer",value:function(){var e=this.props,t=e.layoutIndex;(0,e.onUpdateLayoutConfig)({layoutIndex:t,deleteFlag:!0})}},{key:"getMockDataSource",value:function(e,t){for(var a=[],n=function(t){var n={};e.forEach(function(e){Object.keys(e).forEach(function(a){n[e.dataIndex]="".concat(e.dataIndex,"-").concat(t)})}),a.push(n)},l=0;l<t;l++)n(l);return a}},{key:"render",value:function(){var e=this.state.visible,t=this.props.configs,a=void 0===t?{}:t,n=a.pagination,l=void 0!==n&&n,r=a.rowSelection,i=void 0===r?null:r,c=a.columns,s=a.mockData,u=c.slice(),d=/^\d+$/.test(s)?+s:0;return o.a.createElement("div",{className:"table-container container"},o.a.createElement(I.a,{columns:u,bordered:!0,dataSource:this.getMockDataSource(c,d),pagination:l,rowSelection:i,onClick:this.onShowEditTable}),o.a.createElement(Ke,{visible:e,configs:a,onClose:this.onClose,onDeleteContainer:this.onDeleteContainer,onUpdateConfigs:this.onUpdateConfigs}),o.a.createElement(B.a,{type:"form",className:"icon-operation",onClick:this.onShowEditTable}))}}]),t}(l.PureComponent)),$e=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.dropConfig,t=void 0===e?{}:e,a=t.cellStyles;return o.a.createElement("div",{style:a},Q(t))}}]),t}(l.PureComponent),Qe=(a(386),ke.a.Panel),Ze=A.a.Option,Xe=y.a.TextArea,et=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getItemSetType",value:function(){return["Tabs","Breadcrumb","Btn"]}},{key:"renderBtnCard",value:function(){var e=this,t=this.props,a=t.dropConfig,n=t.form,l=a.type,r=this.state.btnArr;return"Btn"===l?o.a.createElement(Se.a,{title:"\u6309\u94ae\u533a\u57df",extra:o.a.createElement(B.a,{type:"plus-circle",onClick:this.onAddButton})},o.a.createElement(ke.a,null,Array.isArray(r)?r.map(function(t){var a=t.index,l=t.btnText,r=t.type,i=t.htmlType,c=void 0===i?"button":i,s=t.onClick,u=t.btnStyle;return o.a.createElement(Qe,{header:e.renderBtnPanelHeader(t),key:"btn-".concat(a)},o.a.createElement(v.a.Item,Object.assign({key:"btnText-".concat(a),label:"\u6309\u94ae\u6587\u5b57"},he),n.getFieldDecorator("btnText-".concat(a),{initialValue:l})(o.a.createElement(y.a,{placeholder:"btnText"}))),o.a.createElement(v.a.Item,Object.assign({key:"type-".concat(a),label:"type"},he),n.getFieldDecorator("type-".concat(a),{initialValue:r})(o.a.createElement(A.a,null,o.a.createElement(Ze,{value:"primary"},"primary"),o.a.createElement(Ze,{value:"dashed"},"dashed"),o.a.createElement(Ze,{value:"danger"},"danger"),o.a.createElement(Ze,{value:""},"none")))),o.a.createElement(v.a.Item,Object.assign({key:"htmlType-".concat(a),label:"htmlType"},he),n.getFieldDecorator("htmlType-".concat(a),{initialValue:c})(o.a.createElement(A.a,null,o.a.createElement(Ze,{value:"submit"},"submit"),o.a.createElement(Ze,{value:"reset"},"reset"),o.a.createElement(Ze,{value:"button"},"button")))),o.a.createElement(v.a.Item,Object.assign({key:"onClick-".concat(a),label:"onClick"},he),n.getFieldDecorator("onClick-".concat(a),{initialValue:s})(o.a.createElement(y.a,{placeholder:"\u70b9\u51fb\u4e8b\u4ef6\u540d\u79f0"}))),o.a.createElement(v.a.Item,Object.assign({key:"btnStyle-".concat(a),label:"\u6309\u94ae\u6837\u5f0f"},he),n.getFieldDecorator("btnStyle-".concat(a),{initialValue:u})(o.a.createElement(Xe,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))))}):null)):null}},{key:"renderContent",value:function(){var e=this.props,t=e.form,a=e.dropConfig,n=a.placeholder,r=a.type,i=t.getFieldDecorator;return this.state.deleteComponent?null:"Btn"===r?this.renderBtnCard():"Breadcrumb"===r?this.renderBreadcrumb():"Tabs"===r?this.renderTabs():o.a.createElement(l.Fragment,null,this.renderDefaultValueItem(),"Text"!==r&&"Breadcrumb"!==r?o.a.createElement(v.a.Item,Object.assign({},he,{label:"placeholder"}),i("placeholder",{initialValue:n})(o.a.createElement(y.a,null))):null)}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onClose,l=t.form,r=t.dropConfig,i=Oe(r.cellStyles);return o.a.createElement(fe.a,{visible:a,title:"\u7f16\u8f91\u7ec4\u4ef6",onClose:function(){e.onCloseEdit(),n()},width:420},o.a.createElement(v.a,{onSubmit:this.handleSubmit},o.a.createElement(v.a.Item,Object.assign({label:"style\u8bbe\u7f6e"},he),l.getFieldDecorator("cellStyles",{initialValue:i})(o.a.createElement(Xe,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),this.renderContent(),o.a.createElement("div",{className:"btn-box"},o.a.createElement(C.a,{onClick:this.onDeleteComponent},"\u5220\u9664\u7ec4\u4ef6")),o.a.createElement("div",{className:"btn-bottom-box"},o.a.createElement(C.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"))))}}]),t}(we),tt=v.a.create()(et),at=(a(387),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={dropConfig:{},showEdit:!1,dropComponent:!1},a.onUpdateConfigs=a.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(a))),a.onToggleEdit=a.onToggleEdit.bind(Object(p.a)(Object(p.a)(a))),a.onDrop=a.onDrop.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.DropDom&&(this.DropDom.addEventListener("drop",this.onDrop,!1),this.DropDom.addEventListener("dragleave",this.onDragLeave,!1),this.DropDom.addEventListener("dragenter",this.onDragenter,!1))}},{key:"componentWillUnmount",value:function(){this.DropDom&&(this.DropDom.removeEventListener("drop",this.onDrop),this.DropDom.removeEventListener("dragleave",this.onDragLeave),this.DropDom.removeEventListener("dragenter",this.onDragenter))}},{key:"onToggleEdit",value:function(){this.setState({showEdit:!this.state.showEdit})}},{key:"onUpdateConfigs",value:function(e){var t=e.deleteFlag,a=void 0!==t&&t,n=Object(x.a)(e,["deleteFlag"]),l=this.props.onUpdateConfigs,o={dropConfig:n};a&&(o.dropConfig={dropIndex:n.dropIndex},o.dropComponent=!1),this.setState(Object(j.a)({},o)),n.deleteFlag=a,l(n),this.onToggleEdit()}},{key:"onDrop",value:function(e){e.preventDefault();var t=this.props.allowDropType,a=void 0===t?[]:t;if("drop-container"===e.target.className){this.resetBg();var n=JSON.parse(e.dataTransfer.getData("text/plain")).type;if(!~a.indexOf(n))return void se.a.warn("\u5f53\u524d\u5bb9\u5668\u4e0d\u652f\u6301\u62d6\u62fd\u7684\u7ec4\u4ef6!");var l=this.props,o=l.dropIndex,r=l.onUpdateConfigs,i={type:n,dropIndex:o};"Text"===n&&(i.text="Text"),"Breadcrumb"===n&&(i.breadcrumbArr=[{index:0,label:"menu1",value:""},{index:1,label:"menu2",value:""}]),"Button"===n&&(i.type="Btn",i.btnArr=[{btnText:"button",type:"primary",index:0}]),"Tabs"===n&&(i.tabsArr=[{label:"tab1",value:"tab1",index:0}]),this.setState({dropConfig:i,dropComponent:!0},function(){r(i)})}}},{key:"resetBg",value:function(){var e=document.querySelectorAll(".".concat("drop-container"));e&&e.forEach(function(e){e.style.background=""})}},{key:"onDragenter",value:function(e){"drop-container"===e.target.className&&(e.target.style.background="#dde7f1")}},{key:"onDragLeave",value:function(e){"drop-container"===e.target.className&&(e.target.style.background="")}},{key:"render",value:function(){var e=this,t=this.state,a=t.dropComponent,n=t.dropConfig,r=t.showEdit;return o.a.createElement("div",{className:"drop-container",ref:function(t){e.DropDom=t}},a?o.a.createElement(l.Fragment,null,o.a.createElement($e,Object.assign({},this.props,{dropConfig:n})),o.a.createElement(B.a,{type:"bars",className:"icon-operation",onClick:this.onToggleEdit})):null,o.a.createElement(tt,{visible:r,dropConfig:n,inForm:!1,onClose:this.onToggleEdit,onUpdateConfigs:this.onUpdateConfigs}))}}]),t}(l.PureComponent)),nt=(a(388),y.a.TextArea),lt=A.a.Option,ot=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.form,n=t.onClose;a.validateFields(function(e,t){if(!e){var a=t.layoutColumn,l=t.boxStyles,o={layoutColumn:a,boxStyles:Ee(l)};n(o)}})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.form,n=e.onClose,l=e.configs,r=void 0===l?{}:l,i=e.onDeleteContainer,c=r.boxStyles,s=void 0===c?{}:c,u=r.layoutColumn,d=void 0===u?3:u,m=Oe(s),p=a.getFieldDecorator;return o.a.createElement(fe.a,{visible:t,width:420,title:"\u7f16\u8f91\u5217",onClose:function(){n(0)}},o.a.createElement(v.a,{onSubmit:this.handleSubmit,style:{padding:"0 20px"}},o.a.createElement(v.a.Item,Object.assign({label:"style\u8bbe\u7f6e"},he),a.getFieldDecorator("boxStyles",{initialValue:m})(o.a.createElement(nt,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),o.a.createElement(v.a.Item,Object.assign({label:"\u5bb9\u5668\u5217"},he),p("layoutColumn",{initialValue:d,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5217\u6570!"}]})(o.a.createElement(A.a,null,o.a.createElement(lt,{value:"1"},"1"),o.a.createElement(lt,{value:"2"},"2"),o.a.createElement(lt,{value:"3"},"3"),o.a.createElement(lt,{value:"4"},"4"),o.a.createElement(lt,{value:"5"},"5"),o.a.createElement(lt,{value:"6"},"6"),o.a.createElement(lt,{value:"7"},"7"),o.a.createElement(lt,{value:"8"},"8")))),o.a.createElement("div",{className:"tips-box"},o.a.createElement(B.a,{type:"info-circle"}),"box\u5bb9\u5668\u53ea\u80fd\u5b58\u653eText,Tabs,Button\u53caBreadcrumb\u7ec4\u4ef6."),o.a.createElement("div",{className:"btn-box"},o.a.createElement(C.a,{type:"primary",htmlType:"submit",style:{marginRight:"10px"}},"\u786e\u5b9a"),o.a.createElement(C.a,{onClick:i},"\u5220\u9664\u5bb9\u5668"))))}}]),t}(l.Component),rt=v.a.create()(ot),it=(a(389),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1,configs:{cellsArr:[],layoutColumn:0}},a.onToggleEdit=a.onToggleEdit.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteContainer=a.onDeleteContainer.bind(Object(p.a)(Object(p.a)(a))),a.onUpdateConfigs=a.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onToggleEdit",value:function(){this.setState({visible:!this.state.visible})}},{key:"onDeleteContainer",value:function(){var e=this.props;(0,e.onUpdateLayoutConfig)({layoutIndex:e.layoutIndex,deleteFlag:!0}),this.onToggleEdit()}},{key:"onUpdateConfigs",value:function(e){var t=e.deleteFlag,a=void 0!==t&&t,n=Object(x.a)(e,["deleteFlag"]),l=this.state.configs,o=Object.assign({},l),r=this.props,i=r.onUpdateLayoutConfig,c=r.layoutIndex,s=o.cellsArr.reduce(function(e,t){return a?n.dropIndex!==t.dropIndex?e.push(Object.assign({},t)):e.push({dropIndex:n.dropIndex}):n.dropIndex===t.dropIndex?e.push(Object.assign({},t,n)):e.push(Object.assign({},t)),e},[]);o.cellsArr=s,this.setState({configs:o},function(){i({layoutIndex:c,configs:o})})}},{key:"rendeCell",value:function(e){if(!e)return null;for(var t=[],a="".concat(100/e,"%"),n=0;n<e;n++)t.push(o.a.createElement("div",{className:"cell",key:"cell-".concat(e,"-").concat(n),style:{width:a}},o.a.createElement(at,{dropIndex:n,allowDropType:["Text","Breadcrumb","Button","Tabs"],onUpdateConfigs:this.onUpdateConfigs})));return t}},{key:"render",value:function(){var e=this,t=this.state.visible,a=this.props,n=a.onUpdateLayoutConfig,l=a.layoutIndex,r=a.configs,i=r.layoutColumn,c=void 0===i?0:i,s=r.boxStyles;return o.a.createElement("div",{className:"fulu-cell-box preview-mode",style:s},this.rendeCell(+c),o.a.createElement(rt,{visible:t,configs:r,onClose:function(t){if(t){for(var a={layoutIndex:l},o=t.layoutColumn,r=e.state.configs.cellsArr.slice(0,o),i=0;i<o;i++)r.length<=i&&r.push({dropIndex:i});var c={cellsArr:r,layoutColumn:o,boxStyles:t.boxStyles};a.configs=c,e.setState({configs:c}),n(a)}e.onToggleEdit()},onDeleteContainer:this.onDeleteContainer}),o.a.createElement(B.a,{type:"form",className:"icon-operation",onClick:this.onToggleEdit}))}}]),t}(l.PureComponent)),ct=a(194),st=a.n(ct),ut=(a(390),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderContainer",value:function(){var e=this.props,t=e.layoutConfig,a=Object(x.a)(e,["layoutConfig"]);return Array.isArray(t)&&t.length>0?t.map(function(e){var t=e.type,n=e.layoutIndex,l="layout-".concat(n),r=Object.assign({key:l},a,e);return"FormContainer"===t?o.a.createElement(Ue,r):"TableContainer"===t?o.a.createElement(Ge,r):"EmptyContainer"===t?o.a.createElement(st.a,r):"BoxContainer"===t?o.a.createElement(it,r):null}):o.a.createElement("div",{className:"empty-tips"},"\u8bf7\u6dfb\u52a0\u5bb9\u5668\u7ec4\u4ef6")}},{key:"render",value:function(){return o.a.createElement(l.Fragment,null,this.renderContainer())}}]),t}(l.PureComponent)),dt=[{title:"column0",dataIndex:"dataIndex0",index:0},{title:"column1",dataIndex:"dataIndex1",index:1},{title:"column2",dataIndex:"dataIndex2",index:2},{title:"column3",dataIndex:"dataIndex3",index:3},{title:"column4",dataIndex:"dataIndex4",index:4}],mt=(a(391),["main-container","empty-tips"]),pt=["FormContainer","TableContainer","EmptyContainer","BoxContainer"],bt=(be="AppService",function(e){return function(t){var a=Object.assign({},t);if(Object.hasOwnProperty.call(me,be)){var n=me[be];"function"===typeof n&&(a.service=new n)}return o.a.createElement(e,a)}}(pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={layoutConfig:[],generateLoading:!1},a.onEdit=a.onEdit.bind(Object(p.a)(Object(p.a)(a))),a.onUpdateLayoutConfig=a.onUpdateLayoutConfig.bind(Object(p.a)(Object(p.a)(a))),a.onGeneratePage=a.onGeneratePage.bind(Object(p.a)(Object(p.a)(a))),a.onPreviewPage=a.onPreviewPage.bind(Object(p.a)(Object(p.a)(a))),a.layoutIndex=0,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onUpdateLayoutConfig",value:function(e){var t=e.layoutIndex,a=e.configs,n=e.deleteFlag,l=void 0!==n&&n,o=this.state.layoutConfig.slice();if(l){var r=o.findIndex(function(e){return e.layoutIndex===t});o.splice(r,1)}else{o.find(function(e){return e.layoutIndex===t}).configs=a}this.setState({layoutConfig:o})}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("drop",function(t){t.preventDefault();var a=t.target.className;if(mt.indexOf(a)>-1){var n=JSON.parse(t.dataTransfer.getData("text/plain")),l=n.type;if(pt.indexOf(l)>-1){var o=e.state.layoutConfig.slice(),r=Object.assign(n,{layoutIndex:e.layoutIndex,configs:{}});"TableContainer"===l&&(r.configs.columns=dt),o.push(r),e.setState({layoutConfig:o}),e.layoutIndex+=1}else se.a.warn("\u8bf7\u62d6\u62fd\u5bb9\u5668\u7ec4\u4ef6")}},!1)}},{key:"onEdit",value:function(e){var t=e.kIndex,a=this.state.formConfig.slice();a[t]=Object.assign({},a[t],e),this.setState({formConfig:a})}},{key:"onGeneratePage",value:function(){var e=this,t=this.props.pageName,a=this.state.layoutConfig,n={pageName:t,layoutConfig:a},l={};a.forEach(function(e){if("FormContainer"===e.type){l.hasForm=!0;var t=(e.configs||{}).formItemArr;(void 0===t?[]:t).forEach(function(e){if("Btn"===e.type){l.hasBtn=!0;var t=e.btnArr,a=(void 0===t?[]:t).find(function(e){return"1"===e.expandFlag});a&&(l.hasExpand=!0,l.expandCount=a.expandCount)}else e.type&&(l["has".concat(e.type)]=!0)})}"TableContainer"===e.type&&(l.hasTable=!0)}),n.extraData=l,this.setState({generateLoading:!0}),this.props.service.generatePage(n).then(function(a){var n=a.data;if(1===n.code){se.a.success(n.info);var l=document.createElement("a");l.href="./sourceCache/".concat(t,".js"),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)}else se.a.error(n.info);e.setState({generateLoading:!1})}).catch(function(t){se.a.error("\u8bf7\u6c42\u5931\u8d25"),e.setState({generateLoading:!1})})}},{key:"onPreviewPage",value:function(){var e=this.props.onPreviewPage;e(this.state.layoutConfig)}},{key:"render",value:function(){var e=this.state,t=e.layoutConfig,a=e.generateLoading;return o.a.createElement(l.Fragment,null,o.a.createElement("div",{className:"main-container"},o.a.createElement(ut,{layoutConfig:t,onUpdateLayoutConfig:this.onUpdateLayoutConfig})),o.a.createElement(C.a,{type:"primary",onClick:this.onGeneratePage,loading:a},"\u751f\u6210\u9875\u9762"),o.a.createElement(C.a,{type:"primary",onClick:this.onPreviewPage,style:{marginLeft:"5px"}},"\u9884\u89c8"))}}]),t}(l.PureComponent))||pe),ft=(a(392),h.a.Sider),ht=h.a.Content,gt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={showEditNameModal:!0,showPreviewModal:!1,pageName:""},a.onCloseModal=a.onCloseModal.bind(Object(p.a)(Object(p.a)(a))),a.onPreviewPage=a.onPreviewPage.bind(Object(p.a)(Object(p.a)(a))),a.onClosePreviewModal=a.onClosePreviewModal.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onCloseModal",value:function(e){var t=e.pageName;this.setState({showEditNameModal:!1,pageName:t})}},{key:"onClosePreviewModal",value:function(){this.setState({showPreviewModal:!1})}},{key:"onPreviewPage",value:function(e){this.setState({showPreviewModal:!0}),this.layoutConfig=e}},{key:"render",value:function(){var e=this.state,t=e.showEditNameModal,a=e.showPreviewModal,n=e.pageName;return o.a.createElement("div",{className:"App"},o.a.createElement(g.a,{locale:f.a},o.a.createElement(h.a,null,o.a.createElement(ft,{width:"300"},o.a.createElement(ce,null)),o.a.createElement(h.a,null,o.a.createElement(ht,null,o.a.createElement(bt,{pageName:n,onPreviewPage:this.onPreviewPage}))),o.a.createElement(O,{onCloseModal:this.onCloseModal,showModal:t}),o.a.createElement(ae,{layoutConfig:this.layoutConfig,onCloseModal:this.onClosePreviewModal,showModal:a}))))}}]),t}(l.Component);i.a.render(o.a.createElement(gt,null),document.getElementById("root"))}},[[199,1,2]]]);
//# sourceMappingURL=main.e5d03672.chunk.js.map