(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t){},198:function(e,t,n){e.exports=n(395)},203:function(e,t,n){},204:function(e,t,n){},305:function(e,t,n){},378:function(e,t,n){},379:function(e,t,n){},381:function(e,t,n){},382:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){},385:function(e,t,n){},386:function(e,t,n){},387:function(e,t,n){},388:function(e,t,n){},389:function(e,t,n){},390:function(e,t,n){},391:function(e,t,n){},395:function(e,t,n){"use strict";n.r(t);var a,l=n(0),o=n.n(l),r=n(9),i=n.n(r),c=(n(203),n(16)),s=n(15),u=n(20),d=n(18),m=n(19),p=n(5),b=n(194),f=n.n(b),h=n(407),g=n(397),y=n(399),v=n(403),E=n(40),C=(n(204),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,n=t.form,a=t.onCloseModal;n.validateFields(function(e,t){e||a(t)})}},{key:"render",value:function(){var e=this.props,t=e.showModal,n=e.form.getFieldDecorator;return t?o.a.createElement("div",{className:"edit-name-box"},o.a.createElement(y.a,{onSubmit:this.handleSubmit,style:{padding:"0 20px"}},o.a.createElement(y.a.Item,null,o.a.createElement("h3",{className:"title"},"\u9875\u9762\u540d\u79f0")),o.a.createElement(y.a.Item,null,n("pageName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9875\u9762\u540d\u79f0!"},{pattern:/^[a-zA-Z]+$/,message:"\u540d\u79f0\u53ea\u80fd\u5305\u542b\u5b57\u6bcd\uff01"}]})(o.a.createElement(v.a,{placeholder:"\u53ea\u80fd\u5305\u542b\u5b57\u6bcd"}))),o.a.createElement(y.a.Item,{style:{marginTop:"15px"}},o.a.createElement(E.a,{type:"primary",htmlType:"submit",style:{width:"100%"}},"\u786e\u5b9a")))):null}}]),t}(l.Component)),O=y.a.create()(C),x=n(35),k=n(39),j=n(83),I=n(400),S=n(64),D=n(37),w=n(109),A=n(75),F=n(10),T=n(398),V=n(17),P=n.n(V),N=(n(165),n(305),y.a.Item),B=j.a.Option,L=I.a.RangePicker,U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},n.onSubmit=n.onSubmit.bind(Object(p.a)(Object(p.a)(n))),n.onCollapse=n.onCollapse.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.getLayoutConfig();if(Array.isArray(e)){var t=e.find(function(e){return"FormContainer"===e.type});if(t){var n=t.configs.formItemArr.find(function(e){return"Btn"===e.type});if(n){var a=n.btnArr.find(function(e){return e.expandFlag});a&&(this.state.expand=a.expand,this.state.expandCount=a.expandCount)}}}}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"getLayoutConfig",value:function(){return null}},{key:"onCollapse",value:function(){var e=this.state.expand;this.setState({expand:!e})}},{key:"_onShowSizeChange",value:function(e,t){this.isFunc("onShowSizeChange")&&this.onShowSizeChange(e,t)}},{key:"_onChange",value:function(e,t){this.isFunc("onChange")&&this.onChange(e,t)}},{key:"getInitialValue",value:function(e){var t=e.type,n=void 0===t?"Input":t,a=e.defaultValue,l=e.dateFormat,o=void 0===l?"YYYY-MM-DD":l;return"DatePicker"===n||"RangePicker"===n?a&&P()(a,o):e.defaultValue||""}},{key:"getTableData",value:function(){return[]}},{key:"isFunc",value:function(e){return"function"===typeof this[e]}},{key:"renderRow",value:function(e){var t=e.slice(),n=t.findIndex(function(e){return e.singleRow}),a=t[n];return n>-1&&t.splice(n,1),[o.a.createElement(S.a,{key:"basic-row",gutter:{md:8,lg:24,xl:48}},this.renderCol(t)),a?o.a.createElement(S.a,{key:"single-row"},o.a.createElement(D.a,{style:Object(k.a)({},a.style)},o.a.createElement("span",{className:"btn-group-box"},this.renderBtn(a)))):null]}},{key:"renderCol",value:function(e){var t=this,n=this.props.form,a=n.getFieldDecorator;return e.map(function(e,l){var r=e.label,i=e.name,c=e.colSpan,s=void 0===c?8:c,u=e.colIndex,d=e.type,m=e.cellStyles,p=void 0===m?{}:m,b=e.singleRow,f=void 0!==b&&b,h=e.hasLinkage;if(f)return null;if("Btn"===d)return o.a.createElement(D.a,{md:s,sm:24,key:"col-".concat(u)},o.a.createElement(N,{style:p},t.renderBtn(e)));if(!i)return null;if("1"===h){var g=e.linkName,y=e.condition;if(n.getFieldValue(g)!==y)return null}var v={display:"block"};if(Object.hasOwnProperty.call(t.state,"expand")){var E=t.state,C=E.expand,O=E.expandCount;!C&&l+1>O&&(v.display="none")}return o.a.createElement(D.a,{md:s,sm:24,key:"col-".concat(u),style:v},o.a.createElement(N,{label:r,style:p},a(i,{rules:[],initialValue:t.getInitialValue(e)})(t.renderItemComponent(e))))})}},{key:"renderItemComponent",value:function(e){var t=e.placeholder,n=e.type,a=null;switch(void 0===n?"Input":n){case"Select":a=this.renderSelect(e);break;case"RangePicker":a=this.renderRangePicker(e);break;case"DatePicker":a=this.renderDatePicker(e);break;case"Btn":a=this.renderBtn(e);break;case"Radio":a=this.renderRadio(e);break;case"Checkbox":a=this.renderCheckbox(e);break;default:a=o.a.createElement(v.a,{placeholder:t})}return a}},{key:"renderSelect",value:function(e){var t=e.style,n=void 0===t?{}:t,a=e.options,l=void 0===a?[]:a;return o.a.createElement(j.a,{style:Object(k.a)({width:"100%"},n)},Array.isArray(l)?l.map(function(e){var t=e.key,n=e.optionValue,a=e.optionText;return o.a.createElement(B,{key:t||n,value:n},a)}):null)}},{key:"renderRadio",value:function(e){var t=e.style,n=void 0===t?{}:t,a=e.radios,l=void 0===a?[]:a;return o.a.createElement(w.a.Group,{style:Object(k.a)({},n)},Array.isArray(l)?l.map(function(e){var t=e.key,n=e.radioValue,a=e.radioText;return o.a.createElement(w.a,{key:t||n,value:n},a)}):null)}},{key:"renderCheckbox",value:function(e){var t=e.style,n=void 0===t?{}:t,a=e.cks,l=void 0===a?[]:a;return o.a.createElement(A.a.Group,{style:Object(k.a)({width:"100%"},n)},Array.isArray(l)?l.map(function(e){var t=e.key,n=e.ckValue,a=e.ckText;return o.a.createElement(A.a,{key:t||n,value:n},a)}):null)}},{key:"renderDatePicker",value:function(e){return o.a.createElement(I.a,{style:{width:"100%"}})}},{key:"renderRangePicker",value:function(e){return o.a.createElement(L,{style:{width:"100%"}})}},{key:"renderBtn",value:function(e){var t=this,n=e.btnArr;return o.a.createElement(l.Fragment,null,n.map(function(e){var n=e.btnText,a=void 0===n?"button":n,l=e.type,r=e.index,i=e.props,c=e.style,s=void 0===c?{}:c,u=e.expandFlag;if("1"===(void 0===u?"0":u)){var d=t.state.expand,m=d?"\u9690\u85cf":"\u5c55\u5f00";return o.a.createElement("a",{className:"btn-collapse",onClick:t.onCollapse,href:"\xa0",style:s,key:"btn-".concat(r)},m,o.a.createElement(F.a,{type:d?"up":"down"}))}return o.a.createElement(E.a,Object.assign({key:"btn-".concat(r),type:l,style:s},i),a)}))}},{key:"_renderHeader",value:function(e){var t=e.configs;return this.isFunc("renderHeader")?this.renderHeader(t):o.a.createElement("div",{className:"fulu-header"},"header")}},{key:"_renderForm",value:function(e){var t=e.configs;if(this.isFunc("renderForm"))return this.renderForm(t);var n=t.formItemArr;return o.a.createElement("div",{className:"form-box fulu-box",key:"query-form"},o.a.createElement(y.a,{onSubmit:this.onSubmit,layout:"inline"},this.renderRow(n)))}},{key:"_renderTable",value:function(e){var t=e.configs;if(this.isFunc("renderTable"))return this.renderTable(t);var n=t.pagination,a=t.rowSelection,l=Object(x.a)(t,["pagination","rowSelection"]),r=this.isFunc("getTableTotal")?this.getTableTotal():0,i=Object.assign({size:"small",onShowSizeChange:this._onShowSizeChange,onChange:this._onShowSizeChange,showTotal:function(e){return"\u5171".concat(e,"\u6761")},pageSizeOptions:["10","20","30","40"],total:r,defaultPageSize:1,showSizeChanger:!0,showQuickJumper:!0},n),c=this.getTableData();return o.a.createElement("div",{className:"table-box fulu-box",key:"query-table"},o.a.createElement(T.a,Object.assign({dataSource:c,pagination:i,rowSelection:a,columns:t.columns},l)))}},{key:"_renderTab",value:function(e){var t=e.configs;return this.isFunc("renderTab")?this.renderTab(t):null}},{key:"_renderCustom",value:function(e){var t=e.configs;return this.isFunc("renderCustom")?this.renderCustom(t):null}},{key:"renderContent",value:function(e){var t=this;return e.map(function(e){var n=e.type;return"FormContainer"===n?t._renderForm(e):"TableContainer"===n?t._renderTable(e):"CustomContainer"===n?t._renderCustom(e):null})}},{key:"render",value:function(){var e=this.getLayoutConfig();return o.a.createElement("div",{className:"wrapper"},Array.isArray(e)?this.renderContent(e):null)}}]),t}(l.PureComponent),M=n(402),R=y.a.create()(a=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getLayoutConfig",value:function(){return this.props.layoutConfig}}]),t}(U))||a,z=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showModal,n=e.layoutConfig,a=e.onCloseModal;return o.a.createElement(M.a,{visible:t,footer:null,width:"100%",closable:!0,centered:!0,onCancel:a,title:"\u9875\u9762\u9884\u89c8",maskClosable:!0},o.a.createElement(R,{layoutConfig:n}))}}]),t}(l.Component),H=n(146),Y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onDragStart",value:function(e,t){e.dataTransfer.setData("text/plain",JSON.stringify(t))}},{key:"render",value:function(){var e=this,t=this.props,n=t.ch,a=t.data;return o.a.createElement("span",{draggable:"true",className:"drag-item",onDragStart:function(t){e.onDragStart(t,a)}},n)}}]),t}(l.PureComponent),_={form:[{ch:"Input",data:{type:"Input",label:"",name:""}},{ch:"Button",data:{type:"Button"}},{ch:"Select",data:{type:"Select"}},{ch:"DatePicker",data:{type:"DatePicker"}},{ch:"Tabs",data:{type:"Tabs"}},{ch:"RangePicker",data:{type:"RangePicker"}},{ch:"Breadcrumb",data:{type:"Breadcrumb"}},{ch:"Text",data:{type:"Text"}}],layout:[{ch:"Form",data:{type:"FormContainer"}},{ch:"Table",data:{type:"TableContainer"}},{ch:"Header",data:{type:"HeaderContainer"}}]},q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.tabType,t=_[void 0===e?"form":e];return Array.isArray(t)?o.a.createElement(l.Fragment,null,t.map(function(e,t){return o.a.createElement(Y,Object.assign({},e,{key:"drag-".concat(t)}))})):null}}]),t}(l.PureComponent),W=H.a.TabPane,J=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("dragover",function(e){e.preventDefault()},!1),document.addEventListener("drag",function(e){},!1),document.addEventListener("dragstart",function(e){e.target.style.opacity=.5},!1),document.addEventListener("dragend",function(e){e.target.style.opacity="",document.querySelectorAll(".drop-zone").forEach(function(e){e.style.background="#fff"})},!1),document.addEventListener("dragenter",function(e){"drop-zone"===e.target.className&&(e.target.style.background="#96cdf9")},!1),document.addEventListener("dragleave",function(e){"drop-zone"===e.target.className&&(e.target.style.background="")},!1)}},{key:"render",value:function(){return o.a.createElement(H.a,{defaultActiveKey:"1"},o.a.createElement(W,{tab:"\u5e03\u5c40",key:"layout"},o.a.createElement(q,{tabType:"layout"})),o.a.createElement(W,{tab:"\u8868\u5355",key:"form"},o.a.createElement(q,null)))}}]),t}(l.Component),G=n(406),$=n(192),K=n.n($),Q={AppService:function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"generatePage",value:function(e){return K()({method:"POST",url:"".concat("http://127.0.0.1:8888","/generatePage"),data:e})}}]),e}()};var Z,X,ee="1",te=n(405),ne=n(396),ae={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},le=(n(378),j.a.Option),oe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,n=t.form,a=t.onClose;n.validateFields(function(e,t){if(!e){for(var n=t.layoutColumn,l=+n,o=0,r={layoutColumn:n,colSpanArr:[]},i=0;i<l;i++){var c=+t["colSpan-".concat(i)];o+=c,r.colSpanArr.push(c)}if(o>24)return void G.a.error("\u8de8\u5217\u603b\u6570\u4e0d\u80fd\u8d85\u8fc724!");a(r)}})}},{key:"renderColSpanInputs",value:function(){for(var e=this.props.form,t=e.getFieldDecorator,n=+e.getFieldValue("layoutColumn"),a=[],l=0;l<n;l++)a.push(o.a.createElement(y.a.Item,Object.assign({key:"formitem-".concat(l),label:"\u7b2c".concat(l+1,"\u5217")},ae),t("colSpan-".concat(l),{initialValue:24/n,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5217\u5bbd!"},{pattern:/^[1-9](\d)?$/,message:"\u53ea\u80fd\u5305\u542b\u6570\u5b57\uff01"}]})(o.a.createElement(v.a,null))));return a}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.form,a=e.onClose,l=e.onDeleteContainer,r=n.getFieldDecorator;return o.a.createElement(te.a,{visible:t,width:420,title:"\u7f16\u8f91\u5217",onClose:function(){a(0)}},o.a.createElement(y.a,{onSubmit:this.handleSubmit,style:{padding:"0 20px"}},o.a.createElement(y.a.Item,Object.assign({label:"\u8868\u5355\u5217"},ae),r("layoutColumn",{initialValue:3,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5217\u6570!"}]})(o.a.createElement(j.a,null,o.a.createElement(le,{value:"2"},"2"),o.a.createElement(le,{value:"3"},"3"),o.a.createElement(le,{value:"4"},"4")))),o.a.createElement(ne.a,null),this.renderColSpanInputs(),o.a.createElement("div",{className:"btn-box"},o.a.createElement(E.a,{type:"primary",htmlType:"submit",style:{marginRight:"10px"}},"\u786e\u5b9a"),o.a.createElement(E.a,{onClick:l},"\u5220\u9664\u5bb9\u5668"))))}}]),t}(l.Component),re=y.a.create()(oe),ie=n(113),ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";return e?e.split(t).reduce(function(e,t){var n=t.split(":"),a=Object(ie.a)(n,2),l=a[0],o=a[1];return l&&o&&(e[l]=o.replace(/['"\s]/g,"")),e},{}):{}},se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";return"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).reduce(function(t,n){return t.push("".concat(n,":").concat(e[n])),t},[]).join(t):Array.isArray(e)?e.join(t):e},ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=0;if(t===a.length)l=24;else{for(var o=0,r=0,i=0;i<n.length;i++)if(n[i].colIndex>=e){if(0===(r%=24))o=0;else for(var c=0;c<a.length;c++)(r-=a[c])<=0&&(o=c+1,c=a.length);i=n.length}else r+=n[i].colSpan;var s,u=0;for(t<=a.length-o&&(u=o),s=u+t-1;u<=s;u++)l+=a[u]}return l},de=j.a.Option,me=I.a.RangePicker,pe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).renderItem=function(e){var t=e.placeholder,a=e.type,l=null;switch(void 0===a?"Input":a){case"Select":l=n.renderSelect(e);break;case"RangePicker":l=n.renderRangePicker(e);break;case"DatePicker":l=n.renderDatePicker(e);break;case"Btn":l=n.renderBtn(e);break;default:l=o.a.createElement(v.a,{placeholder:t})}return l},n.renderSelect=function(e){var t=e.style,n=void 0===t?{}:t,a=e.options,l=void 0===a?[]:a;return o.a.createElement(j.a,{style:Object(k.a)({width:"100%"},n)},Array.isArray(l)?l.map(function(e){var t=e.key,n=e.optionValue,a=e.optionText;return o.a.createElement(de,{key:t||n,value:n},a)}):null)},n.renderDatePicker=function(){return o.a.createElement(I.a,{style:{width:"100%"}})},n.renderRangePicker=function(){return o.a.createElement(me,{style:{width:"100%"}})},n.renderBtn=function(e){var t=e.btnArr;return o.a.createElement(l.Fragment,null,t.map(function(e){var t=e.btnText,a=void 0===t?"button":t,l=e.expandFlag,r=(e.expandCount,e.style),i=void 0===r?{}:r,c=e.index,s=Object(x.a)(e,["btnText","expandFlag","expandCount","style","index"]);if(l===ee){var u=n.props,d=u.expand,m=u.onCollapse,p=d?"\u9690\u85cf":"\u5c55\u5f00";return o.a.createElement("a",{className:"btn-collapse",onClick:m,href:"\xa0",key:"btn-".concat(c),style:i},p,o.a.createElement(F.a,{type:d?"up":"down"}))}return o.a.createElement(E.a,Object.assign({key:"btn-".concat(c),style:i},s),a)}))},n.state={editable:!1},n.onEditToggle=n.onEditToggle.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getType",value:function(){return""}}]),Object(s.a)(t,[{key:"onEditToggle",value:function(e){e&&e.stopPropagation();var t=this.state.editable;this.setState({editable:!t})}},{key:"getInitialValue",value:function(e){var t=e.type,n=void 0===t?"Input":t,a=e.defaultValue;return"DatePicker"===n||"RangePicker"===n?a&&P()(a,"YYYY-MM-DD"):e.defaultValue||""}},{key:"render",value:function(){var e=this.props,t=e.formItemConfig,n=void 0===t?{}:t,a=e.form,r=a.getFieldDecorator,i=n.type,c=n.colSpan,s=n.label,u=n.name,d=n.rules,m=n.cellStyles,p=void 0===m?{}:m,b=n.hasLinkage,f=c||8;if(!u&&"Btn"!==i)return null;if("1"===b){var h=n.linkName,g=n.condition;if(a.getFieldValue(h)!==g)return null}return o.a.createElement(l.Fragment,null,o.a.createElement(D.a,{span:c,md:f,sm:24},"Btn"!==i?o.a.createElement(y.a.Item,{label:s,style:p},r(u,{rules:d||[],initialValue:this.getInitialValue(n)})(this.renderItem(n))):o.a.createElement(y.a.Item,{style:p},this.renderItem(n))))}}]),t}(l.Component),be=n(401),fe=n(404),he=(n(379),be.a.Panel),ge=j.a.Option,ye=v.a.TextArea,ve={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},Ee=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={deleteComponent:!1,options:[]},n.onSubmit=n.onSubmit.bind(Object(p.a)(Object(p.a)(n))),n.onAddOptionItem=n.onAddOptionItem.bind(Object(p.a)(Object(p.a)(n))),n.onAddCellStyleItem=n.onAddCellStyleItem.bind(Object(p.a)(Object(p.a)(n))),n.onAddButton=n.onAddButton.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteCellStyleItem=n.onDeleteCellStyleItem.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteOptionItem=n.onDeleteOptionItem.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteButton=n.onDeleteButton.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteComponent=n.onDeleteComponent.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.formItemConfig,n=t.type,a=t.options,l=t.btnArr;"Option"!==n||this.initOptions||(this.setState({options:a}),this.optionIndex=a.length,this.initOptions=!0),"Btn"!==n||this.initBtn||(this.setState({btnArr:l}),this.btnIndex=l.length,this.initBtn=!0)}},{key:"componentDidMount",value:function(){}},{key:"onSubmit",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.state,n=t.deleteComponent,a=t.options,l=t.btnArr,o=this.props,r=o.form,i=o.onUpdateConfigs,c=o.formItemConfig,s=o.colSpanArr,u=o.formItemArr;r.validateFields(function(e,t){if(!e){var o=Object.assign({},c,t);if(n&&(o.deleteFlag=!0),o.cellStyles=ce(t.cellStyles),"Select"===o.type){var r=a.slice();r.forEach(function(e){var n=e.index,a="optionText-".concat(n),l="optionValue-".concat(n);e.optionText=t[a],e.optionValue=t[l],delete o[a],delete o[l]}),o.options=r}else if("DatePicker"===o.type)o.defaultValue=t.defaultValue&&t.defaultValue.format("YYYY-MM-DD");else if("Btn"===o.type){var d=l.slice();d.forEach(function(e){var n=e.index,a="btnText-".concat(n),l="type-".concat(n),r="htmlType-".concat(n),i="onClick-".concat(n),c="expandFlag-".concat(n),s="btnStyle-".concat(n);e.btnText=t[a],e.type=t[l],e.htmlType=t[r],e.expandFlag=t[c],e.style=ce(t[s]),"submit"!==e.htmlType&&(e.onClick=t[i]);var u="expandCount-".concat(n);c===ee&&(e.expandCount=t[u]),delete o[s],delete o[u],delete o[c],delete o[i],delete o[r],delete o[a],delete o[l]}),o.btnArr=d}var m=t.originSpan,p=void 0===m?1:m;o.originSpan=p,o.colSpan=ue(c.colIndex,p,u,s),i(o)}})}},{key:"onDeleteComponent",value:function(){this.setState({deleteComponent:!0})}},{key:"onAddOptionItem",value:function(){var e=this.state.options,t=(void 0===e?[]:e).slice();t.push({value:"",text:"",index:this.optionIndex}),this.setState({options:t}),this.optionIndex+=1}},{key:"onAddCellStyleItem",value:function(){var e=this.state.cellStyles,t=(void 0===e?[]:e).slice();t.push({value:"",name:"",index:this.cellStyleIndex}),this.setState({cellStyles:t}),this.cellStyleIndex+=1}},{key:"onAddButton",value:function(){var e=this.state.btnArr.slice();e.push({btnText:"button",type:"primary",index:this.btnIndex}),this.setState({btnArr:e}),this.btnIndex+=1}},{key:"onDeleteButton",value:function(e){var t=this.state.btnArr,n=(void 0===t?[]:t).reduce(function(t,n){return n.index!==e&&t.push(n),t},[]);this.setState({btnArr:n})}},{key:"onDeleteCellStyleItem",value:function(e){var t=this.state.cellStyles,n=(void 0===t?[]:t).reduce(function(t,n){return n.index!==e&&t.push(n),t},[]);this.setState({cellStyles:n})}},{key:"onDeleteOptionItem",value:function(e){var t=this.state.options,n=(void 0===t?[]:t).reduce(function(t,n){return n.index!==e&&t.push(n),t},[]);this.setState({options:n})}},{key:"renderOptionsCard",value:function(){var e=this,t=this.props.form,n=this.state.options;return o.a.createElement(fe.a,{title:"option\u8bbe\u7f6e",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddOptionItem})},n.map(function(n){var a=n.value,r=n.text,i=n.index;return o.a.createElement(l.Fragment,{key:"optionitem-".concat(i)},o.a.createElement(y.a.Item,{key:"optionitem-value-".concat(i),style:{width:"45%",display:"inline-block"}},t.getFieldDecorator("optionValue-".concat(i),{initialValue:a})(o.a.createElement(v.a,{placeholder:"value"}))),o.a.createElement(y.a.Item,{key:"optionitem-text-".concat(i),style:{width:"45%",display:"inline-block",marginLeft:"10px"}},t.getFieldDecorator("optionText-".concat(i),{initialValue:r})(o.a.createElement(v.a,{placeholder:"show text"}))),o.a.createElement(F.a,{type:"close-circle",style:{marginLeft:"6px",lineHeight:"39px"},onClick:function(){e.onDeleteOptionItem(i)}}))}))}},{key:"renderPanelHeader",value:function(e){var t=this,n=e.btnText,a=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},n),o.a.createElement(F.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteButton(a)}}))}},{key:"renderBtnCard",value:function(){var e=this,t=this.props,n=t.formItemConfig,a=t.form,l=n.type,r=this.state,i=r.btnArr,c=r.expandFlag,s=void 0===c?"0":c;return"Btn"===l?o.a.createElement(fe.a,{title:"\u6309\u94ae\u533a\u57df",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddButton})},o.a.createElement(be.a,null,i.map(function(t){var n=t.index,l=t.btnText,r=t.type,i=t.htmlType,c=void 0===i?"button":i,u=t.onClick,d=t.expandCount,m=t.btnStyle;return o.a.createElement(he,{header:e.renderPanelHeader(t),key:"btn-".concat(n)},o.a.createElement(y.a.Item,Object.assign({key:"btnText-".concat(n),label:"\u6309\u94ae\u6587\u5b57"},ve),a.getFieldDecorator("btnText-".concat(n),{initialValue:l})(o.a.createElement(v.a,{placeholder:"btnText"}))),o.a.createElement(y.a.Item,Object.assign({key:"type-".concat(n),label:"type"},ve),a.getFieldDecorator("type-".concat(n),{initialValue:r})(o.a.createElement(j.a,null,o.a.createElement(ge,{value:"primary"},"primary"),o.a.createElement(ge,{value:"dashed"},"dashed"),o.a.createElement(ge,{value:"danger"},"danger"),o.a.createElement(ge,{value:""},"none")))),o.a.createElement(y.a.Item,Object.assign({key:"htmlType-".concat(n),label:"htmlType"},ve),a.getFieldDecorator("htmlType-".concat(n),{initialValue:c})(o.a.createElement(j.a,null,o.a.createElement(ge,{value:"submit"},"submit"),o.a.createElement(ge,{value:"reset"},"reset"),o.a.createElement(ge,{value:"button"},"button")))),o.a.createElement(y.a.Item,Object.assign({key:"onClick-".concat(n),label:"onClick"},ve),a.getFieldDecorator("onClick-".concat(n),{initialValue:u})(o.a.createElement(v.a,{placeholder:"\u70b9\u51fb\u4e8b\u4ef6\u540d\u79f0"}))),o.a.createElement(y.a.Item,Object.assign({key:"btnStyle-".concat(n),label:"\u6309\u94ae\u6837\u5f0f"},ve),a.getFieldDecorator("btnStyle-".concat(n),{initialValue:m})(o.a.createElement(ye,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),o.a.createElement(y.a.Item,Object.assign({key:"expandFlag-".concat(n),label:"\u6298\u53e0"},ve),a.getFieldDecorator("expandFlag-".concat(n),{initialValue:s})(o.a.createElement(j.a,null,o.a.createElement(ge,{value:"0"},"\u5426"),o.a.createElement(ge,{value:"1"},"\u662f")))),"1"===a.getFieldValue("expandFlag-".concat(n))?o.a.createElement(y.a.Item,Object.assign({key:"expandCount-".concat(n),label:"\u6298\u53e0\u53ef\u89c1\u6570"},ve),a.getFieldDecorator("expandCount-".concat(n),{initialValue:d})(o.a.createElement(v.a,{placeholder:"expandCount"}))):null)}))):null}},{key:"renderDefaultValueItem",value:function(){var e=this.props,t=e.formItemConfig,n=e.form,a=t.type,l=t.defaultValue,r=n.getFieldDecorator,i=this.state.options;return"Select"===a?o.a.createElement(y.a.Item,Object.assign({},ve,{label:"defaultValue"}),r("defaultValue",{initialValue:l})(o.a.createElement(j.a,null,i.map(function(e){var t=e.index,a=n.getFieldValue("optionValue-".concat(t)),l=n.getFieldValue("optionText-".concat(t));return o.a.createElement(ge,{value:a,key:"op-".concat(t)},"".concat(a,"/").concat(l))})))):"DatePicker"===a?o.a.createElement(y.a.Item,Object.assign({},ve,{label:"defaultValue"}),r("defaultValue",{initialValue:l})(o.a.createElement(I.a,{style:{width:"100%"}}))):"Input"===a?o.a.createElement(y.a.Item,Object.assign({},ve,{label:"defaultValue"}),r("defaultValue",{initialValue:l})(o.a.createElement(v.a,null))):null}},{key:"renderLinkage",value:function(e,t){var n=e.condition,a=e.linkName,r=this.props.form.getFieldDecorator;return o.a.createElement(l.Fragment,null,o.a.createElement(y.a.Item,Object.assign({},ve,{label:"\u5173\u8054\u7ec4\u4ef6name"}),r("linkName",{initialValue:a})(o.a.createElement(j.a,null,t.map(function(t){var n=t.name,a=t.colIndex,l=t.label;return n&&a!==e.colIndex?o.a.createElement(ge,{value:"".concat(n)},"".concat(n,"/").concat(l)):null})))),o.a.createElement(y.a.Item,Object.assign({},ve,{label:"condition"}),r("condition",{initialValue:n})(o.a.createElement(v.a,null))))}},{key:"renderContent",value:function(){var e=this.state.deleteComponent,t=this.props,n=t.form,a=t.dropComponent,r=void 0!==a&&a,i=t.formItemConfig,c=t.formItemArr,s=i.label,u=i.name,d=i.placeholder,m=i.type,p=i.linkage,b=n.getFieldDecorator;return r&&!e?"Btn"===m?this.renderBtnCard():o.a.createElement(l.Fragment,null,o.a.createElement(ne.a,null,"\u7ec4\u4ef6"),o.a.createElement(y.a.Item,Object.assign({},ve,{label:"label"}),b("label",{initialValue:s})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({},ve,{label:"name"}),b("name",{initialValue:u})(o.a.createElement(v.a,null))),this.renderDefaultValueItem(),o.a.createElement(y.a.Item,Object.assign({},ve,{label:"placeholder"}),b("placeholder",{initialValue:d})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({},ve,{label:"\u8054\u52a8\u5173\u8054"}),b("hasLinkage",{initialValue:p})(o.a.createElement(j.a,null,o.a.createElement(ge,{value:"0"},"\u5426"),o.a.createElement(ge,{value:"1"},"\u662f")))),"1"===n.getFieldValue("hasLinkage")?this.renderLinkage(i,c):null,"Select"===m?this.renderOptionsCard():null,o.a.createElement(y.a.Item,{style:{textAlign:"center"}},o.a.createElement(E.a,{onClick:this.onDeleteComponent},"\u5220\u9664\u7ec4\u4ef6"))):null}},{key:"renderCellStylesSetting",value:function(){var e=this,t=this.props.form,n=this.state.cellStyles;return o.a.createElement(fe.a,{title:"style\u8bbe\u7f6e",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddCellStyleItem})},n.map(function(n){var a=n.name,r=n.value,i=n.index;return o.a.createElement(l.Fragment,{key:"cell-styleitem-".concat(i)},o.a.createElement(y.a.Item,{key:"cell-styleitem-name-".concat(i),style:{width:"45%",display:"inline-block"}},t.getFieldDecorator("styleName-".concat(i),{initialValue:a})(o.a.createElement(v.a,{placeholder:"style name"}))),o.a.createElement(y.a.Item,{key:"cell-styleitem-value-".concat(i),style:{width:"45%",display:"inline-block",marginLeft:"10px"}},t.getFieldDecorator("styleValue-".concat(i),{initialValue:r})(o.a.createElement(v.a,{placeholder:"style value"}))),o.a.createElement(F.a,{type:"close-circle",style:{marginLeft:"6px",lineHeight:"39px"},onClick:function(){e.onDeleteCellStyleItem(i)}}))}))}},{key:"render",value:function(){for(var e=this,t=this.props,n=t.visible,a=t.onClose,l=t.form,r=t.onDeleteFormItemContainer,i=t.formItemConfig,c=t.colSpanArr,s=1,u=i.colSpan,d=0;d<c.length;d++)(u-=c[d].colSpan)>0?s++:d=c.length;var m=se(i.cellStyles);return o.a.createElement(te.a,{visible:n,title:"\u7f16\u8f91\u8868\u5355\u9879",onClose:function(){e.setState({deleteComponent:!1}),e.initOptions=!1,e.initBtn=!1,a()},width:420},o.a.createElement(y.a,{onSubmit:this.onSubmit},o.a.createElement(ne.a,null,"\u5355\u5143\u683c"),o.a.createElement(y.a.Item,{style:{padding:"0 24px"},label:"style\u8bbe\u7f6e"},l.getFieldDecorator("cellStyles",{initialValue:m})(o.a.createElement(ye,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),o.a.createElement(y.a.Item,{key:"cell-colSpan",label:"\u8de8\u5217\u8bbe\u7f6e",style:{padding:"0 24px"}},l.getFieldDecorator("originSpan",{initialValue:s})(o.a.createElement(j.a,null,c.map(function(e,t){return o.a.createElement(ge,{key:"".concat(e,"-").concat(t),value:t+1},"".concat(t+1,"\u5217"))})))),o.a.createElement("div",{className:"btn-box"},o.a.createElement(E.a,{onClick:r},"\u5220\u9664\u5355\u5143\u683c")),this.renderContent(),o.a.createElement("div",{className:"btn-bottom-box"},o.a.createElement(E.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"))))}}]),t}(l.Component),Ce=y.a.create()(Ee),Oe=(n(381),"form-drop-container"),xe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={dropComponent:!1,formItemConfig:{colSpan:e.colSpan,colIndex:e.colIndex,originSpan:e.originSpan,cellStyles:e.cellStyles||{}},visible:!1},n.onUpdateConfig=n.onUpdateConfig.bind(Object(p.a)(Object(p.a)(n))),n.onShowEditItem=n.onShowEditItem.bind(Object(p.a)(Object(p.a)(n))),n.onEditDropContainer=n.onEditDropContainer.bind(Object(p.a)(Object(p.a)(n))),n.onDrop=n.onDrop.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteCol=n.onDeleteCol.bind(Object(p.a)(Object(p.a)(n))),n.onClose=n.onClose.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.colSpan!==this.props.colSpan||e.colIndex!==this.props.colIndex){var t=Object.assign({},this.state.formItemConfig,{colSpan:e.colSpan,colIndex:e.colIndex,originSpan:e.originSpan,cellStyles:e.cellStyles});this.setState({formItemConfig:t})}}},{key:"onShowEditItem",value:function(){this.setState({visible:!0})}},{key:"onDrop",value:function(e){if(e.preventDefault(),e.target.className===Oe){var t=JSON.parse(e.dataTransfer.getData("text/plain")).type,n=this.props,a=n.colIndex,l=n.onUpdateConfigs,o={type:t,colSpan:this.props.colSpan,originSpan:this.props.originSpan,cellStyles:this.props.cellStyles,label:"label",name:"name-".concat(a),colIndex:a};"Button"===t&&(delete o.label,delete o.name,o.type="Btn",o.btnArr=[{btnText:"button",type:"primary",index:0}]),this.setState({formItemConfig:o,dropComponent:!0},function(){l(o)}),this.resetBg()}}},{key:"onDeleteCol",value:function(e){e&&e.stopPropagation();var t=this.props,n=t.onUpdateConfigs,a=t.colIndex,l=this.state.formItemConfig;this.setState({formItemConfig:{colSpan:l.colSpan,originSpan:l.originSpan,colIndex:a},dropComponent:!1}),n({colIndex:a,deleteFlag:!0})}},{key:"resetBg",value:function(){var e=document.querySelectorAll(".".concat(Oe));e&&e.forEach(function(e){e.style.background=""})}},{key:"onDragenter",value:function(e){e.target.className===Oe&&(e.target.style.background="#dde7f1")}},{key:"componentWillUnmount",value:function(){this.targetDom&&(this.targetDom.removeEventListener("drop",this.onDrop),this.targetDom.removeEventListener("dragenter",this.onDragenter))}},{key:"componentDidMount",value:function(){this.targetDom&&(this.targetDom.addEventListener("drop",this.onDrop,!1),this.targetDom.addEventListener("dragenter",this.onDragenter,!1))}},{key:"onUpdateConfig",value:function(e){var t=this,n=this.state.formItemConfig,a=null;a=e.deleteFlag?{colIndex:e.colIndex,colSpan:e.colSpan,originSpan:e.originSpan,cellStyles:e.cellStyles}:Object.assign({},n,e),this.setState({formItemConfig:a,dropComponent:!e.deleteFlag},function(){(0,t.props.onUpdateConfigs)(a),t.onClose()})}},{key:"onEditDropContainer",value:function(e){e.target.className===Oe&&(e&&e.stopPropagation(),this.setState({visible:!0}))}},{key:"onClose",value:function(){this.setState({visible:!1})}},{key:"getContainerWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return"".concat(100*e/24,"%")}},{key:"render",value:function(){var e=this,t=this.state,n=t.dropComponent,a=t.formItemConfig,l=void 0===a?{}:a,r=t.visible,i=this.props,c=i.layoutColumn,s=i.onDeleteFormItemContainer,u=i.colIndex,d=i.configs,m=+u,p=Object.hasOwnProperty.call(l,"colSpan")?l.colSpan:24/c;return o.a.createElement("div",{className:Oe,style:{width:this.getContainerWidth(p,c)},ref:function(t){e.targetDom=t}},n?o.a.createElement(pe,Object.assign({},this.props,{formItemConfig:l})):null,o.a.createElement(F.a,{type:"bars",className:"icon-operation",onClick:this.onShowEditItem}),o.a.createElement(Ce,{visible:r,onDelete:this.onDeleteCol,onUpdateConfigs:this.onUpdateConfig,colSpanArr:d.colSpanArr,formItemArr:d.formItemArr,formItemConfig:l,dropComponent:n,layoutColumn:c,onDeleteFormItemContainer:function(){e.setState({visible:!1},function(){s(m)})},onClose:this.onClose}))}}]),t}(l.PureComponent),ke=(n(382),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1,configs:{layoutColumn:1,formItemArr:[]}},n.onShowEditForm=n.onShowEditForm.bind(Object(p.a)(Object(p.a)(n))),n.onCloseEditForm=n.onCloseEditForm.bind(Object(p.a)(Object(p.a)(n))),n.renderFormItemContainer=n.renderFormItemContainer.bind(Object(p.a)(Object(p.a)(n))),n.onAddRow=n.onAddRow.bind(Object(p.a)(Object(p.a)(n))),n.onAddRowCell=n.onAddRowCell.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteRow=n.onDeleteRow.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteContainer=n.onDeleteContainer.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteFormItemContainer=n.onDeleteFormItemContainer.bind(Object(p.a)(Object(p.a)(n))),n.onUpdateConfigs=n.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(n))),n.colIndexStart=0,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onShowEditForm",value:function(){this.setState({visible:!0})}},{key:"onCloseEditForm",value:function(e){var t={visible:!1},n=e.layoutColumn,a=e.colSpanArr,l=+n;if(l){var o=this.state.configs.formItemArr.slice();if(0===o.length)for(var r=0;r<l;r++)o.push({colIndex:this.colIndexStart+r,colSpan:a[r],originSpan:1});else o.forEach(function(e){e.colSpan=ue(e.colIndex,e.originSpan,o,a)});this.colIndexStart+=l,e.layoutColumn=l,e.formItemArr=o,t.configs=e}this.setState(Object(k.a)({},t))}},{key:"onAddRowCell",value:function(){var e=this,t=this.state.configs,n=t.colSpanArr,a=t.formItemArr.slice();if(0!==a.length){for(var l=a.reduce(function(e,t,n){return e+=t.colSpan,n===a.length-1&&(e%=24),e},0),o=0,r=0,i=0;i<n.length;i++)(r+=+n[i])>l&&(o=i,i=n.length);a.push({colIndex:this.colIndexStart,originSpan:1,colSpan:n[o]}),this.colIndexStart+=1;var c=Object.assign({},t);c.formItemArr=a,this.setState({configs:c},function(){var t=e.props;(0,t.onUpdateLayoutConfig)({layoutIndex:t.layoutIndex,configs:c})})}else G.a.warn("\u8bf7\u8bbe\u7f6e\u5bb9\u5668\u5217\u6570")}},{key:"onAddRow",value:function(){var e=this,t=this.state.configs,n=t.formItemArr.slice();if(0!==n.length){for(var a=t.layoutColumn,l=0;l<a;l++)n.push({colIndex:this.colIndexStart+l});this.colIndexStart+=a;var o=Object.assign({},t);o.formItemArr=n,this.setState({configs:o},function(){var t=e.props;(0,t.onUpdateLayoutConfig)({layoutIndex:t.layoutIndex,configs:o})})}else G.a.warn("\u8bf7\u8bbe\u7f6e\u5bb9\u5668\u5217\u6570")}},{key:"onDeleteRow",value:function(){var e=this,t=this.state.configs,n=t.layoutColumn,a=t.formItemArr,l=Object.assign({},t),o=a.slice();o.length<=n?G.a.warn("\u4e0d\u80fd\u518d\u5220\u9664\u4e86"):(o.length=Math.max(0,o.length-n),l.formItemArr=o,this.setState({configs:l},function(){var t=e.props;(0,t.onUpdateLayoutConfig)({layoutIndex:t.layoutIndex,newConfigs:l})}))}},{key:"onDeleteContainer",value:function(){var e=this.props;(0,e.onUpdateLayoutConfig)({layoutIndex:e.layoutIndex,deleteFlag:!0})}},{key:"onDeleteFormItemContainer",value:function(e){var t=this,n=this.state.configs,a=n.formItemArr,l=Object.assign({},n),o=a.filter(function(t){return t.colIndex!==e});l.formItemArr=o,this.setState({configs:l},function(){var e=t.props;(0,e.onUpdateLayoutConfig)({layoutIndex:e.layoutIndex,configs:l})})}},{key:"onUpdateConfigs",value:function(e){var t=e.deleteFlag,n=void 0!==t&&t,a=Object(x.a)(e,["deleteFlag"]),l=this.state.configs,o=l.formItemArr,r=l.colSpanArr,i=Object.assign({},l),c=this.props,s=c.onUpdateLayoutConfig,u=c.layoutIndex,d=o.reduce(function(e,t){return n?a.colIndex!==t.colIndex?e.push(Object.assign({},t)):e.push({colIndex:a.colIndex,colSpan:a.colSpan,originSpan:a.originSpan}):a.colIndex===t.colIndex?e.push(Object.assign({},t,a)):e.push(Object.assign({},t)),e},[]);d.forEach(function(e){e.colIndex>a.colIndex&&(e.colSpan=ue(e.colIndex,e.originSpan,d,r))}),i.formItemArr=d,this.setState({configs:i},function(){s({layoutIndex:u,configs:i})})}},{key:"renderFormItemContainer",value:function(){var e=this,t=this.state.configs,n=t.formItemArr,a=t.layoutColumn;return n.map(function(t){var n=t.colIndex,l=t.colSpan,r=t.originSpan,i=t.cellStyles;return o.a.createElement(xe,Object.assign({key:"ed-".concat(n),colIndex:n},e.props,{colSpan:l,originSpan:r,layoutColumn:a,cellStyles:i,onDeleteFormItemContainer:e.onDeleteFormItemContainer,onUpdateConfigs:e.onUpdateConfigs}))})}},{key:"render",value:function(){var e=this,t=this.state,n=t.visible,a=t.configs,r=this.props,i=r.layoutIndex,c=r.onUpdateLayoutConfig,s=a.layoutColumn,u=a.formItemArr;return o.a.createElement(l.Fragment,null,o.a.createElement("div",{className:"form-container container"},o.a.createElement("div",{className:"inner-box"},o.a.createElement(y.a,null,o.a.createElement(S.a,{gutter:{md:24/s,lg:24,xl:48}},this.renderFormItemContainer())),u.length>0?o.a.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},o.a.createElement(E.a,{onClick:this.onAddRowCell},"\u65b0\u589e\u5355\u5143\u683c")):null),o.a.createElement(F.a,{type:"form",className:"icon-operation",onClick:this.onShowEditForm})),o.a.createElement(re,{visible:n,onDeleteContainer:this.onDeleteContainer,onClose:function(t){var n=t.layoutColumn;(e.onCloseEditForm(t),n)&&c({layoutIndex:i,configs:t})}}))}}]),t}(l.PureComponent)),je=y.a.create()(ke),Ie=n(195),Se=n(108),De=(n(383),be.a.Panel),we=j.a.Option,Ae={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},Fe={0:!1,1:!0},Te=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={configs:e.configs},n.setColumnMaxIndex(e),n.onSubmit=n.onSubmit.bind(Object(p.a)(Object(p.a)(n))),n.onAddOperation=n.onAddOperation.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteOperation=n.onDeleteOperation.bind(Object(p.a)(Object(p.a)(n))),n.onAddColumn=n.onAddColumn.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteColumn=n.onDeleteColumn.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.visible!==this.props.visible&&e.visible&&(this.setState({configs:e.configs}),this.setColumnMaxIndex(e),this.setOperationMaxIndex(e))}},{key:"setColumnMaxIndex",value:function(e){var t=e.configs.columns,n=void 0===t?[]:t;this.columnMaxIndex=n.length||0}},{key:"setOperationMaxIndex",value:function(e){var t=e.configs.operationArr,n=void 0===t?[]:t;this.operationMaxIndex=n.length||0}},{key:"addColumnMaxIndex",value:function(){this.columnMaxIndex+=1}},{key:"addOperationMaxIndex",value:function(){this.operationMaxIndex+=1}},{key:"onAddOperation",value:function(){var e=this.state.configs.operationArr,t=(void 0===e?[]:e).slice(),n=this.operationMaxIndex;t.push({opText:"\u64cd\u4f5c",index:n}),this.setState({configs:this.getNewConfigs("operationArr",t)}),this.addOperationMaxIndex()}},{key:"onAddColumn",value:function(){var e=this.state.configs.columns.slice(),t=this.columnMaxIndex;e.push({title:"column".concat(t),dataIndex:"dataIndex".concat(t),index:t}),this.setState({configs:this.getNewConfigs("columns",e)}),this.addColumnMaxIndex()}},{key:"onDeleteOperation",value:function(e){var t=this.state.configs,n=t.operationArr.reduce(function(t,n){return n.index!==e&&t.push(Object.assign({},n)),t},[]);Object.assign({},t).operationArr=n,this.setState({configs:this.getNewConfigs("operationArr",n)})}},{key:"onDeleteColumn",value:function(e){var t=this.state.configs,n=t.columns.reduce(function(t,n){return n.index!==e&&t.push(Object.assign({},n)),t},[]);Object.assign({},t).columns=n,this.setState({configs:this.getNewConfigs("columns",n)})}},{key:"getNewConfigs",value:function(e,t){var n=this.state.configs,a=Object.assign({},n);return a[e]=t,a}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,n){if(!e){var a={},l=t.state.configs;if("1"===n.hasOperation){for(var o=l.operationArr,r=[],i=0;i<o.length;i++){var c=o[i].index,s=n["opText-".concat(c)],u=n["opType-".concat(c)];r.push({opText:s,opType:u,index:i}),delete n[s],delete n[u]}a.operationArr=r}var d=l.columns.slice();Object.keys(n).forEach(function(e){var t=n[e];if(e.indexOf("-")>0){var l=e.split("-"),o=Object(ie.a)(l,2),r=o[0],i=o[1],c=d.find(function(e){return e.index===+i});c&&(c[r]=t,"width"!==r||t||delete c.width,"fixed"===r&&(c[r]=Fe[t]))}else"pagination"===e?"1"===t?a.pagination={pageSize:n.pageSize,pageSizeOptions:n.pageSizeOptions.split(",")}:a[e]=Fe[t]:"rowSelection"===e?"1"===t?(a.rowSelection={type:n.type},"radio"===n.type&&(a.rowSelection.columnTitle=n.columnTitle)):a[e]=null:a[e]=t}),delete a.pageSize,delete a.pageSizeOptions,delete a.type,delete a.columnTitle,a.columns=d,t.props.onUpdateConfigs(a)}})}},{key:"renderPanelHeader",value:function(e){var t=this,n=e.title,a=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},n),o.a.createElement(F.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteColumn(a)}}))}},{key:"renderOperationHeader",value:function(e){var t=this,n=e.opText,a=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},n),o.a.createElement(F.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteOperation(a)}}))}},{key:"renderCollapse",value:function(){var e=this,t=this.props.form,n=this.state.configs.columns,a=void 0===n?[]:n,l=t.getFieldDecorator;return o.a.createElement(be.a,null,a.map(function(t,n){var a=t.title,r=t.index,i=t.dataIndex,c=t.width,s=t.align,u=void 0===s?"left":s,d=t.fixed,m=void 0!==d&&d;return o.a.createElement(De,{header:e.renderPanelHeader(t),key:"".concat(a,"-").concat(r)},o.a.createElement(y.a.Item,Object.assign({label:"title"},Ae),l("title-".concat(r),{rules:[{required:!0,message:"\u8bf7\u8f93\u5165title!"}],initialValue:a})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({label:"dataIndex"},Ae),l("dataIndex-".concat(r),{rules:[{required:!0,message:"dataIndex!"}],initialValue:i})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({label:"width"},Ae),l("width-".concat(r),{initialValue:c||""},{rules:[{pattern:/^\d+(%)?$/,message:"\u8bf7\u8f93\u5165\u6570\u5b57\u6216\u8005\u767e\u5206\u6bd4!"}]})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({label:"align"},Ae),l("align-".concat(r),{initialValue:u})(o.a.createElement(j.a,null,o.a.createElement(we,{value:"left"},"left"),o.a.createElement(we,{value:"right"},"right"),o.a.createElement(we,{value:"center"},"center")))),o.a.createElement(y.a.Item,Object.assign({label:"fixed"},Ae),l("fixed-".concat(r),{initialValue:m?"1":"0"})(o.a.createElement(j.a,null,o.a.createElement(we,{value:"0"},"false"),o.a.createElement(we,{value:"1"},"true")))))}))}},{key:"renderTableProps",value:function(){var e=this,t=this.props.form,n=this.state.configs,a=n.operationArr,r=void 0===a?[]:a,i=t.getFieldDecorator,c=n.pagination,s=n.rowSelection,u=n.hasOperation,d=void 0===u?"0":u,m=c||{},p=m.pageSize,b=void 0===p?10:p,f=m.pageSizeOptions,h=void 0===f?"10,20,30":f,g=s||{},C=g.type,O=void 0===C?"checkbox":C,x=g.columnTitle,k=void 0===x?"\u9009\u62e9":x,I=Object.keys(c||{}).length>0?"1":"0",S=Object.keys(s||{}).length>0?"1":"0";return o.a.createElement(l.Fragment,null,o.a.createElement(y.a.Item,Object.assign({label:"\u64cd\u4f5c\u5217"},Ae),i("hasOperation",{initialValue:d})(o.a.createElement(j.a,null,o.a.createElement(we,{value:"0"},"\u65e0"),o.a.createElement(we,{value:"1"},"\u6709")))),"1"===t.getFieldValue("hasOperation")?[o.a.createElement(be.a,{key:"op-collapse"},r.map(function(t){var n=t.index,a=t.opText,l=t.opType;return o.a.createElement(De,{header:e.renderOperationHeader(t),key:"op-".concat(n)},o.a.createElement(y.a.Item,Object.assign({label:"\u6587\u5b57"},Ae),i("opText-".concat(n),{initialValue:a})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({label:"\u7c7b\u578b"},Ae),i("opType-".concat(n),{initialValue:l})(o.a.createElement(j.a,null,o.a.createElement(we,{value:"edit"},"\u7f16\u8f91"),o.a.createElement(we,{value:"view"},"\u67e5\u770b"),o.a.createElement(we,{value:"delete"},"\u5220\u9664"),o.a.createElement(we,{value:"other"},"\u5176\u4ed6")))))})),o.a.createElement(l.Fragment,{key:"op-collapse-btns"},"1"===t.getFieldValue("hasOperation")?o.a.createElement("div",{className:"btn-add-box"},o.a.createElement(E.a,{type:"dashed",size:"large",onClick:this.onAddOperation},"\u6dfb\u52a0\u64cd\u4f5c\u9879")):null)]:null,o.a.createElement(y.a.Item,Object.assign({label:"pagination"},Ae),i("pagination",{initialValue:I})(o.a.createElement(j.a,null,o.a.createElement(we,{value:"0"},"false"),o.a.createElement(we,{value:"1"},"true")))),"1"===t.getFieldValue("pagination")?o.a.createElement(fe.a,{title:"pagination\u914d\u7f6e"},o.a.createElement(y.a.Item,Object.assign({label:"pageSize"},Ae),i("pageSize",{initialValue:b})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({label:"pageSizeOptions"},Ae),i("pageSizeOptions",{initialValue:Array.isArray(h)?h.join(","):h})(o.a.createElement(j.a,null,o.a.createElement(we,{value:"10,20,30"},"10,20,30"),o.a.createElement(we,{value:"10,20,30,40"},"10,20,30,40"),o.a.createElement(we,{value:"20,30,40"},"20,30,40"))))):null,o.a.createElement(y.a.Item,Object.assign({label:"rowSelection"},Ae),i("rowSelection",{initialValue:S})(o.a.createElement(j.a,null,o.a.createElement(we,{value:"0"},"false"),o.a.createElement(we,{value:"1"},"true")))),"1"===t.getFieldValue("rowSelection")?o.a.createElement(fe.a,{title:"rowSelection\u914d\u7f6e"},o.a.createElement(y.a.Item,Object.assign({label:"type"},Ae),i("type",{initialValue:O})(o.a.createElement(j.a,null,o.a.createElement(we,{value:"checkbox"},"checkbox"),o.a.createElement(we,{value:"radio"},"radio")))),"radio"===t.getFieldValue("type")?o.a.createElement(y.a.Item,Object.assign({label:"columnTitle"},Ae),i("columnTitle",{initialValue:k})(o.a.createElement(v.a,null))):null):null)}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.onClose,a=e.onDeleteContainer;return o.a.createElement(te.a,{title:"\u8868\u683c\u7f16\u8f91",width:420,onClose:n,visible:t},o.a.createElement(y.a,{onSubmit:this.onSubmit},o.a.createElement(ne.a,null,"\u8868\u5934"),this.renderCollapse(),o.a.createElement("div",{className:"btn-add-box"},o.a.createElement(E.a,{type:"dashed",size:"large",onClick:this.onAddColumn},"\u6dfb\u52a0\u8868\u5934\u5217")),o.a.createElement(ne.a,null,"\u8868\u683c\u5c5e\u6027"),this.renderTableProps(),o.a.createElement(y.a.Item,{style:{marginTop:"20px",textAlign:"center"}},o.a.createElement(E.a,{type:"primary",htmlType:"submit",style:{marginRight:"10px"}},"\u786e\u5b9a"),o.a.createElement(E.a,{onClick:a},"\u5220\u9664\u5bb9\u5668"))))}}]),t}(l.PureComponent),Ve=y.a.create()(Te),Pe=(n(384),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1},n.onShowEditTable=n.onShowEditTable.bind(Object(p.a)(Object(p.a)(n))),n.onClose=n.onClose.bind(Object(p.a)(Object(p.a)(n))),n.onUpdateConfigs=n.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteContainer=n.onDeleteContainer.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onShowEditTable",value:function(){this.setState({visible:!0})}},{key:"onClose",value:function(e){e.stopPropagation(),this.setState({visible:!1})}},{key:"onUpdateConfigs",value:function(e){var t=this.props,n=t.layoutIndex;(0,t.onUpdateLayoutConfig)({layoutIndex:n,configs:e}),this.setState({visible:!1})}},{key:"onDeleteContainer",value:function(){var e=this.props,t=e.layoutIndex;(0,e.onUpdateLayoutConfig)({layoutIndex:t,deleteFlag:!0})}},{key:"renderMoreOpList",value:function(e){return o.a.createElement("span",{style:{background:"#fff",display:"block"}},e.map(function(e){var t=e.opText,n=e.index;return o.a.createElement("a",{href:"\xa0",key:"op-".concat(n),style:{display:"block"}},t)}))}},{key:"renderMultOperation",value:function(e){var t=Object(Ie.a)(e),n=t[0],a=t.slice(1);return o.a.createElement(l.Fragment,null,o.a.createElement("a",{href:"\xa0"},n.opText),o.a.createElement(ne.a,{type:"vertical"}),o.a.createElement(Se.a,{overlay:this.renderMoreOpList(a)},o.a.createElement("a",{className:"ant-dropdown-link",href:"\xa0"},"\u66f4\u591a",o.a.createElement(F.a,{type:"down"}))))}},{key:"render",value:function(){var e=this,t=this.state.visible,n=this.props.configs,a=void 0===n?{}:n,r=a.hasOperation,i=a.pagination,c=void 0!==i&&i,s=a.rowSelection,u=void 0===s?null:s,d=a.operationArr,m=void 0===d?[]:d,p=a.columns.slice();return r===ee&&p.push({title:"\u64cd\u4f5c",render:function(){return Array.isArray(m)?m.length>2?o.a.createElement("span",null,e.renderMultOperation(m)):o.a.createElement("span",null,m.map(function(e,t){var n=e.opText,a=e.index;return o.a.createElement(l.Fragment,{key:"fr-".concat(a)},o.a.createElement("a",{href:"\xa0",key:"op-".concat(a)},n),",",t!==m.length-1?o.a.createElement(ne.a,{type:"vertical"}):null)})):null}}),o.a.createElement("div",{className:"table-container container"},o.a.createElement(T.a,{columns:p,bordered:!0,dataSource:[],pagination:c,rowSelection:u,onClick:this.onShowEditTable}),o.a.createElement(Ve,{visible:t,configs:a,onClose:this.onClose,onDeleteContainer:this.onDeleteContainer,onUpdateConfigs:this.onUpdateConfigs}),o.a.createElement(F.a,{type:"form",className:"icon-operation",onClick:this.onShowEditTable}))}}]),t}(l.PureComponent)),Ne=n(408),Be=j.a.Option,Le=I.a.RangePicker,Ue=function(e){var t=e.breadcrumb,n=void 0===t?[]:t,a=e.style;return o.a.createElement(Ne.a,{style:a},n.map(function(e,t){var n=e.text,a=e.linkUrl;return o.a.createElement(Ne.a.Item,{key:"breadcrumb-".concat(t)},a?o.a.createElement("a",{href:a},n):o.a.createElement("span",null,n))}))},Me=function(e){var t=e.text,n=e.style;return o.a.createElement("span",{style:n},t)},Re=function(e){var t=e.style,n=void 0===t?{}:t,a=e.options,l=void 0===a?[]:a;return o.a.createElement(j.a,{style:Object(k.a)({width:"100%"},n)},Array.isArray(l)?l.map(function(e){var t=e.key,n=e.optionValue,a=e.optionText;return o.a.createElement(Be,{key:t||n,value:n},a)}):null)},ze=function(){return o.a.createElement(I.a,{style:{width:"100%"}})},He=function(){return o.a.createElement(Le,{style:{width:"100%"}})},Ye=function(e){var t=e.btnArr;return o.a.createElement(l.Fragment,null,t.map(function(e){var t=e.btnText,n=void 0===t?"button":t,a=(e.expandFlag,e.expandCount,e.style),l=void 0===a?{}:a,r=e.index,i=Object(x.a)(e,["btnText","expandFlag","expandCount","style","index"]);return o.a.createElement(E.a,Object.assign({key:"btn-".concat(r),style:l},i),n)}))},_e=function(e){var t=e.placeholder,n=e.type,a=null;switch(void 0===n?"Input":n){case"Text":a=Me(e);break;case"Breadcrumb":a=Ue(e);break;case"Select":a=Re(e);break;case"RangePicker":a=He(e);break;case"DatePicker":a=ze(e);break;case"Btn":a=Ye(e);break;default:a=o.a.createElement(v.a,{placeholder:t})}return a},qe=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.dropConfig,t=void 0===e?{}:e,n=t.cellStyles;return o.a.createElement("div",{style:n},_e(t))}}]),t}(l.PureComponent),We=(n(385),be.a.Panel),Je=j.a.Option,Ge=v.a.TextArea,$e=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={options:[],breadcrumb:[]},n.handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n.onAddOptionItem=n.onAddOptionItem.bind(Object(p.a)(Object(p.a)(n))),n.onAddBreadcrumbItem=n.onAddBreadcrumbItem.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteComponent=n.onDeleteComponent.bind(Object(p.a)(Object(p.a)(n))),n.onAddButton=n.onAddButton.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteBreadcrumbItem=n.onDeleteBreadcrumbItem.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteOptionItem=n.onDeleteOptionItem.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteButton=n.onDeleteButton.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.dropConfig,n=t.type,a=t.options,l=t.btnArr,o=t.breadcrumb;"Option"!==n||this.initOptions||(this.setState({options:a}),this.optionIndex=a.length,this.initOptions=!0),"Btn"!==n||this.initBtn||(this.setState({btnArr:l}),this.btnIndex=l.length,this.initBtn=!0),"Breadcrumb"!==n||this.initBreadcrumb||(this.setState({breadcrumb:o}),this.breadcrumbIndex=o.length,this.initBreadcrumb=!0)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.options,a=t.btnArr,l=t.breadcrumb,o=this.props,r=o.form,i=o.onUpdateConfigs,c=o.dropConfig;r.validateFields(function(e,t){if(!e){var o=Object.assign({},c,t);if(o.cellStyles=ce(t.cellStyles),"Select"===o.type){var r=n.slice();r.forEach(function(e){var n=e.index,a="optionText-".concat(n),l="optionValue-".concat(n);e.optionText=t[a],e.optionValue=t[l],delete o[a],delete o[l]}),o.options=r}else if("DatePicker"===o.type)o.defaultValue=t.defaultValue&&t.defaultValue.format("YYYY-MM-DD");else if("Btn"===o.type){var s=a.slice();s.forEach(function(e){var n=e.index,a="btnText-".concat(n),l="type-".concat(n),r="htmlType-".concat(n),i="onClick-".concat(n),c="expandFlag-".concat(n),s="btnStyle-".concat(n);e.btnText=t[a],e.type=t[l],e.htmlType=t[r],e.expandFlag=t[c],e.style=ce(t[s]),"submit"!==e.htmlType&&(e.onClick=t[i]);var u="expandCount-".concat(n);c===ee&&(e.expandCount=t[u]),delete o[s],delete o[u],delete o[c],delete o[i],delete o[r],delete o[a],delete o[l]}),o.btnArr=s}else if("Breadcrumb"===o.type){var u=l.slice();u.forEach(function(e){var n=e.index,a="breadcrumbLinkUrl-".concat(n),l="breadcrumbText-".concat(n);e.linkUrl=t[a],e.text=t[l],delete o[a],delete o[l]}),o.breadcrumb=u}i(o)}})}},{key:"onAddOptionItem",value:function(){var e=this.state.options,t=(void 0===e?[]:e).slice();t.push({value:"",text:"",index:this.optionIndex}),this.setState({options:t}),this.optionIndex+=1}},{key:"onAddBreadcrumbItem",value:function(){var e=this.state.breadcrumb,t=(void 0===e?[]:e).slice();t.push({text:"",linkUrl:"",index:this.breadcrumbIndex}),this.setState({breadcrumb:t}),this.breadcrumbIndex+=1}},{key:"onAddButton",value:function(){var e=this.state.btnArr.slice();e.push({btnText:"button",type:"primary",index:this.btnIndex}),this.setState({btnArr:e}),this.btnIndex+=1}},{key:"onDeleteButton",value:function(e){var t=this.state.btnArr,n=(void 0===t?[]:t).reduce(function(t,n){return n.index!==e&&t.push(n),t},[]);this.setState({btnArr:n})}},{key:"onDeleteOptionItem",value:function(e){var t=this.state.options,n=(void 0===t?[]:t).reduce(function(t,n){return n.index!==e&&t.push(n),t},[]);this.setState({options:n})}},{key:"onDeleteBreadcrumbItem",value:function(e){var t=this.state.breadcrumb,n=(void 0===t?[]:t).reduce(function(t,n){return n.index!==e&&t.push(n),t},[]);this.setState({breadcrumb:n})}},{key:"onDeleteComponent",value:function(){var e=this.props,t=e.onUpdateConfigs,n=e.dropConfig;t(Object.assign({},n,{deleteFlag:!0}))}},{key:"renderOptionsCard",value:function(){var e=this,t=this.props.form,n=this.state.options;return o.a.createElement(fe.a,{title:"option\u8bbe\u7f6e",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddOptionItem})},n.map(function(n){var a=n.value,r=n.text,i=n.index;return o.a.createElement(l.Fragment,{key:"optionitem-".concat(i)},o.a.createElement(y.a.Item,{key:"optionitem-value-".concat(i),style:{width:"45%",display:"inline-block"}},t.getFieldDecorator("optionValue-".concat(i),{initialValue:a})(o.a.createElement(v.a,{placeholder:"value"}))),o.a.createElement(y.a.Item,{key:"optionitem-text-".concat(i),style:{width:"45%",display:"inline-block",marginLeft:"10px"}},t.getFieldDecorator("optionText-".concat(i),{initialValue:r})(o.a.createElement(v.a,{placeholder:"show text"}))),o.a.createElement(F.a,{type:"close-circle",style:{marginLeft:"6px",lineHeight:"39px"},onClick:function(){e.onDeleteOptionItem(i)}}))}))}},{key:"renderPanelHeader",value:function(e){var t=this,n=e.btnText,a=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},n),o.a.createElement(F.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteButton(a)}}))}},{key:"renderBtnCard",value:function(){var e=this,t=this.props,n=t.dropConfig,a=t.form,l=n.type,r=this.state.btnArr;return"Btn"===l?o.a.createElement(fe.a,{title:"\u6309\u94ae\u533a\u57df",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddButton})},o.a.createElement(be.a,null,r.map(function(t){var n=t.index,l=t.btnText,r=t.type,i=t.htmlType,c=void 0===i?"button":i,s=t.onClick,u=t.btnStyle;return o.a.createElement(We,{header:e.renderPanelHeader(t),key:"btn-".concat(n)},o.a.createElement(y.a.Item,Object.assign({key:"btnText-".concat(n),label:"\u6309\u94ae\u6587\u5b57"},ae),a.getFieldDecorator("btnText-".concat(n),{initialValue:l})(o.a.createElement(v.a,{placeholder:"btnText"}))),o.a.createElement(y.a.Item,Object.assign({key:"type-".concat(n),label:"type"},ae),a.getFieldDecorator("type-".concat(n),{initialValue:r})(o.a.createElement(j.a,null,o.a.createElement(Je,{value:"primary"},"primary"),o.a.createElement(Je,{value:"dashed"},"dashed"),o.a.createElement(Je,{value:"danger"},"danger"),o.a.createElement(Je,{value:""},"none")))),o.a.createElement(y.a.Item,Object.assign({key:"htmlType-".concat(n),label:"htmlType"},ae),a.getFieldDecorator("htmlType-".concat(n),{initialValue:c})(o.a.createElement(j.a,null,o.a.createElement(Je,{value:"submit"},"submit"),o.a.createElement(Je,{value:"reset"},"reset"),o.a.createElement(Je,{value:"button"},"button")))),o.a.createElement(y.a.Item,Object.assign({key:"onClick-".concat(n),label:"onClick"},ae),a.getFieldDecorator("onClick-".concat(n),{initialValue:s})(o.a.createElement(v.a,{placeholder:"\u70b9\u51fb\u4e8b\u4ef6\u540d\u79f0"}))),o.a.createElement(y.a.Item,Object.assign({key:"btnStyle-".concat(n),label:"\u6309\u94ae\u6837\u5f0f"},ae),a.getFieldDecorator("btnStyle-".concat(n),{initialValue:u})(o.a.createElement(Ge,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))))}))):null}},{key:"renderBreadcrumb",value:function(){var e=this,t=this.props.form,n=this.state.breadcrumb;return o.a.createElement(fe.a,{title:"\u9762\u5305\u5c51\u8bbe\u7f6e",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddBreadcrumbItem})},n.map(function(n){var a=n.text,r=n.linkUrl,i=n.index;return o.a.createElement(l.Fragment,{key:"breadcrumb-item-".concat(i)},o.a.createElement(y.a.Item,{key:"breadcrumbitem-value-".concat(i),style:{width:"45%",display:"inline-block"}},t.getFieldDecorator("breadcrumbText-".concat(i),{initialValue:a})(o.a.createElement(v.a,{placeholder:"\u5bfc\u822a\u540d\u79f0"}))),o.a.createElement(y.a.Item,{key:"breadcrumbitem-text-".concat(i),style:{width:"45%",display:"inline-block",marginLeft:"10px"}},t.getFieldDecorator("breadcrumbLinkUrl-".concat(i),{initialValue:r})(o.a.createElement(v.a,{placeholder:"\u5bfc\u822a\u94fe\u63a5"}))),o.a.createElement(F.a,{type:"close-circle",style:{marginLeft:"6px",lineHeight:"39px"},onClick:function(){e.onDeleteBreadcrumbItem(i)}}))}))}},{key:"renderDefaultValueItem",value:function(){var e=this.props,t=e.dropConfig,n=e.form,a=t.type,l=t.defaultValue,r=t.text,i=n.getFieldDecorator,c=this.state.options;return"Select"===a?o.a.createElement(y.a.Item,Object.assign({},ae,{label:"defaultValue"}),i("defaultValue",{initialValue:l})(o.a.createElement(j.a,null,c.map(function(e){var t=e.index,a=n.getFieldValue("optionValue-".concat(t)),l=n.getFieldValue("optionText-".concat(t));return o.a.createElement(Je,{value:a,key:"op-".concat(t)},"".concat(a,"/").concat(l))})))):"Text"===a?o.a.createElement(y.a.Item,Object.assign({},ae,{label:"\u6587\u5b57"}),i("text",{initialValue:r})(o.a.createElement(v.a,null))):"DatePicker"===a?o.a.createElement(y.a.Item,Object.assign({},ae,{label:"defaultValue"}),i("defaultValue",{initialValue:l})(o.a.createElement(I.a,{style:{width:"100%"}}))):"Input"===a?o.a.createElement(y.a.Item,Object.assign({},ae,{label:"defaultValue"}),i("defaultValue",{initialValue:l})(o.a.createElement(v.a,null))):null}},{key:"renderContent",value:function(){var e=this.props,t=e.form,n=e.dropConfig,a=n.placeholder,r=n.type,i=t.getFieldDecorator;return"Btn"===r?this.renderBtnCard():"Breadcrumb"===r?this.renderBreadcrumb():o.a.createElement(l.Fragment,null,this.renderDefaultValueItem(),"Text"!==r&&"Breadcrumb"!==r?o.a.createElement(y.a.Item,Object.assign({},ae,{label:"placeholder"}),i("placeholder",{initialValue:a})(o.a.createElement(v.a,null))):null,"Select"===r?this.renderOptionsCard():null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.onClose,l=t.form,r=t.dropConfig,i=se(r.cellStyles);return o.a.createElement(te.a,{visible:n,title:"\u7f16\u8f91\u7ec4\u4ef6",onClose:function(){e.initOptions=!1,e.initBtn=!1,e.initBreadcrumb=!1,a()},width:420},o.a.createElement(y.a,{onSubmit:this.handleSubmit},o.a.createElement(y.a.Item,Object.assign({label:"style\u8bbe\u7f6e"},ae),l.getFieldDecorator("cellStyles",{initialValue:i})(o.a.createElement(Ge,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),this.renderContent(),o.a.createElement("div",{className:"btn-box"},o.a.createElement(E.a,{onClick:this.onDeleteComponent},"\u5220\u9664\u7ec4\u4ef6")),o.a.createElement("div",{className:"btn-bottom-box"},o.a.createElement(E.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"))))}}]),t}(l.Component),Ke=y.a.create()($e),Qe=(n(386),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={dropConfig:{},showEdit:!1,dropComponent:!1},n.onUpdateConfigs=n.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(n))),n.onToggleEdit=n.onToggleEdit.bind(Object(p.a)(Object(p.a)(n))),n.onDrop=n.onDrop.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.DropDom&&(this.DropDom.addEventListener("drop",this.onDrop,!1),this.DropDom.addEventListener("dragenter",this.onDragenter,!1))}},{key:"componentWillUnmount",value:function(){this.DropDom&&(this.DropDom.removeEventListener("drop",this.onDrop),this.DropDom.removeEventListener("dragenter",this.onDragenter))}},{key:"onToggleEdit",value:function(){this.setState({showEdit:!this.state.showEdit})}},{key:"onUpdateConfigs",value:function(e){var t=e.deleteFlag,n=void 0!==t&&t,a=Object(x.a)(e,["deleteFlag"]),l=this.props.onUpdateConfigs,o={dropConfig:a};n&&(o.dropConfig={dropIndex:a.dropIndex},o.dropComponent=!1),this.setState(Object(k.a)({},o)),l(a),this.onToggleEdit()}},{key:"onDrop",value:function(e){if(e.preventDefault(),"drop-container"===e.target.className){var t=JSON.parse(e.dataTransfer.getData("text/plain")).type,n=this.props,a=n.dropIndex,l=n.onUpdateConfigs,o={type:t,dropIndex:a};"Text"===t&&(o.text="Text"),"Breadcrumb"===t&&(o.breadcrumb=[{index:0,text:"menu1"},{index:1,text:"menu2"}]),"Button"===t&&(o.type="Btn",o.btnArr=[{btnText:"button",type:"primary",index:0}]),this.setState({dropConfig:o,dropComponent:!0},function(){l(o)}),this.resetBg()}}},{key:"resetBg",value:function(){var e=document.querySelectorAll(".".concat("drop-container"));e&&e.forEach(function(e){e.style.background=""})}},{key:"onDragenter",value:function(e){"drop-container"===e.target.className&&(e.target.style.background="#dde7f1")}},{key:"render",value:function(){var e=this,t=this.state,n=t.dropComponent,a=t.dropConfig,r=t.showEdit;return o.a.createElement("div",{className:"drop-container",ref:function(t){e.DropDom=t}},n?o.a.createElement(l.Fragment,null,o.a.createElement(qe,Object.assign({},this.props,{dropConfig:a})),o.a.createElement(F.a,{type:"bars",className:"icon-operation",onClick:this.onToggleEdit})):null,o.a.createElement(Ke,{visible:r,dropConfig:a,onClose:this.onToggleEdit,onUpdateConfigs:this.onUpdateConfigs}))}}]),t}(l.PureComponent)),Ze=(n(387),v.a.TextArea),Xe=j.a.Option,et=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,n=t.form,a=t.onClose;n.validateFields(function(e,t){if(!e){var n=t.layoutColumn,l=t.headerStyles,o={layoutColumn:n,headerStyles:ce(l)};a(o)}})}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.form,a=e.onClose,l=e.configs,r=void 0===l?{}:l,i=e.onDeleteContainer,c=r.headerStyles,s=void 0===c?{}:c,u=r.layoutColumn,d=void 0===u?3:u,m=se(s),p=n.getFieldDecorator;return o.a.createElement(te.a,{visible:t,width:420,title:"\u7f16\u8f91\u5217",onClose:function(){a(0)}},o.a.createElement(y.a,{onSubmit:this.handleSubmit,style:{padding:"0 20px"}},o.a.createElement(y.a.Item,Object.assign({label:"style\u8bbe\u7f6e"},ae),n.getFieldDecorator("headerStyles",{initialValue:m})(o.a.createElement(Ze,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),o.a.createElement(y.a.Item,Object.assign({label:"\u5bb9\u5668\u5217"},ae),p("layoutColumn",{initialValue:d,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5217\u6570!"}]})(o.a.createElement(j.a,null,o.a.createElement(Xe,{value:"1"},"1"),o.a.createElement(Xe,{value:"2"},"2"),o.a.createElement(Xe,{value:"3"},"3"),o.a.createElement(Xe,{value:"4"},"4"),o.a.createElement(Xe,{value:"5"},"5"),o.a.createElement(Xe,{value:"6"},"6"),o.a.createElement(Xe,{value:"7"},"7"),o.a.createElement(Xe,{value:"8"},"8")))),o.a.createElement("div",{className:"btn-box"},o.a.createElement(E.a,{type:"primary",htmlType:"submit",style:{marginRight:"10px"}},"\u786e\u5b9a"),o.a.createElement(E.a,{onClick:i},"\u5220\u9664\u5bb9\u5668"))))}}]),t}(l.Component),tt=y.a.create()(et),nt=(n(388),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1,configs:{cellsArr:[],layoutColumn:0}},n.onToggleEdit=n.onToggleEdit.bind(Object(p.a)(Object(p.a)(n))),n.onDeleteContainer=n.onDeleteContainer.bind(Object(p.a)(Object(p.a)(n))),n.onUpdateConfigs=n.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onToggleEdit",value:function(){this.setState({visible:!this.state.visible})}},{key:"onDeleteContainer",value:function(){var e=this.props;(0,e.onUpdateLayoutConfig)({layoutIndex:e.layoutIndex,deleteFlag:!0}),this.onToggleEdit()}},{key:"onUpdateConfigs",value:function(e){var t=e.deleteFlag,n=void 0!==t&&t,a=Object(x.a)(e,["deleteFlag"]),l=this.state.configs,o=Object.assign({},l),r=this.props,i=r.onUpdateLayoutConfig,c=r.layoutIndex,s=o.cellsArr.reduce(function(e,t){return n?a.dropIndex!==t.dropIndex?e.push(Object.assign({},t)):e.push({dropIndex:a.dropIndex}):a.dropIndex===t.dropIndex?e.push(Object.assign({},t,a)):e.push(Object.assign({},t)),e},[]);o.cellsArr=s,this.setState({configs:o},function(){i({layoutIndex:c,configs:o})})}},{key:"rendeCell",value:function(e){if(!e)return null;for(var t=[],n="".concat(100/e,"%"),a=0;a<e;a++)t.push(o.a.createElement("div",{className:"cell",key:"cell-".concat(a),style:{width:n}},o.a.createElement(Qe,{dropIndex:a,onUpdateConfigs:this.onUpdateConfigs})));return t}},{key:"render",value:function(){var e=this,t=this.state.visible,n=this.props,a=n.onUpdateLayoutConfig,l=n.layoutIndex,r=n.configs,i=r.layoutColumn,c=void 0===i?0:i,s=r.headerStyles;return o.a.createElement("div",{className:"fulu-header container",style:s},this.rendeCell(+c),o.a.createElement(tt,{visible:t,onClose:function(t){if(t){for(var n={layoutIndex:l},o=t.layoutColumn,r=e.state.configs.cellsArr.slice(0,o),i=0;i<o;i++)r.length<=i&&r.push({dropIndex:i});var c={cellsArr:r,layoutColumn:o};n.configs=c,e.setState({configs:c}),a(n)}e.onToggleEdit()},onDeleteContainer:this.onDeleteContainer}),o.a.createElement(F.a,{type:"form",className:"icon-operation",onClick:this.onToggleEdit}))}}]),t}(l.PureComponent)),at=n(193),lt=n.n(at),ot=(n(389),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderContainer",value:function(){var e=this.props,t=e.layoutConfig,n=Object(x.a)(e,["layoutConfig"]);return Array.isArray(t)&&t.length>0?t.map(function(e){var t=e.type,a=e.layoutIndex,l="layout-".concat(a),r=Object.assign({key:l},n,e);return"FormContainer"===t?o.a.createElement(je,r):"TableContainer"===t?o.a.createElement(Pe,r):"EmptyContainer"===t?o.a.createElement(lt.a,r):"HeaderContainer"===t?o.a.createElement(nt,r):null}):o.a.createElement("div",{className:"empty-tips"},"\u8bf7\u6dfb\u52a0\u5bb9\u5668\u7ec4\u4ef6")}},{key:"render",value:function(){return o.a.createElement(l.Fragment,null,this.renderContainer())}}]),t}(l.PureComponent)),rt=[{title:"column0",dataIndex:"dataIndex0",index:0},{title:"column1",dataIndex:"dataIndex1",index:1},{title:"column2",dataIndex:"dataIndex2",index:2},{title:"column3",dataIndex:"dataIndex3",index:3},{title:"column4",dataIndex:"dataIndex4",index:4}],it=(n(390),["main-container","empty-tips"]),ct=["FormContainer","TableContainer","EmptyContainer","HeaderContainer"],st=(X="AppService",function(e){return function(t){var n=Object.assign({},t);if(Object.hasOwnProperty.call(Q,X)){var a=Q[X];"function"===typeof a&&(n.service=new a)}return o.a.createElement(e,n)}}(Z=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={layoutConfig:[],generateLoading:!1},n.onEdit=n.onEdit.bind(Object(p.a)(Object(p.a)(n))),n.onUpdateLayoutConfig=n.onUpdateLayoutConfig.bind(Object(p.a)(Object(p.a)(n))),n.onGeneratePage=n.onGeneratePage.bind(Object(p.a)(Object(p.a)(n))),n.onPreviewPage=n.onPreviewPage.bind(Object(p.a)(Object(p.a)(n))),n.layoutIndex=0,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onUpdateLayoutConfig",value:function(e){var t=e.layoutIndex,n=e.configs,a=e.deleteFlag,l=void 0!==a&&a,o=this.state.layoutConfig.slice();if(l){var r=o.findIndex(function(e){return e.layoutIndex===t});o.splice(r,1)}else{o.find(function(e){return e.layoutIndex===t}).configs=n}this.setState({layoutConfig:o})}},{key:"componentDidMount",value:function(){var e=this;window.ipc&&window.ipc.on&&window.ipc.on("asynchronous-reply",function(t,n){var a=JSON.parse(n),l=a.code,o=a.info;1===l?G.a.success(o):G.a.error(o),e.setState({generateLoading:!1})}),document.addEventListener("drop",function(t){t.preventDefault();var n=t.target.className;if(it.indexOf(n)>-1){var a=JSON.parse(t.dataTransfer.getData("text/plain")),l=a.type;if(ct.indexOf(l)>-1){var o=e.state.layoutConfig.slice(),r=Object.assign(a,{layoutIndex:e.layoutIndex,configs:{}});"TableContainer"===l&&(r.configs.columns=rt),o.push(r),e.setState({layoutConfig:o}),e.layoutIndex+=1}else G.a.warn("\u8bf7\u62d6\u62fd\u5bb9\u5668\u7ec4\u4ef6")}},!1)}},{key:"onEdit",value:function(e){var t=e.kIndex,n=this.state.formConfig.slice();n[t]=Object.assign({},n[t],e),this.setState({formConfig:n})}},{key:"onGeneratePage",value:function(){var e=this,t={pageName:this.props.pageName,layoutConfig:this.state.layoutConfig};this.setState({generateLoading:!0}),this.props.service.generatePage(t).then(function(t){console.log(t),e.setState({generateLoading:!1})}).catch(function(t){G.a.error("\u8bf7\u6c42\u5931\u8d25"),console.log(t),e.setState({generateLoading:!1})})}},{key:"onPreviewPage",value:function(){var e=this.props.onPreviewPage;e(this.state.layoutConfig)}},{key:"render",value:function(){var e=this.state,t=e.layoutConfig,n=e.generateLoading;return o.a.createElement(l.Fragment,null,o.a.createElement("div",{className:"main-container"},o.a.createElement(ot,{layoutConfig:t,onUpdateLayoutConfig:this.onUpdateLayoutConfig})),o.a.createElement(E.a,{type:"primary",onClick:this.onGeneratePage,loading:n},"\u751f\u6210\u9875\u9762"),o.a.createElement(E.a,{type:"primary",onClick:this.onPreviewPage,style:{marginLeft:"5px"}},"\u9884\u89c8"))}}]),t}(l.PureComponent))||Z),ut=(n(391),h.a.Sider),dt=h.a.Content,mt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={showEditNameModal:!0,showPreviewModal:!1,pageName:""},n.onCloseModal=n.onCloseModal.bind(Object(p.a)(Object(p.a)(n))),n.onPreviewPage=n.onPreviewPage.bind(Object(p.a)(Object(p.a)(n))),n.onClosePreviewModal=n.onClosePreviewModal.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onCloseModal",value:function(e){var t=e.pageName;this.setState({showEditNameModal:!1,pageName:t})}},{key:"onClosePreviewModal",value:function(){this.setState({showPreviewModal:!1})}},{key:"onPreviewPage",value:function(e){this.setState({showPreviewModal:!0}),this.layoutConfig=e}},{key:"render",value:function(){var e=this.state,t=e.showEditNameModal,n=e.showPreviewModal,a=e.pageName;return o.a.createElement("div",{className:"App"},o.a.createElement(g.a,{locale:f.a},o.a.createElement(h.a,null,o.a.createElement(ut,{width:"300"},o.a.createElement(J,null)),o.a.createElement(h.a,null,o.a.createElement(dt,null,o.a.createElement(st,{pageName:a,onPreviewPage:this.onPreviewPage}))),o.a.createElement(O,{onCloseModal:this.onCloseModal,showModal:t}),o.a.createElement(z,{layoutConfig:this.layoutConfig,onCloseModal:this.onClosePreviewModal,showModal:n}))))}}]),t}(l.Component);i.a.render(o.a.createElement(mt,null),document.getElementById("root"))}},[[198,1,2]]]);
//# sourceMappingURL=main.d869b350.chunk.js.map