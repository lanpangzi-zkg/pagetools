(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{185:function(e,t){},190:function(e,t,a){e.exports=a(369)},195:function(e,t,a){},196:function(e,t,a){},297:function(e,t,a){},352:function(e,t,a){},353:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){},357:function(e,t,a){},358:function(e,t,a){},359:function(e,t,a){},360:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){},365:function(e,t,a){},369:function(e,t,a){"use strict";a.r(t);var n,l=a(0),o=a.n(l),r=a(9),i=a.n(r),c=(a(195),a(17)),s=a(15),u=a(20),d=a(18),m=a(19),p=a(5),b=a(186),f=a.n(b),h=a(381),g=a(371),y=a(373),v=a(377),E=a(40),C=(a(196),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.form,n=t.onCloseModal;a.validateFields(function(e,t){e||n(t)})}},{key:"render",value:function(){var e=this.props,t=e.showModal,a=e.form.getFieldDecorator;return t?o.a.createElement("div",{className:"edit-name-box"},o.a.createElement(y.a,{onSubmit:this.handleSubmit,style:{padding:"0 20px"}},o.a.createElement(y.a.Item,null,o.a.createElement("h3",{className:"title"},"\u9875\u9762\u540d\u79f0")),o.a.createElement(y.a.Item,null,a("pageName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9875\u9762\u540d\u79f0!"},{pattern:/^[a-zA-Z]+$/,message:"\u540d\u79f0\u53ea\u80fd\u5305\u542b\u5b57\u6bcd\uff01"}]})(o.a.createElement(v.a,{placeholder:"\u53ea\u80fd\u5305\u542b\u5b57\u6bcd"}))),o.a.createElement(y.a.Item,{style:{marginTop:"15px"}},o.a.createElement(E.a,{type:"primary",htmlType:"submit",style:{width:"100%"}},"\u786e\u5b9a")))):null}}]),t}(l.Component)),O=y.a.create()(C),x=a(35),k=a(39),j=a(82),I=a(374),S=a(63),D=a(37),w=a(108),A=a(74),F=a(10),T=a(372),V=a(16),P=a.n(V),N=(a(163),a(297),y.a.Item),B=j.a.Option,L=I.a.RangePicker,U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a.onSubmit=a.onSubmit.bind(Object(p.a)(Object(p.a)(a))),a.onCollapse=a.onCollapse.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this.getLayoutConfig();if(Array.isArray(e)){var t=e.find(function(e){return"FormContainer"===e.type});if(t){var a=t.configs.formItemArr.find(function(e){return"Btn"===e.type});if(a){var n=a.btnArr.find(function(e){return e.expandFlag});n&&(this.state.expand=n.expand,this.state.expandCount=n.expandCount)}}}}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"getLayoutConfig",value:function(){return null}},{key:"onCollapse",value:function(){var e=this.state.expand;this.setState({expand:!e})}},{key:"_onShowSizeChange",value:function(e,t){this.isFunc("onShowSizeChange")&&this.onShowSizeChange(e,t)}},{key:"_onChange",value:function(e,t){this.isFunc("onChange")&&this.onChange(e,t)}},{key:"getInitialValue",value:function(e){var t=e.type,a=void 0===t?"Input":t,n=e.defaultValue,l=e.dateFormat,o=void 0===l?"YYYY-MM-DD":l;return"DatePicker"===a||"RangePicker"===a?n&&P()(n,o):e.defaultValue||""}},{key:"getTableData",value:function(){return[]}},{key:"isFunc",value:function(e){return"function"===typeof this[e]}},{key:"renderRow",value:function(e){var t=e.slice(),a=t.findIndex(function(e){return e.singleRow}),n=t[a];return a>-1&&t.splice(a,1),[o.a.createElement(S.a,{key:"basic-row",gutter:{md:8,lg:24,xl:48}},this.renderCol(t)),n?o.a.createElement(S.a,{key:"single-row"},o.a.createElement(D.a,{style:Object(k.a)({},n.style)},o.a.createElement("span",{className:"btn-group-box"},this.renderBtn(n)))):null]}},{key:"renderCol",value:function(e){var t=this,a=this.props.form,n=a.getFieldDecorator;return e.map(function(e,l){var r=e.label,i=e.name,c=e.colSpan,s=void 0===c?8:c,u=e.colIndex,d=e.type,m=e.cellStyles,p=void 0===m?{}:m,b=e.singleRow,f=void 0!==b&&b,h=e.hasLinkage;if(f)return null;if("Btn"===d)return o.a.createElement(D.a,{md:s,sm:24,key:"col-".concat(u)},o.a.createElement(N,{style:p},t.renderBtn(e)));if(!i)return null;if("1"===h){var g=e.linkName,y=e.condition;if(a.getFieldValue(g)!==y)return null}var v={display:"block"};if(Object.hasOwnProperty.call(t.state,"expand")){var E=t.state,C=E.expand,O=E.expandCount;!C&&l+1>O&&(v.display="none")}return o.a.createElement(D.a,{md:s,sm:24,key:"col-".concat(u),style:v},o.a.createElement(N,{label:r,style:p},n(i,{rules:[],initialValue:t.getInitialValue(e)})(t.renderItemComponent(e))))})}},{key:"renderItemComponent",value:function(e){var t=e.placeholder,a=e.type,n=null;switch(void 0===a?"Input":a){case"Select":n=this.renderSelect(e);break;case"RangePicker":n=this.renderRangePicker(e);break;case"DatePicker":n=this.renderDatePicker(e);break;case"Btn":n=this.renderBtn(e);break;case"Radio":n=this.renderRadio(e);break;case"Checkbox":n=this.renderCheckbox(e);break;default:n=o.a.createElement(v.a,{placeholder:t})}return n}},{key:"renderSelect",value:function(e){var t=e.style,a=void 0===t?{}:t,n=e.options,l=void 0===n?[]:n;return o.a.createElement(j.a,{style:Object(k.a)({width:"100%"},a)},Array.isArray(l)?l.map(function(e){var t=e.key,a=e.optionValue,n=e.optionText;return o.a.createElement(B,{key:t||a,value:a},n)}):null)}},{key:"renderRadio",value:function(e){var t=e.style,a=void 0===t?{}:t,n=e.radios,l=void 0===n?[]:n;return o.a.createElement(w.a.Group,{style:Object(k.a)({},a)},Array.isArray(l)?l.map(function(e){var t=e.key,a=e.radioValue,n=e.radioText;return o.a.createElement(w.a,{key:t||a,value:a},n)}):null)}},{key:"renderCheckbox",value:function(e){var t=e.style,a=void 0===t?{}:t,n=e.cks,l=void 0===n?[]:n;return o.a.createElement(A.a.Group,{style:Object(k.a)({width:"100%"},a)},Array.isArray(l)?l.map(function(e){var t=e.key,a=e.ckValue,n=e.ckText;return o.a.createElement(A.a,{key:t||a,value:a},n)}):null)}},{key:"renderDatePicker",value:function(e){return o.a.createElement(I.a,{style:{width:"100%"}})}},{key:"renderRangePicker",value:function(e){return o.a.createElement(L,{style:{width:"100%"}})}},{key:"renderBtn",value:function(e){var t=this,a=e.btnArr;return o.a.createElement(l.Fragment,null,a.map(function(e){var a=e.btnText,n=void 0===a?"button":a,l=e.type,r=e.index,i=e.props,c=e.style,s=void 0===c?{}:c,u=e.expandFlag;if("1"===(void 0===u?"0":u)){var d=t.state.expand,m=d?"\u9690\u85cf":"\u5c55\u5f00";return o.a.createElement("a",{className:"btn-collapse",onClick:t.onCollapse,href:"\xa0",style:s,key:"btn-".concat(r)},m,o.a.createElement(F.a,{type:d?"up":"down"}))}return o.a.createElement(E.a,Object.assign({key:"btn-".concat(r),type:l,style:s},i),n)}))}},{key:"_renderHeader",value:function(e){var t=e.configs;return this.isFunc("renderHeader")?this.renderHeader(t):o.a.createElement("div",{className:"fulu-header"},"header")}},{key:"_renderForm",value:function(e){var t=e.configs;if(this.isFunc("renderForm"))return this.renderForm(t);var a=t.formItemArr;return o.a.createElement("div",{className:"form-box fulu-box",key:"query-form"},o.a.createElement(y.a,{onSubmit:this.onSubmit,layout:"inline"},this.renderRow(a)))}},{key:"_renderTable",value:function(e){var t=e.configs;if(this.isFunc("renderTable"))return this.renderTable(t);var a=t.pagination,n=t.rowSelection,l=Object(x.a)(t,["pagination","rowSelection"]),r=this.isFunc("getTableTotal")?this.getTableTotal():0,i=Object.assign({size:"small",onShowSizeChange:this._onShowSizeChange,onChange:this._onShowSizeChange,showTotal:function(e){return"\u5171".concat(e,"\u6761")},pageSizeOptions:["10","20","30","40"],total:r,defaultPageSize:1,showSizeChanger:!0,showQuickJumper:!0},a),c=this.getTableData();return o.a.createElement("div",{className:"table-box fulu-box",key:"query-table"},o.a.createElement(T.a,Object.assign({dataSource:c,pagination:i,rowSelection:n,columns:t.columns},l)))}},{key:"_renderTab",value:function(e){var t=e.configs;return this.isFunc("renderTab")?this.renderTab(t):null}},{key:"_renderCustom",value:function(e){var t=e.configs;return this.isFunc("renderCustom")?this.renderCustom(t):null}},{key:"renderContent",value:function(e){var t=this;return e.map(function(e){var a=e.type;return"FormContainer"===a?t._renderForm(e):"TableContainer"===a?t._renderTable(e):"CustomContainer"===a?t._renderCustom(e):null})}},{key:"render",value:function(){var e=this.getLayoutConfig();return o.a.createElement("div",{className:"wrapper"},Array.isArray(e)?this.renderContent(e):null)}}]),t}(l.PureComponent),M=a(376),R=y.a.create()(n=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getLayoutConfig",value:function(){return this.props.layoutConfig}}]),t}(U))||n,z=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showModal,a=e.layoutConfig,n=e.onCloseModal;return o.a.createElement(M.a,{visible:t,footer:null,width:"100%",closable:!0,centered:!0,onCancel:n,title:"\u9875\u9762\u9884\u89c8",maskClosable:!0},o.a.createElement(R,{layoutConfig:a}))}}]),t}(l.Component),H=a(143),Y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onDragStart",value:function(e,t){e.dataTransfer.setData("text/plain",JSON.stringify(t))}},{key:"render",value:function(){var e=this,t=this.props,a=t.ch,n=t.data;return o.a.createElement("span",{draggable:"true",className:"drag-item",onDragStart:function(t){e.onDragStart(t,n)}},a)}}]),t}(l.PureComponent),_={form:[{ch:"Input",data:{type:"Input",label:"",name:""}},{ch:"Button",data:{type:"Button"}},{ch:"Select",data:{type:"Select"}},{ch:"DatePicker",data:{type:"DatePicker"}},{ch:"Tabs",data:{type:"Tabs"}},{ch:"RangePicker",data:{type:"RangePicker"}},{ch:"Breadcrumb",data:{type:"Breadcrumb"}},{ch:"Text",data:{type:"Text"}}],layout:[{ch:"Form",data:{type:"FormContainer"}},{ch:"Table",data:{type:"TableContainer"}},{ch:"Header",data:{type:"HeaderContainer"}}]},q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.tabType,t=_[void 0===e?"form":e];return Array.isArray(t)?o.a.createElement(l.Fragment,null,t.map(function(e,t){return o.a.createElement(Y,Object.assign({},e,{key:"drag-".concat(t)}))})):null}}]),t}(l.PureComponent),J=H.a.TabPane,W=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("dragover",function(e){e.preventDefault()},!1),document.addEventListener("drag",function(e){},!1),document.addEventListener("dragstart",function(e){e.target.style.opacity=.5},!1),document.addEventListener("dragend",function(e){e.target.style.opacity="",document.querySelectorAll(".drop-zone").forEach(function(e){e.style.background="#fff"})},!1),document.addEventListener("dragenter",function(e){"drop-zone"===e.target.className&&(e.target.style.background="#96cdf9")},!1),document.addEventListener("dragleave",function(e){"drop-zone"===e.target.className&&(e.target.style.background="")},!1)}},{key:"render",value:function(){return o.a.createElement(H.a,{defaultActiveKey:"1"},o.a.createElement(J,{tab:"\u5e03\u5c40",key:"layout"},o.a.createElement(q,{tabType:"layout"})),o.a.createElement(J,{tab:"\u8868\u5355",key:"form"},o.a.createElement(q,null)))}}]),t}(l.Component),G="1",$=a(380),K=a(379),Q=a(370),Z=(a(352),j.a.Option),X={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.form,n=t.onClose;a.validateFields(function(e,t){if(!e){for(var a=t.layoutColumn,l=+a,o=0,r={layoutColumn:a,colSpanArr:[]},i=0;i<l;i++){var c=+t["colSpan-".concat(i)];o+=c,r.colSpanArr.push(c)}if(o>24)return void $.a.error("\u8de8\u5217\u603b\u6570\u4e0d\u80fd\u8d85\u8fc724!");n(r)}})}},{key:"renderColSpanInputs",value:function(){for(var e=this.props.form,t=e.getFieldDecorator,a=+e.getFieldValue("layoutColumn"),n=[],l=0;l<a;l++)n.push(o.a.createElement(y.a.Item,Object.assign({key:"formitem-".concat(l),label:"\u7b2c".concat(l+1,"\u5217")},X),t("colSpan-".concat(l),{initialValue:24/a,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5217\u5bbd!"},{pattern:/^[1-9](\d)?$/,message:"\u53ea\u80fd\u5305\u542b\u6570\u5b57\uff01"}]})(o.a.createElement(v.a,null))));return n}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.form,n=e.onClose,l=a.getFieldDecorator;return o.a.createElement(K.a,{visible:t,width:420,title:"\u7f16\u8f91\u5217",onClose:function(){n(0)}},o.a.createElement(y.a,{onSubmit:this.handleSubmit,style:{padding:"0 20px"}},o.a.createElement(y.a.Item,Object.assign({label:"\u8868\u5355\u5217"},X),l("layoutColumn",{initialValue:3,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5217\u6570!"}]})(o.a.createElement(j.a,null,o.a.createElement(Z,{value:"2"},"2"),o.a.createElement(Z,{value:"3"},"3"),o.a.createElement(Z,{value:"4"},"4")))),o.a.createElement(Q.a,null),this.renderColSpanInputs(),o.a.createElement("div",{className:"btn-box"},o.a.createElement(E.a,{type:"primary",htmlType:"submit",style:{textAlign:"center"}},"\u786e\u5b9a"))))}}]),t}(l.Component),te=y.a.create()(ee),ae=a(112),ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";return e?e.split(t).reduce(function(e,t){var a=t.split(":"),n=Object(ae.a)(a,2),l=n[0],o=n[1];return l&&o&&(e[l]=o.replace(/['"\s]/g,"")),e},{}):{}},le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";return"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).reduce(function(t,a){return t.push("".concat(a,":").concat(e[a])),t},[]).join(t):Array.isArray(e)?e.join(t):e},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=0;if(t===n.length)l=24;else{for(var o=0,r=0,i=0;i<a.length;i++)if(a[i].colIndex>=e){if(0===(r%=24))o=0;else for(var c=0;c<n.length;c++)(r-=n[c])<=0&&(o=c+1,c=n.length);i=a.length}else r+=a[i].colSpan;var s,u=0;for(t<=n.length-o&&(u=o),s=u+t-1;u<=s;u++)l+=n[u]}return l},re=j.a.Option,ie=I.a.RangePicker,ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).renderItem=function(e){var t=e.placeholder,n=e.type,l=null;switch(void 0===n?"Input":n){case"Select":l=a.renderSelect(e);break;case"RangePicker":l=a.renderRangePicker(e);break;case"DatePicker":l=a.renderDatePicker(e);break;case"Btn":l=a.renderBtn(e);break;default:l=o.a.createElement(v.a,{placeholder:t})}return l},a.renderSelect=function(e){var t=e.style,a=void 0===t?{}:t,n=e.options,l=void 0===n?[]:n;return o.a.createElement(j.a,{style:Object(k.a)({width:"100%"},a)},Array.isArray(l)?l.map(function(e){var t=e.key,a=e.optionValue,n=e.optionText;return o.a.createElement(re,{key:t||a,value:a},n)}):null)},a.renderDatePicker=function(){return o.a.createElement(I.a,{style:{width:"100%"}})},a.renderRangePicker=function(){return o.a.createElement(ie,{style:{width:"100%"}})},a.renderBtn=function(e){var t=e.btnArr;return o.a.createElement(l.Fragment,null,t.map(function(e){var t=e.btnText,n=void 0===t?"button":t,l=e.expandFlag,r=(e.expandCount,e.style),i=void 0===r?{}:r,c=e.index,s=Object(x.a)(e,["btnText","expandFlag","expandCount","style","index"]);if(l===G){var u=a.props,d=u.expand,m=u.onCollapse,p=d?"\u9690\u85cf":"\u5c55\u5f00";return o.a.createElement("a",{className:"btn-collapse",onClick:m,href:"\xa0",key:"btn-".concat(c),style:i},p,o.a.createElement(F.a,{type:d?"up":"down"}))}return o.a.createElement(E.a,Object.assign({key:"btn-".concat(c),style:i},s),n)}))},a.state={editable:!1},a.onEditToggle=a.onEditToggle.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getType",value:function(){return""}}]),Object(s.a)(t,[{key:"onEditToggle",value:function(e){e&&e.stopPropagation();var t=this.state.editable;this.setState({editable:!t})}},{key:"getInitialValue",value:function(e){var t=e.type,a=void 0===t?"Input":t,n=e.defaultValue;return"DatePicker"===a||"RangePicker"===a?n&&P()(n,"YYYY-MM-DD"):e.defaultValue||""}},{key:"render",value:function(){var e=this.props,t=e.formItemConfig,a=void 0===t?{}:t,n=e.form,r=n.getFieldDecorator,i=a.type,c=a.colSpan,s=a.label,u=a.name,d=a.rules,m=a.cellStyles,p=void 0===m?{}:m,b=a.hasLinkage,f=c||8;if(!u&&"Btn"!==i)return null;if("1"===b){var h=a.linkName,g=a.condition;if(n.getFieldValue(h)!==g)return null}return o.a.createElement(l.Fragment,null,o.a.createElement(D.a,{span:c,md:f,sm:24},"Btn"!==i?o.a.createElement(y.a.Item,{label:s,style:p},r(u,{rules:d||[],initialValue:this.getInitialValue(a)})(this.renderItem(a))):o.a.createElement(y.a.Item,{style:p},this.renderItem(a))))}}]),t}(l.Component),se=a(375),ue=a(378),de=(a(353),se.a.Panel),me=j.a.Option,pe=v.a.TextArea,be={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={deleteComponent:!1,options:[]},a.onSubmit=a.onSubmit.bind(Object(p.a)(Object(p.a)(a))),a.onAddOptionItem=a.onAddOptionItem.bind(Object(p.a)(Object(p.a)(a))),a.onAddCellStyleItem=a.onAddCellStyleItem.bind(Object(p.a)(Object(p.a)(a))),a.onAddButton=a.onAddButton.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteCellStyleItem=a.onDeleteCellStyleItem.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteOptionItem=a.onDeleteOptionItem.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteButton=a.onDeleteButton.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteComponent=a.onDeleteComponent.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.formItemConfig,a=t.type,n=t.options,l=t.btnArr;"Option"!==a||this.initOptions||(this.setState({options:n}),this.optionIndex=n.length,this.initOptions=!0),"Btn"!==a||this.initBtn||(this.setState({btnArr:l}),this.btnIndex=l.length,this.initBtn=!0)}},{key:"componentDidMount",value:function(){}},{key:"onSubmit",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.state,a=t.deleteComponent,n=t.options,l=t.btnArr,o=this.props,r=o.form,i=o.onUpdateConfigs,c=o.formItemConfig,s=o.colSpanArr,u=o.formItemArr;r.validateFields(function(e,t){if(!e){var o=Object.assign({},c,t);if(a&&(o.deleteFlag=!0),o.cellStyles=ne(t.cellStyles),"Select"===o.type){var r=n.slice();r.forEach(function(e){var a=e.index,n="optionText-".concat(a),l="optionValue-".concat(a);e.optionText=t[n],e.optionValue=t[l],delete o[n],delete o[l]}),o.options=r}else if("DatePicker"===o.type)o.defaultValue=t.defaultValue&&t.defaultValue.format("YYYY-MM-DD");else if("Btn"===o.type){var d=l.slice();d.forEach(function(e){var a=e.index,n="btnText-".concat(a),l="type-".concat(a),r="htmlType-".concat(a),i="onClick-".concat(a),c="expandFlag-".concat(a),s="btnStyle-".concat(a);e.btnText=t[n],e.type=t[l],e.htmlType=t[r],e.expandFlag=t[c],e.style=ne(t[s]),"submit"!==e.htmlType&&(e.onClick=t[i]);var u="expandCount-".concat(a);c===G&&(e.expandCount=t[u]),delete o[s],delete o[u],delete o[c],delete o[i],delete o[r],delete o[n],delete o[l]}),o.btnArr=d}var m=t.originSpan,p=void 0===m?1:m;o.originSpan=p,o.colSpan=oe(c.colIndex,p,u,s),i(o)}})}},{key:"onDeleteComponent",value:function(){this.setState({deleteComponent:!0})}},{key:"onAddOptionItem",value:function(){var e=this.state.options,t=(void 0===e?[]:e).slice();t.push({value:"",text:"",index:this.optionIndex}),this.setState({options:t}),this.optionIndex+=1}},{key:"onAddCellStyleItem",value:function(){var e=this.state.cellStyles,t=(void 0===e?[]:e).slice();t.push({value:"",name:"",index:this.cellStyleIndex}),this.setState({cellStyles:t}),this.cellStyleIndex+=1}},{key:"onAddButton",value:function(){var e=this.state.btnArr.slice();e.push({btnText:"button",type:"primary",index:this.btnIndex}),this.setState({btnArr:e}),this.btnIndex+=1}},{key:"onDeleteButton",value:function(e){var t=this.state.btnArr,a=(void 0===t?[]:t).reduce(function(t,a){return a.index!==e&&t.push(a),t},[]);this.setState({btnArr:a})}},{key:"onDeleteCellStyleItem",value:function(e){var t=this.state.cellStyles,a=(void 0===t?[]:t).reduce(function(t,a){return a.index!==e&&t.push(a),t},[]);this.setState({cellStyles:a})}},{key:"onDeleteOptionItem",value:function(e){var t=this.state.options,a=(void 0===t?[]:t).reduce(function(t,a){return a.index!==e&&t.push(a),t},[]);this.setState({options:a})}},{key:"renderOptionsCard",value:function(){var e=this,t=this.props.form,a=this.state.options;return o.a.createElement(ue.a,{title:"option\u8bbe\u7f6e",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddOptionItem})},a.map(function(a){var n=a.value,r=a.text,i=a.index;return o.a.createElement(l.Fragment,{key:"optionitem-".concat(i)},o.a.createElement(y.a.Item,{key:"optionitem-value-".concat(i),style:{width:"45%",display:"inline-block"}},t.getFieldDecorator("optionValue-".concat(i),{initialValue:n})(o.a.createElement(v.a,{placeholder:"value"}))),o.a.createElement(y.a.Item,{key:"optionitem-text-".concat(i),style:{width:"45%",display:"inline-block",marginLeft:"10px"}},t.getFieldDecorator("optionText-".concat(i),{initialValue:r})(o.a.createElement(v.a,{placeholder:"show text"}))),o.a.createElement(F.a,{type:"close-circle",style:{marginLeft:"6px",lineHeight:"39px"},onClick:function(){e.onDeleteOptionItem(i)}}))}))}},{key:"renderPanelHeader",value:function(e){var t=this,a=e.btnText,n=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},a),o.a.createElement(F.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteButton(n)}}))}},{key:"renderBtnCard",value:function(){var e=this,t=this.props,a=t.formItemConfig,n=t.form,l=a.type,r=this.state,i=r.btnArr,c=r.expandFlag,s=void 0===c?"0":c;return"Btn"===l?o.a.createElement(ue.a,{title:"\u6309\u94ae\u533a\u57df",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddButton})},o.a.createElement(se.a,null,i.map(function(t){var a=t.index,l=t.btnText,r=t.type,i=t.htmlType,c=void 0===i?"button":i,u=t.onClick,d=t.expandCount,m=t.btnStyle;return o.a.createElement(de,{header:e.renderPanelHeader(t),key:"btn-".concat(a)},o.a.createElement(y.a.Item,Object.assign({key:"btnText-".concat(a),label:"\u6309\u94ae\u6587\u5b57"},be),n.getFieldDecorator("btnText-".concat(a),{initialValue:l})(o.a.createElement(v.a,{placeholder:"btnText"}))),o.a.createElement(y.a.Item,Object.assign({key:"type-".concat(a),label:"type"},be),n.getFieldDecorator("type-".concat(a),{initialValue:r})(o.a.createElement(j.a,null,o.a.createElement(me,{value:"primary"},"primary"),o.a.createElement(me,{value:"dashed"},"dashed"),o.a.createElement(me,{value:"danger"},"danger"),o.a.createElement(me,{value:""},"none")))),o.a.createElement(y.a.Item,Object.assign({key:"htmlType-".concat(a),label:"htmlType"},be),n.getFieldDecorator("htmlType-".concat(a),{initialValue:c})(o.a.createElement(j.a,null,o.a.createElement(me,{value:"submit"},"submit"),o.a.createElement(me,{value:"reset"},"reset"),o.a.createElement(me,{value:"button"},"button")))),o.a.createElement(y.a.Item,Object.assign({key:"onClick-".concat(a),label:"onClick"},be),n.getFieldDecorator("onClick-".concat(a),{initialValue:u})(o.a.createElement(v.a,{placeholder:"\u70b9\u51fb\u4e8b\u4ef6\u540d\u79f0"}))),o.a.createElement(y.a.Item,Object.assign({key:"btnStyle-".concat(a),label:"\u6309\u94ae\u6837\u5f0f"},be),n.getFieldDecorator("btnStyle-".concat(a),{initialValue:m})(o.a.createElement(pe,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),o.a.createElement(y.a.Item,Object.assign({key:"expandFlag-".concat(a),label:"\u6298\u53e0"},be),n.getFieldDecorator("expandFlag-".concat(a),{initialValue:s})(o.a.createElement(j.a,null,o.a.createElement(me,{value:"0"},"\u5426"),o.a.createElement(me,{value:"1"},"\u662f")))),"1"===n.getFieldValue("expandFlag-".concat(a))?o.a.createElement(y.a.Item,Object.assign({key:"expandCount-".concat(a),label:"\u6298\u53e0\u53ef\u89c1\u6570"},be),n.getFieldDecorator("expandCount-".concat(a),{initialValue:d})(o.a.createElement(v.a,{placeholder:"expandCount"}))):null)}))):null}},{key:"renderDefaultValueItem",value:function(){var e=this.props,t=e.formItemConfig,a=e.form,n=t.type,l=t.defaultValue,r=a.getFieldDecorator,i=this.state.options;return"Select"===n?o.a.createElement(y.a.Item,Object.assign({},be,{label:"defaultValue"}),r("defaultValue",{initialValue:l})(o.a.createElement(j.a,null,i.map(function(e){var t=e.index,n=a.getFieldValue("optionValue-".concat(t)),l=a.getFieldValue("optionText-".concat(t));return o.a.createElement(me,{value:n,key:"op-".concat(t)},"".concat(n,"/").concat(l))})))):"DatePicker"===n?o.a.createElement(y.a.Item,Object.assign({},be,{label:"defaultValue"}),r("defaultValue",{initialValue:l})(o.a.createElement(I.a,{style:{width:"100%"}}))):"Input"===n?o.a.createElement(y.a.Item,Object.assign({},be,{label:"defaultValue"}),r("defaultValue",{initialValue:l})(o.a.createElement(v.a,null))):null}},{key:"renderLinkage",value:function(e,t){var a=e.condition,n=e.linkName,r=this.props.form.getFieldDecorator;return o.a.createElement(l.Fragment,null,o.a.createElement(y.a.Item,Object.assign({},be,{label:"\u5173\u8054\u7ec4\u4ef6name"}),r("linkName",{initialValue:n})(o.a.createElement(j.a,null,t.map(function(t){var a=t.name,n=t.colIndex,l=t.label;return a&&n!==e.colIndex?o.a.createElement(me,{value:"".concat(a)},"".concat(a,"/").concat(l)):null})))),o.a.createElement(y.a.Item,Object.assign({},be,{label:"condition"}),r("condition",{initialValue:a})(o.a.createElement(v.a,null))))}},{key:"renderContent",value:function(){var e=this.state.deleteComponent,t=this.props,a=t.form,n=t.dropComponent,r=void 0!==n&&n,i=t.formItemConfig,c=t.formItemArr,s=i.label,u=i.name,d=i.placeholder,m=i.type,p=i.linkage,b=a.getFieldDecorator;return r&&!e?"Btn"===m?this.renderBtnCard():o.a.createElement(l.Fragment,null,o.a.createElement(Q.a,null,"\u7ec4\u4ef6"),o.a.createElement(y.a.Item,Object.assign({},be,{label:"label"}),b("label",{initialValue:s})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({},be,{label:"name"}),b("name",{initialValue:u})(o.a.createElement(v.a,null))),this.renderDefaultValueItem(),o.a.createElement(y.a.Item,Object.assign({},be,{label:"placeholder"}),b("placeholder",{initialValue:d})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({},be,{label:"\u8054\u52a8\u5173\u8054"}),b("hasLinkage",{initialValue:p})(o.a.createElement(j.a,null,o.a.createElement(me,{value:"0"},"\u5426"),o.a.createElement(me,{value:"1"},"\u662f")))),"1"===a.getFieldValue("hasLinkage")?this.renderLinkage(i,c):null,"Select"===m?this.renderOptionsCard():null,o.a.createElement(y.a.Item,{style:{textAlign:"center"}},o.a.createElement(E.a,{onClick:this.onDeleteComponent},"\u5220\u9664\u7ec4\u4ef6"))):null}},{key:"renderCellStylesSetting",value:function(){var e=this,t=this.props.form,a=this.state.cellStyles;return o.a.createElement(ue.a,{title:"style\u8bbe\u7f6e",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddCellStyleItem})},a.map(function(a){var n=a.name,r=a.value,i=a.index;return o.a.createElement(l.Fragment,{key:"cell-styleitem-".concat(i)},o.a.createElement(y.a.Item,{key:"cell-styleitem-name-".concat(i),style:{width:"45%",display:"inline-block"}},t.getFieldDecorator("styleName-".concat(i),{initialValue:n})(o.a.createElement(v.a,{placeholder:"style name"}))),o.a.createElement(y.a.Item,{key:"cell-styleitem-value-".concat(i),style:{width:"45%",display:"inline-block",marginLeft:"10px"}},t.getFieldDecorator("styleValue-".concat(i),{initialValue:r})(o.a.createElement(v.a,{placeholder:"style value"}))),o.a.createElement(F.a,{type:"close-circle",style:{marginLeft:"6px",lineHeight:"39px"},onClick:function(){e.onDeleteCellStyleItem(i)}}))}))}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.visible,n=t.onClose,l=t.form,r=t.onDeleteFormItemContainer,i=t.formItemConfig,c=t.colSpanArr,s=1,u=i.colSpan,d=0;d<c.length;d++)(u-=c[d].colSpan)>0?s++:d=c.length;var m=le(i.cellStyles);return o.a.createElement(K.a,{visible:a,title:"\u7f16\u8f91\u8868\u5355\u9879",onClose:function(){e.setState({deleteComponent:!1}),e.initOptions=!1,e.initBtn=!1,n()},width:420},o.a.createElement(y.a,{onSubmit:this.onSubmit},o.a.createElement(Q.a,null,"\u5355\u5143\u683c"),o.a.createElement(y.a.Item,{style:{padding:"0 24px"},label:"style\u8bbe\u7f6e"},l.getFieldDecorator("cellStyles",{initialValue:m})(o.a.createElement(pe,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),o.a.createElement(y.a.Item,{key:"cell-colSpan",label:"\u8de8\u5217\u8bbe\u7f6e",style:{padding:"0 24px"}},l.getFieldDecorator("originSpan",{initialValue:s})(o.a.createElement(j.a,null,c.map(function(e,t){return o.a.createElement(me,{key:"".concat(e,"-").concat(t),value:t+1},"".concat(t+1,"\u5217"))})))),o.a.createElement("div",{className:"btn-box"},o.a.createElement(E.a,{onClick:r},"\u5220\u9664\u5355\u5143\u683c")),this.renderContent(),o.a.createElement("div",{className:"btn-bottom-box"},o.a.createElement(E.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"))))}}]),t}(l.Component),he=y.a.create()(fe),ge=(a(355),"form-drop-container"),ye=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={dropComponent:!1,formItemConfig:{colSpan:e.colSpan,colIndex:e.colIndex,originSpan:e.originSpan,cellStyles:e.cellStyles||{}},visible:!1},a.onUpdateConfig=a.onUpdateConfig.bind(Object(p.a)(Object(p.a)(a))),a.onShowEditItem=a.onShowEditItem.bind(Object(p.a)(Object(p.a)(a))),a.onEditDropContainer=a.onEditDropContainer.bind(Object(p.a)(Object(p.a)(a))),a.onDrop=a.onDrop.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteCol=a.onDeleteCol.bind(Object(p.a)(Object(p.a)(a))),a.onClose=a.onClose.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.colSpan!==this.props.colSpan||e.colIndex!==this.props.colIndex){var t=Object.assign({},this.state.formItemConfig,{colSpan:e.colSpan,colIndex:e.colIndex,originSpan:e.originSpan,cellStyles:e.cellStyles});this.setState({formItemConfig:t})}}},{key:"onShowEditItem",value:function(){this.setState({visible:!0})}},{key:"onDrop",value:function(e){if(e.preventDefault(),e.target.className===ge){var t=JSON.parse(e.dataTransfer.getData("text/plain")).type,a=this.props,n=a.colIndex,l=a.onUpdateConfigs,o={type:t,colSpan:this.props.colSpan,originSpan:this.props.originSpan,cellStyles:this.props.cellStyles,label:"label",name:"name-".concat(n),colIndex:n};"Button"===t&&(delete o.label,delete o.name,o.type="Btn",o.btnArr=[{btnText:"button",type:"primary",index:0}]),this.setState({formItemConfig:o,dropComponent:!0},function(){l(o)}),this.resetBg()}}},{key:"onDeleteCol",value:function(e){e&&e.stopPropagation();var t=this.props,a=t.onUpdateConfigs,n=t.colIndex,l=this.state.formItemConfig;this.setState({formItemConfig:{colSpan:l.colSpan,originSpan:l.originSpan,colIndex:n},dropComponent:!1}),a({colIndex:n,deleteFlag:!0})}},{key:"resetBg",value:function(){var e=document.querySelectorAll(".".concat(ge));e&&e.forEach(function(e){e.style.background=""})}},{key:"onDragenter",value:function(e){e.target.className===ge&&(e.target.style.background="#dde7f1")}},{key:"componentWillUnmount",value:function(){this.targetDom&&(this.targetDom.removeEventListener("drop",this.onDrop),this.targetDom.removeEventListener("dragenter",this.onDragenter))}},{key:"componentDidMount",value:function(){this.targetDom&&(this.targetDom.addEventListener("drop",this.onDrop,!1),this.targetDom.addEventListener("dragenter",this.onDragenter,!1))}},{key:"onUpdateConfig",value:function(e){var t=this,a=this.state.formItemConfig,n=null;n=e.deleteFlag?{colIndex:e.colIndex,colSpan:e.colSpan,originSpan:e.originSpan,cellStyles:e.cellStyles}:Object.assign({},a,e),this.setState({formItemConfig:n,dropComponent:!e.deleteFlag},function(){(0,t.props.onUpdateConfigs)(n),t.onClose()})}},{key:"onEditDropContainer",value:function(e){e.target.className===ge&&(e&&e.stopPropagation(),this.setState({visible:!0}))}},{key:"onClose",value:function(){this.setState({visible:!1})}},{key:"getContainerWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return"".concat(100*e/24,"%")}},{key:"render",value:function(){var e=this,t=this.state,a=t.dropComponent,n=t.formItemConfig,l=void 0===n?{}:n,r=t.visible,i=this.props,c=i.layoutColumn,s=i.onDeleteFormItemContainer,u=i.colIndex,d=i.configs,m=+u,p=Object.hasOwnProperty.call(l,"colSpan")?l.colSpan:24/c;return o.a.createElement("div",{className:ge,style:{width:this.getContainerWidth(p,c)},ref:function(t){e.targetDom=t}},a?o.a.createElement(ce,Object.assign({},this.props,{formItemConfig:l})):null,o.a.createElement(F.a,{type:"bars",className:"icon-operation",onClick:this.onShowEditItem}),o.a.createElement(he,{visible:r,onDelete:this.onDeleteCol,onUpdateConfigs:this.onUpdateConfig,colSpanArr:d.colSpanArr,formItemArr:d.formItemArr,formItemConfig:l,dropComponent:a,layoutColumn:c,onDeleteFormItemContainer:function(){e.setState({visible:!1},function(){s(m)})},onClose:this.onClose}))}}]),t}(l.PureComponent),ve=(a(356),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1,configs:{layoutColumn:1,formItemArr:[]}},a.onShowEditForm=a.onShowEditForm.bind(Object(p.a)(Object(p.a)(a))),a.onCloseEditForm=a.onCloseEditForm.bind(Object(p.a)(Object(p.a)(a))),a.renderFormItemContainer=a.renderFormItemContainer.bind(Object(p.a)(Object(p.a)(a))),a.onAddRow=a.onAddRow.bind(Object(p.a)(Object(p.a)(a))),a.onAddRowCell=a.onAddRowCell.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteRow=a.onDeleteRow.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteContainer=a.onDeleteContainer.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteFormItemContainer=a.onDeleteFormItemContainer.bind(Object(p.a)(Object(p.a)(a))),a.onUpdateConfigs=a.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(a))),a.colIndexStart=0,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onShowEditForm",value:function(){this.setState({visible:!0})}},{key:"onCloseEditForm",value:function(e){var t={visible:!1},a=e.layoutColumn,n=e.colSpanArr,l=+a;if(l){var o=this.state.configs.formItemArr.slice();if(0===o.length)for(var r=0;r<l;r++)o.push({colIndex:this.colIndexStart+r,colSpan:n[r],originSpan:1});else o.forEach(function(e){e.colSpan=oe(e.colIndex,e.originSpan,o,n)});this.colIndexStart+=l,e.layoutColumn=l,e.formItemArr=o,t.configs=e}this.setState(Object(k.a)({},t))}},{key:"onAddRowCell",value:function(){var e=this,t=this.state.configs,a=t.colSpanArr,n=t.formItemArr.slice();if(0!==n.length){for(var l=n.reduce(function(e,t,a){return e+=t.colSpan,a===n.length-1&&(e%=24),e},0),o=0,r=0,i=0;i<a.length;i++)(r+=+a[i])>l&&(o=i,i=a.length);n.push({colIndex:this.colIndexStart,originSpan:1,colSpan:a[o]}),this.colIndexStart+=1;var c=Object.assign({},t);c.formItemArr=n,this.setState({configs:c},function(){var t=e.props;(0,t.onUpdateLayoutConfig)({layoutIndex:t.layoutIndex,configs:c})})}else $.a.warn("\u8bf7\u8bbe\u7f6e\u5bb9\u5668\u5217\u6570")}},{key:"onAddRow",value:function(){var e=this,t=this.state.configs,a=t.formItemArr.slice();if(0!==a.length){for(var n=t.layoutColumn,l=0;l<n;l++)a.push({colIndex:this.colIndexStart+l});this.colIndexStart+=n;var o=Object.assign({},t);o.formItemArr=a,this.setState({configs:o},function(){var t=e.props;(0,t.onUpdateLayoutConfig)({layoutIndex:t.layoutIndex,configs:o})})}else $.a.warn("\u8bf7\u8bbe\u7f6e\u5bb9\u5668\u5217\u6570")}},{key:"onDeleteRow",value:function(){var e=this,t=this.state.configs,a=t.layoutColumn,n=t.formItemArr,l=Object.assign({},t),o=n.slice();o.length<=a?$.a.warn("\u4e0d\u80fd\u518d\u5220\u9664\u4e86"):(o.length=Math.max(0,o.length-a),l.formItemArr=o,this.setState({configs:l},function(){var t=e.props;(0,t.onUpdateLayoutConfig)({layoutIndex:t.layoutIndex,newConfigs:l})}))}},{key:"onDeleteContainer",value:function(){var e=this.props;(0,e.onUpdateLayoutConfig)({layoutIndex:e.layoutIndex,deleteFlag:!0})}},{key:"onDeleteFormItemContainer",value:function(e){var t=this,a=this.state.configs,n=a.formItemArr,l=Object.assign({},a),o=n.filter(function(t){return t.colIndex!==e});l.formItemArr=o,this.setState({configs:l},function(){var e=t.props;(0,e.onUpdateLayoutConfig)({layoutIndex:e.layoutIndex,configs:l})})}},{key:"onUpdateConfigs",value:function(e){var t=e.deleteFlag,a=void 0!==t&&t,n=Object(x.a)(e,["deleteFlag"]),l=this.state.configs,o=l.formItemArr,r=l.colSpanArr,i=Object.assign({},l),c=this.props,s=c.onUpdateLayoutConfig,u=c.layoutIndex,d=o.reduce(function(e,t){return a?n.colIndex!==t.colIndex?e.push(Object.assign({},t)):e.push({colIndex:n.colIndex,colSpan:n.colSpan,originSpan:n.originSpan}):n.colIndex===t.colIndex?e.push(Object.assign({},t,n)):e.push(Object.assign({},t)),e},[]);d.forEach(function(e){e.colIndex>n.colIndex&&(e.colSpan=oe(e.colIndex,e.originSpan,d,r))}),i.formItemArr=d,this.setState({configs:i},function(){s({layoutIndex:u,configs:i})})}},{key:"renderFormItemContainer",value:function(){var e=this,t=this.state.configs,a=t.formItemArr,n=t.layoutColumn;return a.map(function(t){var a=t.colIndex,l=t.colSpan,r=t.originSpan,i=t.cellStyles;return o.a.createElement(ye,Object.assign({key:"ed-".concat(a),colIndex:a},e.props,{colSpan:l,originSpan:r,layoutColumn:n,cellStyles:i,onDeleteFormItemContainer:e.onDeleteFormItemContainer,onUpdateConfigs:e.onUpdateConfigs}))})}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.configs,r=this.props,i=r.layoutIndex,c=r.onUpdateLayoutConfig,s=n.layoutColumn,u=n.formItemArr;return o.a.createElement(l.Fragment,null,o.a.createElement("div",{className:"form-container container"},o.a.createElement("div",{className:"inner-box"},o.a.createElement(y.a,null,o.a.createElement(S.a,{gutter:{md:24/s,lg:24,xl:48}},this.renderFormItemContainer())),u.length>0?o.a.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},o.a.createElement(E.a,{onClick:this.onAddRowCell},"\u65b0\u589e\u5355\u5143\u683c")):null),o.a.createElement(F.a,{type:"form",className:"icon-operation",onClick:this.onShowEditForm})),o.a.createElement(te,{visible:a,onClose:function(t){var a=t.layoutColumn;(e.onCloseEditForm(t),a)&&c({layoutIndex:i,configs:t})}}))}}]),t}(l.PureComponent)),Ee=y.a.create()(ve),Ce=a(187),Oe=a(107),xe=(a(357),se.a.Panel),ke=j.a.Option,je={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},Ie={0:!1,1:!0},Se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={configs:e.configs},a.setColumnMaxIndex(e),a.onSubmit=a.onSubmit.bind(Object(p.a)(Object(p.a)(a))),a.onAddOperation=a.onAddOperation.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteOperation=a.onDeleteOperation.bind(Object(p.a)(Object(p.a)(a))),a.onAddColumn=a.onAddColumn.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteColumn=a.onDeleteColumn.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.visible!==this.props.visible&&e.visible&&(this.setState({configs:e.configs}),this.setColumnMaxIndex(e),this.setOperationMaxIndex(e))}},{key:"setColumnMaxIndex",value:function(e){var t=e.configs.columns,a=void 0===t?[]:t;this.columnMaxIndex=a.length||0}},{key:"setOperationMaxIndex",value:function(e){var t=e.configs.operationArr,a=void 0===t?[]:t;this.operationMaxIndex=a.length||0}},{key:"addColumnMaxIndex",value:function(){this.columnMaxIndex+=1}},{key:"addOperationMaxIndex",value:function(){this.operationMaxIndex+=1}},{key:"onAddOperation",value:function(){var e=this.state.configs.operationArr,t=(void 0===e?[]:e).slice(),a=this.operationMaxIndex;t.push({opText:"\u64cd\u4f5c",index:a}),this.setState({configs:this.getNewConfigs("operationArr",t)}),this.addOperationMaxIndex()}},{key:"onAddColumn",value:function(){var e=this.state.configs.columns.slice(),t=this.columnMaxIndex;e.push({title:"column".concat(t),dataIndex:"dataIndex".concat(t),index:t}),this.setState({configs:this.getNewConfigs("columns",e)}),this.addColumnMaxIndex()}},{key:"onDeleteOperation",value:function(e){var t=this.state.configs,a=t.operationArr.reduce(function(t,a){return a.index!==e&&t.push(Object.assign({},a)),t},[]);Object.assign({},t).operationArr=a,this.setState({configs:this.getNewConfigs("operationArr",a)})}},{key:"onDeleteColumn",value:function(e){var t=this.state.configs,a=t.columns.reduce(function(t,a){return a.index!==e&&t.push(Object.assign({},a)),t},[]);Object.assign({},t).columns=a,this.setState({configs:this.getNewConfigs("columns",a)})}},{key:"getNewConfigs",value:function(e,t){var a=this.state.configs,n=Object.assign({},a);return n[e]=t,n}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){if(!e){var n={},l=t.state.configs;if("1"===a.hasOperation){for(var o=l.operationArr,r=[],i=0;i<o.length;i++){var c=o[i].index,s=a["opText-".concat(c)],u=a["opType-".concat(c)];r.push({opText:s,opType:u,index:i}),delete a[s],delete a[u]}n.operationArr=r}var d=l.columns.slice();Object.keys(a).forEach(function(e){var t=a[e];if(e.indexOf("-")>0){var l=e.split("-"),o=Object(ae.a)(l,2),r=o[0],i=o[1],c=d.find(function(e){return e.index===+i});c&&(c[r]=t,"width"!==r||t||delete c.width,"fixed"===r&&(c[r]=Ie[t]))}else"pagination"===e?"1"===t?n.pagination={pageSize:a.pageSize,pageSizeOptions:a.pageSizeOptions.split(",")}:n[e]=Ie[t]:"rowSelection"===e?"1"===t?(n.rowSelection={type:a.type},"radio"===a.type&&(n.rowSelection.columnTitle=a.columnTitle)):n[e]=null:n[e]=t}),delete n.pageSize,delete n.pageSizeOptions,delete n.type,delete n.columnTitle,n.columns=d,t.props.onUpdateConfigs(n)}})}},{key:"renderPanelHeader",value:function(e){var t=this,a=e.title,n=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},a),o.a.createElement(F.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteColumn(n)}}))}},{key:"renderOperationHeader",value:function(e){var t=this,a=e.opText,n=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},a),o.a.createElement(F.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteOperation(n)}}))}},{key:"renderCollapse",value:function(){var e=this,t=this.props.form,a=this.state.configs.columns,n=void 0===a?[]:a,l=t.getFieldDecorator;return o.a.createElement(se.a,null,n.map(function(t,a){var n=t.title,r=t.index,i=t.dataIndex,c=t.width,s=t.align,u=void 0===s?"left":s,d=t.fixed,m=void 0!==d&&d;return o.a.createElement(xe,{header:e.renderPanelHeader(t),key:"".concat(n,"-").concat(r)},o.a.createElement(y.a.Item,Object.assign({label:"title"},je),l("title-".concat(r),{rules:[{required:!0,message:"\u8bf7\u8f93\u5165title!"}],initialValue:n})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({label:"dataIndex"},je),l("dataIndex-".concat(r),{rules:[{required:!0,message:"dataIndex!"}],initialValue:i})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({label:"width"},je),l("width-".concat(r),{initialValue:c||""},{rules:[{pattern:/^\d+(%)?$/,message:"\u8bf7\u8f93\u5165\u6570\u5b57\u6216\u8005\u767e\u5206\u6bd4!"}]})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({label:"align"},je),l("align-".concat(r),{initialValue:u})(o.a.createElement(j.a,null,o.a.createElement(ke,{value:"left"},"left"),o.a.createElement(ke,{value:"right"},"right"),o.a.createElement(ke,{value:"center"},"center")))),o.a.createElement(y.a.Item,Object.assign({label:"fixed"},je),l("fixed-".concat(r),{initialValue:m?"1":"0"})(o.a.createElement(j.a,null,o.a.createElement(ke,{value:"0"},"false"),o.a.createElement(ke,{value:"1"},"true")))))}))}},{key:"renderTableProps",value:function(){var e=this,t=this.props.form,a=this.state.configs,n=a.operationArr,r=void 0===n?[]:n,i=t.getFieldDecorator,c=a.pagination,s=a.rowSelection,u=a.hasOperation,d=void 0===u?"0":u,m=c||{},p=m.pageSize,b=void 0===p?10:p,f=m.pageSizeOptions,h=void 0===f?"10,20,30":f,g=s||{},C=g.type,O=void 0===C?"checkbox":C,x=g.columnTitle,k=void 0===x?"\u9009\u62e9":x,I=Object.keys(c||{}).length>0?"1":"0",S=Object.keys(s||{}).length>0?"1":"0";return o.a.createElement(l.Fragment,null,o.a.createElement(y.a.Item,Object.assign({label:"\u64cd\u4f5c\u5217"},je),i("hasOperation",{initialValue:d})(o.a.createElement(j.a,null,o.a.createElement(ke,{value:"0"},"\u65e0"),o.a.createElement(ke,{value:"1"},"\u6709")))),"1"===t.getFieldValue("hasOperation")?[o.a.createElement(se.a,{key:"op-collapse"},r.map(function(t){var a=t.index,n=t.opText,l=t.opType;return o.a.createElement(xe,{header:e.renderOperationHeader(t),key:"op-".concat(a)},o.a.createElement(y.a.Item,Object.assign({label:"\u6587\u5b57"},je),i("opText-".concat(a),{initialValue:n})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({label:"\u7c7b\u578b"},je),i("opType-".concat(a),{initialValue:l})(o.a.createElement(j.a,null,o.a.createElement(ke,{value:"edit"},"\u7f16\u8f91"),o.a.createElement(ke,{value:"view"},"\u67e5\u770b"),o.a.createElement(ke,{value:"delete"},"\u5220\u9664"),o.a.createElement(ke,{value:"other"},"\u5176\u4ed6")))))})),o.a.createElement(l.Fragment,{key:"op-collapse-btns"},"1"===t.getFieldValue("hasOperation")?o.a.createElement("div",{className:"btn-add-box"},o.a.createElement(E.a,{type:"dashed",size:"large",onClick:this.onAddOperation},"\u6dfb\u52a0\u64cd\u4f5c\u9879")):null)]:null,o.a.createElement(y.a.Item,Object.assign({label:"pagination"},je),i("pagination",{initialValue:I})(o.a.createElement(j.a,null,o.a.createElement(ke,{value:"0"},"false"),o.a.createElement(ke,{value:"1"},"true")))),"1"===t.getFieldValue("pagination")?o.a.createElement(ue.a,{title:"pagination\u914d\u7f6e"},o.a.createElement(y.a.Item,Object.assign({label:"pageSize"},je),i("pageSize",{initialValue:b})(o.a.createElement(v.a,null))),o.a.createElement(y.a.Item,Object.assign({label:"pageSizeOptions"},je),i("pageSizeOptions",{initialValue:Array.isArray(h)?h.join(","):h})(o.a.createElement(j.a,null,o.a.createElement(ke,{value:"10,20,30"},"10,20,30"),o.a.createElement(ke,{value:"10,20,30,40"},"10,20,30,40"),o.a.createElement(ke,{value:"20,30,40"},"20,30,40"))))):null,o.a.createElement(y.a.Item,Object.assign({label:"rowSelection"},je),i("rowSelection",{initialValue:S})(o.a.createElement(j.a,null,o.a.createElement(ke,{value:"0"},"false"),o.a.createElement(ke,{value:"1"},"true")))),"1"===t.getFieldValue("rowSelection")?o.a.createElement(ue.a,{title:"rowSelection\u914d\u7f6e"},o.a.createElement(y.a.Item,Object.assign({label:"type"},je),i("type",{initialValue:O})(o.a.createElement(j.a,null,o.a.createElement(ke,{value:"checkbox"},"checkbox"),o.a.createElement(ke,{value:"radio"},"radio")))),"radio"===t.getFieldValue("type")?o.a.createElement(y.a.Item,Object.assign({label:"columnTitle"},je),i("columnTitle",{initialValue:k})(o.a.createElement(v.a,null))):null):null)}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onClose;return o.a.createElement(K.a,{title:"\u8868\u683c\u7f16\u8f91",width:420,onClose:a,visible:t},o.a.createElement(y.a,{onSubmit:this.onSubmit},o.a.createElement(Q.a,null,"\u8868\u5934"),this.renderCollapse(),o.a.createElement("div",{className:"btn-add-box"},o.a.createElement(E.a,{type:"dashed",size:"large",onClick:this.onAddColumn},"\u6dfb\u52a0\u8868\u5934\u5217")),o.a.createElement(Q.a,null,"\u8868\u683c\u5c5e\u6027"),this.renderTableProps(),o.a.createElement(y.a.Item,{style:{marginTop:"20px",textAlign:"center"}},o.a.createElement(E.a,{type:"primary",htmlType:"submit"},"\u786e\u5b9a"))))}}]),t}(l.PureComponent),De=y.a.create()(Se),we=(a(358),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1},a.onShowEditTable=a.onShowEditTable.bind(Object(p.a)(Object(p.a)(a))),a.onClose=a.onClose.bind(Object(p.a)(Object(p.a)(a))),a.onUpdateConfigs=a.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteContainer=a.onDeleteContainer.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onShowEditTable",value:function(){this.setState({visible:!0})}},{key:"onClose",value:function(e){e.stopPropagation(),this.setState({visible:!1})}},{key:"onUpdateConfigs",value:function(e){var t=this.props,a=t.layoutIndex;(0,t.onUpdateLayoutConfig)({layoutIndex:a,configs:e}),this.setState({visible:!1})}},{key:"onDeleteContainer",value:function(){var e=this.props,t=e.layoutIndex;(0,e.onUpdateLayoutConfig)({layoutIndex:t,deleteFlag:!0})}},{key:"renderMoreOpList",value:function(e){return o.a.createElement("span",{style:{background:"#fff",display:"block"}},e.map(function(e){var t=e.opText,a=e.index;return o.a.createElement("a",{href:"\xa0",key:"op-".concat(a),style:{display:"block"}},t)}))}},{key:"renderMultOperation",value:function(e){var t=Object(Ce.a)(e),a=t[0],n=t.slice(1);return o.a.createElement(l.Fragment,null,o.a.createElement("a",{href:"\xa0"},a.opText),o.a.createElement(Q.a,{type:"vertical"}),o.a.createElement(Oe.a,{overlay:this.renderMoreOpList(n)},o.a.createElement("a",{className:"ant-dropdown-link",href:"\xa0"},"\u66f4\u591a",o.a.createElement(F.a,{type:"down"}))))}},{key:"render",value:function(){var e=this,t=this.state.visible,a=this.props.configs,n=void 0===a?{}:a,r=n.hasOperation,i=n.pagination,c=void 0!==i&&i,s=n.rowSelection,u=void 0===s?null:s,d=n.operationArr,m=void 0===d?[]:d,p=n.columns.slice();return r===G&&p.push({title:"\u64cd\u4f5c",render:function(){return Array.isArray(m)?m.length>2?o.a.createElement("span",null,e.renderMultOperation(m)):o.a.createElement("span",null,m.map(function(e,t){var a=e.opText,n=e.index;return o.a.createElement(l.Fragment,{key:"fr-".concat(n)},o.a.createElement("a",{href:"\xa0",key:"op-".concat(n)},a),",",t!==m.length-1?o.a.createElement(Q.a,{type:"vertical"}):null)})):null}}),o.a.createElement("div",{className:"table-container container"},o.a.createElement(T.a,{columns:p,bordered:!0,dataSource:[],pagination:c,rowSelection:u,onClick:this.onShowEditTable}),o.a.createElement(De,{visible:t,configs:n,onClose:this.onClose,onUpdateConfigs:this.onUpdateConfigs}),o.a.createElement(F.a,{type:"form",className:"icon-operation",onClick:this.onShowEditTable}))}}]),t}(l.PureComponent)),Ae=a(382),Fe=j.a.Option,Te=I.a.RangePicker,Ve=function(e){var t=e.breadcrumb,a=void 0===t?[]:t,n=e.style;return o.a.createElement(Ae.a,{style:n},a.map(function(e,t){var a=e.text,n=e.linkUrl;return o.a.createElement(Ae.a.Item,{key:"breadcrumb-".concat(t)},n?o.a.createElement("a",{href:n},a):o.a.createElement("span",null,a))}))},Pe=function(e){var t=e.text,a=e.style;return o.a.createElement("span",{style:a},t)},Ne=function(e){var t=e.style,a=void 0===t?{}:t,n=e.options,l=void 0===n?[]:n;return o.a.createElement(j.a,{style:Object(k.a)({width:"100%"},a)},Array.isArray(l)?l.map(function(e){var t=e.key,a=e.optionValue,n=e.optionText;return o.a.createElement(Fe,{key:t||a,value:a},n)}):null)},Be=function(){return o.a.createElement(I.a,{style:{width:"100%"}})},Le=function(){return o.a.createElement(Te,{style:{width:"100%"}})},Ue=function(e){var t=e.btnArr;return o.a.createElement(l.Fragment,null,t.map(function(e){var t=e.btnText,a=void 0===t?"button":t,n=(e.expandFlag,e.expandCount,e.style),l=void 0===n?{}:n,r=e.index,i=Object(x.a)(e,["btnText","expandFlag","expandCount","style","index"]);return o.a.createElement(E.a,Object.assign({key:"btn-".concat(r),style:l},i),a)}))},Me=function(e){var t=e.placeholder,a=e.type,n=null;switch(void 0===a?"Input":a){case"Text":n=Pe(e);break;case"Breadcrumb":n=Ve(e);break;case"Select":n=Ne(e);break;case"RangePicker":n=Le(e);break;case"DatePicker":n=Be(e);break;case"Btn":n=Ue(e);break;default:n=o.a.createElement(v.a,{placeholder:t})}return n},Re=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.dropConfig,t=void 0===e?{}:e,a=t.cellStyles;return o.a.createElement("div",{style:a},Me(t))}}]),t}(l.PureComponent),ze={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},He=(a(359),se.a.Panel),Ye=j.a.Option,_e=v.a.TextArea,qe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={options:[],breadcrumb:[]},a.handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a.onAddOptionItem=a.onAddOptionItem.bind(Object(p.a)(Object(p.a)(a))),a.onAddBreadcrumbItem=a.onAddBreadcrumbItem.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteComponent=a.onDeleteComponent.bind(Object(p.a)(Object(p.a)(a))),a.onAddButton=a.onAddButton.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteBreadcrumbItem=a.onDeleteBreadcrumbItem.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteOptionItem=a.onDeleteOptionItem.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteButton=a.onDeleteButton.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.dropConfig,a=t.type,n=t.options,l=t.btnArr,o=t.breadcrumb;"Option"!==a||this.initOptions||(this.setState({options:n}),this.optionIndex=n.length,this.initOptions=!0),"Btn"!==a||this.initBtn||(this.setState({btnArr:l}),this.btnIndex=l.length,this.initBtn=!0),"Breadcrumb"!==a||this.initBreadcrumb||(this.setState({breadcrumb:o}),this.breadcrumbIndex=o.length,this.initBreadcrumb=!0)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.options,n=t.btnArr,l=t.breadcrumb,o=this.props,r=o.form,i=o.onUpdateConfigs,c=o.dropConfig;r.validateFields(function(e,t){if(!e){var o=Object.assign({},c,t);if(o.cellStyles=ne(t.cellStyles),"Select"===o.type){var r=a.slice();r.forEach(function(e){var a=e.index,n="optionText-".concat(a),l="optionValue-".concat(a);e.optionText=t[n],e.optionValue=t[l],delete o[n],delete o[l]}),o.options=r}else if("DatePicker"===o.type)o.defaultValue=t.defaultValue&&t.defaultValue.format("YYYY-MM-DD");else if("Btn"===o.type){var s=n.slice();s.forEach(function(e){var a=e.index,n="btnText-".concat(a),l="type-".concat(a),r="htmlType-".concat(a),i="onClick-".concat(a),c="expandFlag-".concat(a),s="btnStyle-".concat(a);e.btnText=t[n],e.type=t[l],e.htmlType=t[r],e.expandFlag=t[c],e.style=ne(t[s]),"submit"!==e.htmlType&&(e.onClick=t[i]);var u="expandCount-".concat(a);c===G&&(e.expandCount=t[u]),delete o[s],delete o[u],delete o[c],delete o[i],delete o[r],delete o[n],delete o[l]}),o.btnArr=s}else if("Breadcrumb"===o.type){var u=l.slice();u.forEach(function(e){var a=e.index,n="breadcrumbLinkUrl-".concat(a),l="breadcrumbText-".concat(a);e.linkUrl=t[n],e.text=t[l],delete o[l],delete o[l]}),o.breadcrumb=u}i(o)}})}},{key:"onAddOptionItem",value:function(){var e=this.state.options,t=(void 0===e?[]:e).slice();t.push({value:"",text:"",index:this.optionIndex}),this.setState({options:t}),this.optionIndex+=1}},{key:"onAddBreadcrumbItem",value:function(){var e=this.state.breadcrumb,t=(void 0===e?[]:e).slice();t.push({text:"",linkUrl:"",index:this.breadcrumbIndex}),this.setState({breadcrumb:t}),this.breadcrumbIndex+=1}},{key:"onAddButton",value:function(){var e=this.state.btnArr.slice();e.push({btnText:"button",type:"primary",index:this.btnIndex}),this.setState({btnArr:e}),this.btnIndex+=1}},{key:"onDeleteButton",value:function(e){var t=this.state.btnArr,a=(void 0===t?[]:t).reduce(function(t,a){return a.index!==e&&t.push(a),t},[]);this.setState({btnArr:a})}},{key:"onDeleteOptionItem",value:function(e){var t=this.state.options,a=(void 0===t?[]:t).reduce(function(t,a){return a.index!==e&&t.push(a),t},[]);this.setState({options:a})}},{key:"onDeleteBreadcrumbItem",value:function(e){var t=this.state.breadcrumb,a=(void 0===t?[]:t).reduce(function(t,a){return a.index!==e&&t.push(a),t},[]);this.setState({breadcrumb:a})}},{key:"onDeleteComponent",value:function(){var e=this.props,t=e.onUpdateConfigs,a=e.dropConfig;t(Object.assign({},a,{deleteFlag:!0}))}},{key:"renderOptionsCard",value:function(){var e=this,t=this.props.form,a=this.state.options;return o.a.createElement(ue.a,{title:"option\u8bbe\u7f6e",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddOptionItem})},a.map(function(a){var n=a.value,r=a.text,i=a.index;return o.a.createElement(l.Fragment,{key:"optionitem-".concat(i)},o.a.createElement(y.a.Item,{key:"optionitem-value-".concat(i),style:{width:"45%",display:"inline-block"}},t.getFieldDecorator("optionValue-".concat(i),{initialValue:n})(o.a.createElement(v.a,{placeholder:"value"}))),o.a.createElement(y.a.Item,{key:"optionitem-text-".concat(i),style:{width:"45%",display:"inline-block",marginLeft:"10px"}},t.getFieldDecorator("optionText-".concat(i),{initialValue:r})(o.a.createElement(v.a,{placeholder:"show text"}))),o.a.createElement(F.a,{type:"close-circle",style:{marginLeft:"6px",lineHeight:"39px"},onClick:function(){e.onDeleteOptionItem(i)}}))}))}},{key:"renderPanelHeader",value:function(e){var t=this,a=e.btnText,n=e.index;return o.a.createElement("div",{className:"panel-header"},o.a.createElement("span",{className:"title"},a),o.a.createElement(F.a,{type:"close",className:"btn-delete",onClick:function(){t.onDeleteButton(n)}}))}},{key:"renderBtnCard",value:function(){var e=this,t=this.props,a=t.dropConfig,n=t.form,l=a.type,r=this.state.btnArr;return"Btn"===l?o.a.createElement(ue.a,{title:"\u6309\u94ae\u533a\u57df",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddButton})},o.a.createElement(se.a,null,r.map(function(t){var a=t.index,l=t.btnText,r=t.type,i=t.htmlType,c=void 0===i?"button":i,s=t.onClick,u=t.btnStyle;return o.a.createElement(He,{header:e.renderPanelHeader(t),key:"btn-".concat(a)},o.a.createElement(y.a.Item,Object.assign({key:"btnText-".concat(a),label:"\u6309\u94ae\u6587\u5b57"},ze),n.getFieldDecorator("btnText-".concat(a),{initialValue:l})(o.a.createElement(v.a,{placeholder:"btnText"}))),o.a.createElement(y.a.Item,Object.assign({key:"type-".concat(a),label:"type"},ze),n.getFieldDecorator("type-".concat(a),{initialValue:r})(o.a.createElement(j.a,null,o.a.createElement(Ye,{value:"primary"},"primary"),o.a.createElement(Ye,{value:"dashed"},"dashed"),o.a.createElement(Ye,{value:"danger"},"danger"),o.a.createElement(Ye,{value:""},"none")))),o.a.createElement(y.a.Item,Object.assign({key:"htmlType-".concat(a),label:"htmlType"},ze),n.getFieldDecorator("htmlType-".concat(a),{initialValue:c})(o.a.createElement(j.a,null,o.a.createElement(Ye,{value:"submit"},"submit"),o.a.createElement(Ye,{value:"reset"},"reset"),o.a.createElement(Ye,{value:"button"},"button")))),o.a.createElement(y.a.Item,Object.assign({key:"onClick-".concat(a),label:"onClick"},ze),n.getFieldDecorator("onClick-".concat(a),{initialValue:s})(o.a.createElement(v.a,{placeholder:"\u70b9\u51fb\u4e8b\u4ef6\u540d\u79f0"}))),o.a.createElement(y.a.Item,Object.assign({key:"btnStyle-".concat(a),label:"\u6309\u94ae\u6837\u5f0f"},ze),n.getFieldDecorator("btnStyle-".concat(a),{initialValue:u})(o.a.createElement(_e,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))))}))):null}},{key:"renderBreadcrumb",value:function(){var e=this,t=this.props.form,a=this.state.breadcrumb;return o.a.createElement(ue.a,{title:"\u9762\u5305\u5c51\u8bbe\u7f6e",extra:o.a.createElement(F.a,{type:"plus-circle",onClick:this.onAddBreadcrumbItem})},a.map(function(a){var n=a.text,r=a.linkUrl,i=a.index;return o.a.createElement(l.Fragment,{key:"breadcrumb-item-".concat(i)},o.a.createElement(y.a.Item,{key:"breadcrumbitem-value-".concat(i),style:{width:"45%",display:"inline-block"}},t.getFieldDecorator("breadcrumbText-".concat(i),{initialValue:n})(o.a.createElement(v.a,{placeholder:"\u5bfc\u822a\u540d\u79f0"}))),o.a.createElement(y.a.Item,{key:"breadcrumbitem-text-".concat(i),style:{width:"45%",display:"inline-block",marginLeft:"10px"}},t.getFieldDecorator("breadcrumbLinkUrl-".concat(i),{initialValue:r})(o.a.createElement(v.a,{placeholder:"\u5bfc\u822a\u94fe\u63a5"}))),o.a.createElement(F.a,{type:"close-circle",style:{marginLeft:"6px",lineHeight:"39px"},onClick:function(){e.onDeleteBreadcrumbItem(i)}}))}))}},{key:"renderDefaultValueItem",value:function(){var e=this.props,t=e.dropConfig,a=e.form,n=t.type,l=t.defaultValue,r=t.text,i=a.getFieldDecorator,c=this.state.options;return"Select"===n?o.a.createElement(y.a.Item,Object.assign({},ze,{label:"defaultValue"}),i("defaultValue",{initialValue:l})(o.a.createElement(j.a,null,c.map(function(e){var t=e.index,n=a.getFieldValue("optionValue-".concat(t)),l=a.getFieldValue("optionText-".concat(t));return o.a.createElement(Ye,{value:n,key:"op-".concat(t)},"".concat(n,"/").concat(l))})))):"Text"===n?o.a.createElement(y.a.Item,Object.assign({},ze,{label:"\u6587\u5b57"}),i("text",{initialValue:r})(o.a.createElement(v.a,null))):"DatePicker"===n?o.a.createElement(y.a.Item,Object.assign({},ze,{label:"defaultValue"}),i("defaultValue",{initialValue:l})(o.a.createElement(I.a,{style:{width:"100%"}}))):"Input"===n?o.a.createElement(y.a.Item,Object.assign({},ze,{label:"defaultValue"}),i("defaultValue",{initialValue:l})(o.a.createElement(v.a,null))):null}},{key:"renderContent",value:function(){var e=this.props,t=e.form,a=e.dropConfig,n=a.placeholder,r=a.type,i=t.getFieldDecorator;return"Btn"===r?this.renderBtnCard():"Breadcrumb"===r?this.renderBreadcrumb():o.a.createElement(l.Fragment,null,this.renderDefaultValueItem(),"Text"!==r&&"Breadcrumb"!==r?o.a.createElement(y.a.Item,Object.assign({},ze,{label:"placeholder"}),i("placeholder",{initialValue:n})(o.a.createElement(v.a,null))):null,"Select"===r?this.renderOptionsCard():null)}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onClose,l=t.form,r=t.dropConfig,i=le(r.cellStyles);return o.a.createElement(K.a,{visible:a,title:"\u7f16\u8f91\u7ec4\u4ef6",onClose:function(){e.initOptions=!1,e.initBtn=!1,e.initBreadcrumb=!1,n()},width:420},o.a.createElement(y.a,{onSubmit:this.handleSubmit},o.a.createElement(y.a.Item,Object.assign({label:"style\u8bbe\u7f6e"},ze),l.getFieldDecorator("cellStyles",{initialValue:i})(o.a.createElement(_e,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),this.renderContent(),o.a.createElement("div",{className:"btn-box"},o.a.createElement(E.a,{onClick:this.onDeleteComponent},"\u5220\u9664\u7ec4\u4ef6")),o.a.createElement("div",{className:"btn-bottom-box"},o.a.createElement(E.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"))))}}]),t}(l.Component),Je=y.a.create()(qe),We=(a(360),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={dropConfig:{},showEdit:!1,dropComponent:!1},a.onUpdateConfigs=a.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(a))),a.onToggleEdit=a.onToggleEdit.bind(Object(p.a)(Object(p.a)(a))),a.onDrop=a.onDrop.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.DropDom&&(this.DropDom.addEventListener("drop",this.onDrop,!1),this.DropDom.addEventListener("dragenter",this.onDragenter,!1))}},{key:"componentWillUnmount",value:function(){this.DropDom&&(this.DropDom.removeEventListener("drop",this.onDrop),this.DropDom.removeEventListener("dragenter",this.onDragenter))}},{key:"onToggleEdit",value:function(){this.setState({showEdit:!this.state.showEdit})}},{key:"onUpdateConfigs",value:function(e){var t=e.deleteFlag,a=void 0!==t&&t,n=Object(x.a)(e,["deleteFlag"]),l=this.props.onUpdateConfigs,o={dropConfig:n};a&&(o.dropConfig={dropIndex:n.dropIndex},o.dropComponent=!1),this.setState(Object(k.a)({},o)),l(n),this.onToggleEdit()}},{key:"onDrop",value:function(e){if(e.preventDefault(),"drop-container"===e.target.className){var t=JSON.parse(e.dataTransfer.getData("text/plain")).type,a=this.props,n=a.dropIndex,l=a.onUpdateConfigs,o={type:t,dropIndex:n};"Text"===t&&(o.text="Text"),"Breadcrumb"===t&&(o.breadcrumb=[{index:0,text:"menu1"},{index:1,text:"menu2"}]),"Button"===t&&(o.type="Btn",o.btnArr=[{btnText:"button",type:"primary",index:0}]),this.setState({dropConfig:o,dropComponent:!0},function(){l(o)}),this.resetBg()}}},{key:"resetBg",value:function(){var e=document.querySelectorAll(".".concat("drop-container"));e&&e.forEach(function(e){e.style.background=""})}},{key:"onDragenter",value:function(e){"drop-container"===e.target.className&&(e.target.style.background="#dde7f1")}},{key:"render",value:function(){var e=this,t=this.state,a=t.dropComponent,n=t.dropConfig,r=t.showEdit;return o.a.createElement("div",{className:"drop-container",ref:function(t){e.DropDom=t}},a?o.a.createElement(l.Fragment,null,o.a.createElement(Re,Object.assign({},this.props,{dropConfig:n})),o.a.createElement(F.a,{type:"bars",className:"icon-operation",onClick:this.onToggleEdit})):null,o.a.createElement(Je,{visible:r,dropConfig:n,onClose:this.onToggleEdit,onUpdateConfigs:this.onUpdateConfigs}))}}]),t}(l.PureComponent)),Ge=(a(361),v.a.TextArea),$e=j.a.Option,Ke=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.form,n=t.onClose;a.validateFields(function(e,t){if(!e){var a=t.layoutColumn,l=t.headerStyles,o={layoutColumn:a,headerStyles:ne(l)};n(o)}})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.form,n=e.onClose,l=e.configs,r=void 0===l?{}:l,i=e.onDeleteContainer,c=r.headerStyles,s=le(void 0===c?{}:c),u=a.getFieldDecorator;return o.a.createElement(K.a,{visible:t,width:420,title:"\u7f16\u8f91\u5217",onClose:function(){n(0)}},o.a.createElement(y.a,{onSubmit:this.handleSubmit,style:{padding:"0 20px"}},o.a.createElement(y.a.Item,Object.assign({label:"style\u8bbe\u7f6e"},ze),a.getFieldDecorator("headerStyles",{initialValue:s})(o.a.createElement(Ge,{placeholder:"\u591a\u4e2a\u6837\u5f0f\u5c5e\u6027\u8bf7\u7528\u5206\u53f7\u5206\u9694"}))),o.a.createElement(y.a.Item,Object.assign({label:"\u5bb9\u5668\u5217"},ze),u("layoutColumn",{initialValue:3,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5217\u6570!"}]})(o.a.createElement(j.a,null,o.a.createElement($e,{value:"1"},"1"),o.a.createElement($e,{value:"2"},"2"),o.a.createElement($e,{value:"3"},"3"),o.a.createElement($e,{value:"4"},"4"),o.a.createElement($e,{value:"5"},"5"),o.a.createElement($e,{value:"6"},"6"),o.a.createElement($e,{value:"7"},"7"),o.a.createElement($e,{value:"8"},"8")))),o.a.createElement("div",{style:{margin:"10px 0",textAlign:"center"}},o.a.createElement(E.a,{onClick:i},"\u5220\u9664\u5bb9\u5668")),o.a.createElement(Q.a,null),o.a.createElement("div",{className:"btn-box"},o.a.createElement(E.a,{type:"primary",htmlType:"submit",style:{textAlign:"center"}},"\u786e\u5b9a"))))}}]),t}(l.Component),Qe=y.a.create()(Ke),Ze=(a(362),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={visible:!1,configs:{cellsArr:[],layoutColumn:0}},a.onToggleEdit=a.onToggleEdit.bind(Object(p.a)(Object(p.a)(a))),a.onDeleteContainer=a.onDeleteContainer.bind(Object(p.a)(Object(p.a)(a))),a.onUpdateConfigs=a.onUpdateConfigs.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onToggleEdit",value:function(){this.setState({visible:!this.state.visible})}},{key:"onDeleteContainer",value:function(){var e=this.props;(0,e.onUpdateLayoutConfig)({layoutIndex:e.layoutIndex,deleteFlag:!0}),this.onToggleEdit()}},{key:"onUpdateConfigs",value:function(e){var t=e.deleteFlag,a=void 0!==t&&t,n=Object(x.a)(e,["deleteFlag"]),l=this.state.configs,o=Object.assign({},l),r=this.props,i=r.onUpdateLayoutConfig,c=r.layoutIndex,s=o.cellsArr.reduce(function(e,t){return a?n.dropIndex!==t.dropIndex?e.push(Object.assign({},t)):e.push({dropIndex:n.dropIndex}):n.dropIndex===t.dropIndex?e.push(Object.assign({},t,n)):e.push(Object.assign({},t)),e},[]);o.cellsArr=s,this.setState({configs:o},function(){i({layoutIndex:c,configs:o})})}},{key:"rendeCell",value:function(e){if(!e)return null;for(var t=[],a="".concat(100/e,"%"),n=0;n<e;n++)t.push(o.a.createElement("div",{className:"cell",key:"cell-".concat(n),style:{width:a}},o.a.createElement(We,{dropIndex:n,onUpdateConfigs:this.onUpdateConfigs})));return t}},{key:"render",value:function(){var e=this,t=this.state.visible,a=this.props,n=a.onUpdateLayoutConfig,l=a.layoutIndex,r=a.configs,i=r.layoutColumn,c=void 0===i?0:i,s=r.headerStyles;return o.a.createElement("div",{className:"fulu-header container",style:s},this.rendeCell(+c),o.a.createElement(Qe,{visible:t,onClose:function(t){if(t){for(var a={layoutIndex:l},o=t.layoutColumn,r=e.state.configs.cellsArr.slice(0,o),i=0;i<o;i++)r.length<=i&&r.push({dropIndex:i});var c={cellsArr:r,layoutColumn:o};a.configs=c,e.setState({configs:c}),n(a)}e.onToggleEdit()},onDeleteContainer:this.onDeleteContainer}),o.a.createElement(F.a,{type:"form",className:"icon-operation",onClick:this.onToggleEdit}))}}]),t}(l.PureComponent)),Xe=a(185),et=a.n(Xe),tt=(a(363),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderContainer",value:function(){var e=this.props,t=e.layoutConfig,a=Object(x.a)(e,["layoutConfig"]);return Array.isArray(t)&&t.length>0?t.map(function(e){var t=e.type,n=e.layoutIndex,l="layout-".concat(n),r=Object.assign({key:l},a,e);return"FormContainer"===t?o.a.createElement(Ee,r):"TableContainer"===t?o.a.createElement(we,r):"EmptyContainer"===t?o.a.createElement(et.a,r):"HeaderContainer"===t?o.a.createElement(Ze,r):null}):o.a.createElement("div",{className:"empty-tips"},"\u8bf7\u6dfb\u52a0\u5bb9\u5668\u7ec4\u4ef6")}},{key:"render",value:function(){return o.a.createElement(l.Fragment,null,this.renderContainer())}}]),t}(l.PureComponent)),at=[{title:"column0",dataIndex:"dataIndex0",index:0},{title:"column1",dataIndex:"dataIndex1",index:1},{title:"column2",dataIndex:"dataIndex2",index:2},{title:"column3",dataIndex:"dataIndex3",index:3},{title:"column4",dataIndex:"dataIndex4",index:4}],nt=(a(364),["main-container","empty-tips"]),lt=["FormContainer","TableContainer","EmptyContainer","HeaderContainer"],ot=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={layoutConfig:[],generateLoading:!1},a.onEdit=a.onEdit.bind(Object(p.a)(Object(p.a)(a))),a.onUpdateLayoutConfig=a.onUpdateLayoutConfig.bind(Object(p.a)(Object(p.a)(a))),a.onGeneratePage=a.onGeneratePage.bind(Object(p.a)(Object(p.a)(a))),a.onPreviewPage=a.onPreviewPage.bind(Object(p.a)(Object(p.a)(a))),a.layoutIndex=0,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onUpdateLayoutConfig",value:function(e){var t=e.layoutIndex,a=e.configs,n=e.deleteFlag,l=void 0!==n&&n,o=this.state.layoutConfig.slice();if(l){var r=o.findIndex(function(e){return e.layoutIndex===t});o.splice(r,1)}else{o.find(function(e){return e.layoutIndex===t}).configs=a}this.setState({layoutConfig:o})}},{key:"componentDidMount",value:function(){var e=this;window.ipc&&window.ipc.on&&window.ipc.on("asynchronous-reply",function(t,a){var n=JSON.parse(a),l=n.code,o=n.info;1===l?$.a.success(o):$.a.error(o),e.setState({generateLoading:!1})}),document.addEventListener("drop",function(t){t.preventDefault();var a=t.target.className;if(nt.indexOf(a)>-1){var n=JSON.parse(t.dataTransfer.getData("text/plain")),l=n.type;if(lt.indexOf(l)>-1){var o=e.state.layoutConfig.slice(),r=Object.assign(n,{layoutIndex:e.layoutIndex,configs:{}});"TableContainer"===l&&(r.configs.columns=at),o.push(r),e.setState({layoutConfig:o}),e.layoutIndex+=1}else $.a.warn("\u8bf7\u62d6\u62fd\u5bb9\u5668\u7ec4\u4ef6")}},!1)}},{key:"onEdit",value:function(e){var t=e.kIndex,a=this.state.formConfig.slice();a[t]=Object.assign({},a[t],e),this.setState({formConfig:a})}},{key:"onGeneratePage",value:function(){var e={pageName:this.props.pageName,layoutConfig:this.state.layoutConfig};this.setState({generateLoading:!0}),window.ipc.send("asynchronous-message",JSON.stringify(e))}},{key:"onPreviewPage",value:function(){var e=this.props.onPreviewPage;e(this.state.layoutConfig)}},{key:"render",value:function(){var e=this.state,t=e.layoutConfig,a=e.generateLoading;return o.a.createElement(l.Fragment,null,o.a.createElement("div",{className:"main-container"},o.a.createElement(tt,{layoutConfig:t,onUpdateLayoutConfig:this.onUpdateLayoutConfig})),o.a.createElement(E.a,{type:"primary",onClick:this.onGeneratePage,loading:a},"\u751f\u6210\u9875\u9762"),o.a.createElement(E.a,{type:"primary",onClick:this.onPreviewPage,style:{marginLeft:"5px"}},"\u9884\u89c8"))}}]),t}(l.PureComponent),rt=(a(365),h.a.Sider),it=h.a.Content,ct=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={showEditNameModal:!0,showPreviewModal:!1,pageName:""},a.onCloseModal=a.onCloseModal.bind(Object(p.a)(Object(p.a)(a))),a.onPreviewPage=a.onPreviewPage.bind(Object(p.a)(Object(p.a)(a))),a.onClosePreviewModal=a.onClosePreviewModal.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onCloseModal",value:function(e){var t=e.pageName;this.setState({showEditNameModal:!1,pageName:t})}},{key:"onClosePreviewModal",value:function(){this.setState({showPreviewModal:!1})}},{key:"onPreviewPage",value:function(e){this.setState({showPreviewModal:!0}),this.layoutConfig=e}},{key:"render",value:function(){var e=this.state,t=e.showEditNameModal,a=e.showPreviewModal,n=e.pageName;return o.a.createElement("div",{className:"App"},o.a.createElement(g.a,{locale:f.a},o.a.createElement(h.a,null,o.a.createElement(rt,{width:"300"},o.a.createElement(W,null)),o.a.createElement(h.a,null,o.a.createElement(it,null,o.a.createElement(ot,{pageName:n,onPreviewPage:this.onPreviewPage}))),o.a.createElement(O,{onCloseModal:this.onCloseModal,showModal:t}),o.a.createElement(z,{layoutConfig:this.layoutConfig,onCloseModal:this.onClosePreviewModal,showModal:a}))))}}]),t}(l.Component);i.a.render(o.a.createElement(ct,null),document.getElementById("root"))}},[[190,1,2]]]);
//# sourceMappingURL=main.0e7b403e.chunk.js.map